ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"foc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SVPWM_Step,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	SVPWM_Step:
  26              	.LFB172:
  27              		.file 1 "Src/foc.c"
   1:Src/foc.c     **** #include "foc.h"
   2:Src/foc.c     **** #include "tim.h"
   3:Src/foc.c     **** #include "math.h"
   4:Src/foc.c     **** #include "arm_math.h"
   5:Src/foc.c     **** #include "adc.h"
   6:Src/foc.c     **** #include "as5047.h"
   7:Src/foc.c     **** #include "uart_ext.h"
   8:Src/foc.c     **** 
   9:Src/foc.c     **** static void SVPWM(float Target_U, float duty);
  10:Src/foc.c     **** static void Test_Direction();
  11:Src/foc.c     **** static void Measure_R_MS_Handler(float duty);
  12:Src/foc.c     **** static void Measure_R_20Khz_Handler();
  13:Src/foc.c     **** static void Set_Vector(Uvect_Mos u,float duty);
  14:Src/foc.c     **** static void SVPWM_Step(CCR_Duty duty);
  15:Src/foc.c     **** 
  16:Src/foc.c     **** #define MIN(a, b) a < b ? a : b
  17:Src/foc.c     **** 
  18:Src/foc.c     **** uint16_t ADC_Values_Raw[4];
  19:Src/foc.c     **** uint16_t ADC_Values_Raw2[4];
  20:Src/foc.c     **** float Ialpha, Ibeta;
  21:Src/foc.c     **** 
  22:Src/foc.c     **** typedef struct
  23:Src/foc.c     **** {
  24:Src/foc.c     ****     uint8_t pairs;
  25:Src/foc.c     ****     float R;
  26:Src/foc.c     ****     float L;
  27:Src/foc.c     ****     int8_t direction;
  28:Src/foc.c     ****     // ÁîµÊú∫ÁöÑËøêËΩ¨ÊñπÂêëÔºåÁ∫¶ÂÆöÂú®ÂºÄÁéØÊ®°Âºè‰∏ãÔºåÁîµÊú∫Êåâu4->u6ÊñπÂêëËøêË°åÔºàÁîµËßíÂ∫¶Â¢
  29:Src/foc.c     ****     // Ê≠§ÂèÇÊï∞‰∏éÁîµÊú∫ a b c ‰∏âÁõ∏ÁöÑÁÑäÊé•ÊúâÂÖ≥
  30:Src/foc.c     ****     // Ê≠§ÂèÇÊï∞‰ªÖÂú®ÊúâÊÑüÊ®°Âºè‰∏≠(SENSOR_FOC)ÊúâÁî®
  31:Src/foc.c     **** } Motor_Info;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 2


  32:Src/foc.c     **** 
  33:Src/foc.c     **** enum
  34:Src/foc.c     **** {
  35:Src/foc.c     ****     STOP_MODE,
  36:Src/foc.c     ****     WAIT_MODE,
  37:Src/foc.c     ****     SENSOR_FOC,
  38:Src/foc.c     ****     SENSOR_LESS_FOC,
  39:Src/foc.c     ****     VF_OPENLOOP,
  40:Src/foc.c     ****     MEASURE_R,
  41:Src/foc.c     ****     MEASURE_L,
  42:Src/foc.c     ****     TEST_DIRECTION = 0xF1,
  43:Src/foc.c     ****     TEST_POSITION_OFFSET,
  44:Src/foc.c     ****     SING_MODE   // Âî±Ê≠åÊ®°Âºè
  45:Src/foc.c     **** } Board_Mode;
  46:Src/foc.c     **** 
  47:Src/foc.c     **** 
  48:Src/foc.c     **** 
  49:Src/foc.c     **** 
  50:Src/foc.c     **** struct
  51:Src/foc.c     **** {
  52:Src/foc.c     ****     uint32_t time; // unit:ms
  53:Src/foc.c     ****     float last_position;
  54:Src/foc.c     ****     int direction_result;
  55:Src/foc.c     **** } Test_Direction_Info;
  56:Src/foc.c     **** 
  57:Src/foc.c     **** Motor_Info Motor = {7, 0, 0};
  58:Src/foc.c     **** 
  59:Src/foc.c     **** Uvect_Mos U0 = {0, 0, 0, 0};
  60:Src/foc.c     **** Uvect_Mos U4 = {1, 0, 0, 0};
  61:Src/foc.c     **** Uvect_Mos U6 = {1, 1, 0, PI / 3};
  62:Src/foc.c     **** Uvect_Mos U2 = {0, 1, 0, PI / 3 * 2};
  63:Src/foc.c     **** Uvect_Mos U3 = {0, 1, 1, PI};
  64:Src/foc.c     **** Uvect_Mos U1 = {0, 0, 1, PI / 3 * 4};
  65:Src/foc.c     **** Uvect_Mos U5 = {1, 0, 1, PI / 3 * 5};
  66:Src/foc.c     **** Uvect_Mos U7 = {1, 1, 1, 0};
  67:Src/foc.c     **** 
  68:Src/foc.c     **** Uvect_Mos *Uvects[6] = {&U1, &U2, &U3, &U4, &U5, &U6};
  69:Src/foc.c     **** 
  70:Src/foc.c     **** static float theta = 0;
  71:Src/foc.c     **** float RPS = 6; // ËΩ¨ÈÄü
  72:Src/foc.c     **** 
  73:Src/foc.c     **** float Position_Degree;
  74:Src/foc.c     **** 
  75:Src/foc.c     **** float Position_Offset = 215.793457f;
  76:Src/foc.c     **** //float Position_Offset=273.164062f;
  77:Src/foc.c     **** 
  78:Src/foc.c     **** #define TIM7_FREQ 1000
  79:Src/foc.c     **** #define TIM8_FREQ 20000
  80:Src/foc.c     **** 
  81:Src/foc.c     **** #define DRIVE
  82:Src/foc.c     **** 
  83:Src/foc.c     **** static void UVects_Init()
  84:Src/foc.c     **** {
  85:Src/foc.c     ****     for (int i = 0; i < 6; ++i)
  86:Src/foc.c     ****     {
  87:Src/foc.c     ****         float v_theta = Uvects[i]->theta;
  88:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 3


  89:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
  90:Src/foc.c     ****     }
  91:Src/foc.c     **** }
  92:Src/foc.c     **** 
  93:Src/foc.c     **** void Foc_Init(float rps)
  94:Src/foc.c     **** {
  95:Src/foc.c     ****     // rps unit is r/s
  96:Src/foc.c     ****     Board_Mode = SING_MODE;
  97:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
  98:Src/foc.c     **** 
  99:Src/foc.c     ****     TIM8->CCR4 = TIM8->ARR - 2;
 100:Src/foc.c     **** 
 101:Src/foc.c     ****     UVects_Init();
 102:Src/foc.c     **** #ifdef DRIVE
 103:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_1);
 104:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_2);
 105:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_3);
 106:Src/foc.c     **** 
 107:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_1);
 108:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_2);
 109:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_3);
 110:Src/foc.c     **** #endif
 111:Src/foc.c     ****     TIM7->PSC = 1;
 112:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 113:Src/foc.c     **** 
 114:Src/foc.c     ****     HAL_TIM_Base_Start_IT(&htim7);
 115:Src/foc.c     **** 
 116:Src/foc.c     ****     HAL_TIM_Base_Start(&htim8);
 117:Src/foc.c     **** }
 118:Src/foc.c     **** 
 119:Src/foc.c     **** uint8_t get_area(uint32_t now_theta)
 120:Src/foc.c     **** {
 121:Src/foc.c     ****     return now_theta / 60 + 1;
 122:Src/foc.c     **** }
 123:Src/foc.c     **** 
 124:Src/foc.c     **** // Ê†πÊçÆÊâáÂå∫Âè∑ÔºåËé∑ÂèñËØ•ÊâáÂå∫ÁöÑ‰∏§‰∏™ÁîµÂéãÁü¢Èáè
 125:Src/foc.c     **** // area:1-6
 126:Src/foc.c     **** void get_area_u(uint8_t area, Uvect_Mos *u1, Uvect_Mos *u2)
 127:Src/foc.c     **** {
 128:Src/foc.c     ****     switch (area)
 129:Src/foc.c     ****     {
 130:Src/foc.c     ****     case 1:
 131:Src/foc.c     ****         *u1 = U4;
 132:Src/foc.c     ****         *u2 = U6;
 133:Src/foc.c     ****         break;
 134:Src/foc.c     ****     case 2:
 135:Src/foc.c     ****         *u1 = U6;
 136:Src/foc.c     ****         *u2 = U2;
 137:Src/foc.c     ****         break;
 138:Src/foc.c     ****     case 3:
 139:Src/foc.c     ****         *u1 = U2;
 140:Src/foc.c     ****         *u2 = U3;
 141:Src/foc.c     ****         break;
 142:Src/foc.c     ****     case 4:
 143:Src/foc.c     ****         *u1 = U3;
 144:Src/foc.c     ****         *u2 = U1;
 145:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 4


 146:Src/foc.c     ****     case 5:
 147:Src/foc.c     ****         *u1 = U1;
 148:Src/foc.c     ****         *u2 = U5;
 149:Src/foc.c     ****         break;
 150:Src/foc.c     ****     case 6:
 151:Src/foc.c     ****         *u1 = U5;
 152:Src/foc.c     ****         *u2 = U4;
 153:Src/foc.c     ****         break;
 154:Src/foc.c     ****     default:
 155:Src/foc.c     ****         break;
 156:Src/foc.c     ****     }
 157:Src/foc.c     **** }
 158:Src/foc.c     **** 
 159:Src/foc.c     **** /*
 160:Src/foc.c     ****     Ê†πÊçÆthetaÊù•ËÆ°ÁÆóÁõ∏ÈÇª‰∏§‰∏™Áü¢ÈáèÁöÑ‰ΩúÁî®Êó∂Èó¥ÁöÑÂáΩÊï∞Ôºå
 161:Src/foc.c     ****     Âõ†‰∏∫Áî®Âà∞Èô§Ê≥ïÊ¨°Êï∞Â§ö‰∫Ü‰∏ÄÁÇπÔºåÁõÆÂâçÊöÇÊó∂Â∫üÂºÉ„ÄÇ
 162:Src/foc.c     **** */
 163:Src/foc.c     **** void get_t(float theta, float *t1, float *t2)
 164:Src/foc.c     **** {
 165:Src/foc.c     ****     /*
 166:Src/foc.c     **** /       u2y x               u2x y       \
 167:Src/foc.c     **** | ----------------- - ----------------- |
 168:Src/foc.c     **** | u1x u2y - u2x u1y   u1x u2y - u2x u1y |
 169:Src/foc.c     **** |                                       |
 170:Src/foc.c     **** |       u1x y               u1y x       |
 171:Src/foc.c     **** | ----------------- - ----------------- |
 172:Src/foc.c     **** \ u1x u2y - u2x u1y   u1x u2y - u2x u1y /
 173:Src/foc.c     **** */
 174:Src/foc.c     ****     float temp_t1, temp_t2;
 175:Src/foc.c     ****     float theta_f; // Âçï‰Ωç‰∏∫rad
 176:Src/foc.c     ****     Uvect_Mos u1, u2;
 177:Src/foc.c     ****     float x, y;
 178:Src/foc.c     ****     get_area_u(get_area(theta), &u1, &u2);
 179:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 180:Src/foc.c     ****     arm_sin_cos_f32(theta, &y, &x);
 181:Src/foc.c     ****     x *= 0.86f;
 182:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 183:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 184:Src/foc.c     ****     //y=0.86f*sinf(theta_f);
 185:Src/foc.c     ****     temp_t1 = u2.y * x / (u1.x * u2.y - u2.x * u1.y) - (u2.x * y) / (u1.x * u2.y - u2.x * u1.y);
 186:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 187:Src/foc.c     **** 
 188:Src/foc.c     ****     *t1 = temp_t1;
 189:Src/foc.c     ****     *t2 = temp_t2;
 190:Src/foc.c     **** }
 191:Src/foc.c     **** 
 192:Src/foc.c     **** CCR_Duty get_ccr_duty(float t1, float t2, Uvect_Mos u1, Uvect_Mos u2)
 193:Src/foc.c     **** {
 194:Src/foc.c     ****     float t0, t3;
 195:Src/foc.c     ****     CCR_Duty result;
 196:Src/foc.c     ****     t0 = (1 - t1 - t2) / 2;
 197:Src/foc.c     ****     t3 = t0;
 198:Src/foc.c     **** 
 199:Src/foc.c     ****     result.ccra = U7.a * t3 + u1.a * t1 + u2.a * t2;
 200:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 201:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 202:Src/foc.c     **** 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 5


 203:Src/foc.c     ****     return result;
 204:Src/foc.c     **** }
 205:Src/foc.c     **** 
 206:Src/foc.c     **** static void SVPWM_Step(CCR_Duty duty)
 207:Src/foc.c     **** {
  28              		.loc 1 207 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 84B0     		sub	sp, sp, #16
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36 0002 8DED010A 		vstr.32	s0, [sp, #4]
  37 0006 CDED020A 		vstr.32	s1, [sp, #8]
  38 000a 8DED031A 		vstr.32	s2, [sp, #12]
 208:Src/foc.c     ****     TIM8->CCR1 = duty.ccrc * TIM8->ARR;
  39              		.loc 1 208 5 view .LVU1
  40              		.loc 1 208 34 is_stmt 0 view .LVU2
  41 000e 124B     		ldr	r3, .L3
  42 0010 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  43              		.loc 1 208 28 view .LVU3
  44 0014 F8EE677A 		vcvt.f32.u32	s15, s15
  45 0018 27EE811A 		vmul.f32	s2, s15, s2
  46              		.loc 1 208 16 view .LVU4
  47 001c BCEEC11A 		vcvt.u32.f32	s2, s2
  48 0020 83ED0D1A 		vstr.32	s2, [r3, #52]	@ int
 209:Src/foc.c     ****     TIM8->CCR2 = duty.ccrb * TIM8->ARR;
  49              		.loc 1 209 5 is_stmt 1 view .LVU5
  50              		.loc 1 209 34 is_stmt 0 view .LVU6
  51 0024 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  52              		.loc 1 209 28 view .LVU7
  53 0028 F8EE677A 		vcvt.f32.u32	s15, s15
  54 002c 9DED027A 		vldr.32	s14, [sp, #8]
  55 0030 67EE877A 		vmul.f32	s15, s15, s14
  56              		.loc 1 209 16 view .LVU8
  57 0034 FCEEE77A 		vcvt.u32.f32	s15, s15
  58 0038 C3ED0E7A 		vstr.32	s15, [r3, #56]	@ int
 210:Src/foc.c     ****     TIM8->CCR3 = duty.ccra * TIM8->ARR;
  59              		.loc 1 210 5 is_stmt 1 view .LVU9
  60              		.loc 1 210 34 is_stmt 0 view .LVU10
  61 003c D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  62              		.loc 1 210 28 view .LVU11
  63 0040 F8EE677A 		vcvt.f32.u32	s15, s15
  64 0044 9DED017A 		vldr.32	s14, [sp, #4]
  65 0048 67EE877A 		vmul.f32	s15, s15, s14
  66              		.loc 1 210 16 view .LVU12
  67 004c FCEEE77A 		vcvt.u32.f32	s15, s15
  68 0050 C3ED0F7A 		vstr.32	s15, [r3, #60]	@ int
 211:Src/foc.c     **** }
  69              		.loc 1 211 1 view .LVU13
  70 0054 04B0     		add	sp, sp, #16
  71              	.LCFI1:
  72              		.cfi_def_cfa_offset 0
  73              		@ sp needed
  74 0056 7047     		bx	lr
  75              	.L4:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 6


  76              		.align	2
  77              	.L3:
  78 0058 00040140 		.word	1073808384
  79              		.cfi_endproc
  80              	.LFE172:
  82              		.section	.text.Set_Vector,"ax",%progbits
  83              		.align	1
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv4-sp-d16
  89              	Set_Vector:
  90              	.LVL0:
  91              	.LFB183:
 212:Src/foc.c     **** 
 213:Src/foc.c     **** /*
 214:Src/foc.c     ****     Â∞ÜÁîµÂéãÁü¢ÈáèËÆæÁΩÆ‰∏∫U4ÔºåÂπ∂ÊåÅÁª≠‰∏ÄÊÆµÊó∂Èó¥
 215:Src/foc.c     **** */
 216:Src/foc.c     **** void Set_to_U4(uint8_t t)
 217:Src/foc.c     **** {
 218:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 219:Src/foc.c     ****     temp_duty.ccra = U4.a;
 220:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 221:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 222:Src/foc.c     ****     SVPWM_Step(temp_duty);
 223:Src/foc.c     ****     HAL_Delay(t);
 224:Src/foc.c     ****     temp_duty.ccra = U0.a;
 225:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 226:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 227:Src/foc.c     ****     SVPWM_Step(temp_duty);
 228:Src/foc.c     ****     uprintf("position:%f \r\n", Position_Degree);
 229:Src/foc.c     **** }
 230:Src/foc.c     **** 
 231:Src/foc.c     **** extern uint8_t Init_OK;
 232:Src/foc.c     **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
 233:Src/foc.c     **** {
 234:Src/foc.c     **** 
 235:Src/foc.c     ****     if (htim->Instance == TIM7)
 236:Src/foc.c     ****     {
 237:Src/foc.c     ****         if (!Init_OK)
 238:Src/foc.c     ****         {
 239:Src/foc.c     ****             return;
 240:Src/foc.c     ****         }
 241:Src/foc.c     ****         Theta_Handler();
 242:Src/foc.c     ****     }
 243:Src/foc.c     ****     else if (htim->Instance == TIM8)
 244:Src/foc.c     ****     {
 245:Src/foc.c     ****     }
 246:Src/foc.c     **** }
 247:Src/foc.c     **** 
 248:Src/foc.c     **** void SVPWM_Normal_CalT1T2(float alpha, float beta, uint8_t area, float *t1, float *t2)
 249:Src/foc.c     **** {
 250:Src/foc.c     ****     float temp = 0;
 251:Src/foc.c     ****     switch (area)
 252:Src/foc.c     ****     {
 253:Src/foc.c     ****     case 1:
 254:Src/foc.c     ****         *t1 = alpha - 0.57735f * beta;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 7


 255:Src/foc.c     ****         *t2 = 1.1547f * beta;
 256:Src/foc.c     ****         break;
 257:Src/foc.c     ****     case 2:
 258:Src/foc.c     ****         *t1 = alpha + 0.57735f * beta;
 259:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 260:Src/foc.c     ****         break;
 261:Src/foc.c     ****     case 3:
 262:Src/foc.c     ****         *t1 = 1.1547f * beta;
 263:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 264:Src/foc.c     ****         break;
 265:Src/foc.c     ****     case 4:
 266:Src/foc.c     ****         *t1 = 0.57735f * beta - alpha;
 267:Src/foc.c     ****         *t2 = -1.1547f * beta;
 268:Src/foc.c     ****         break;
 269:Src/foc.c     ****     case 5:
 270:Src/foc.c     ****         temp = -0.57735f * beta;
 271:Src/foc.c     ****         *t1 = temp - alpha;
 272:Src/foc.c     ****         *t2 = temp + alpha;
 273:Src/foc.c     ****         break;
 274:Src/foc.c     ****     case 6:
 275:Src/foc.c     ****         *t1 = -1.1547f * beta;
 276:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 277:Src/foc.c     ****         break;
 278:Src/foc.c     ****     }
 279:Src/foc.c     **** }
 280:Src/foc.c     **** 
 281:Src/foc.c     **** void Theta_Handler()
 282:Src/foc.c     **** {
 283:Src/foc.c     **** 
 284:Src/foc.c     ****     Position_Degree = Get_Position_Rad_Dgree(1);
 285:Src/foc.c     ****     switch (Board_Mode)
 286:Src/foc.c     ****     {
 287:Src/foc.c     ****     case SENSOR_FOC:
 288:Src/foc.c     ****         Foc();
 289:Src/foc.c     ****         break;
 290:Src/foc.c     ****     case VF_OPENLOOP:
 291:Src/foc.c     ****         VF_Openloop_Control(1, 1000, 1, 3);
 292:Src/foc.c     ****         break;
 293:Src/foc.c     ****     case TEST_DIRECTION:
 294:Src/foc.c     ****         Test_Direction();
 295:Src/foc.c     ****         break;
 296:Src/foc.c     ****     case STOP_MODE:
 297:Src/foc.c     ****         SVPWM(0, 0);
 298:Src/foc.c     ****         break;
 299:Src/foc.c     ****     case WAIT_MODE:
 300:Src/foc.c     ****         //  nothing to do
 301:Src/foc.c     ****         break;
 302:Src/foc.c     ****     case MEASURE_R:
 303:Src/foc.c     ****         Measure_R_MS_Handler(1);
 304:Src/foc.c     ****         break;
 305:Src/foc.c     ****     case SING_MODE:
 306:Src/foc.c     ****         Muisc_Play_TIM7_IRQ_Handler();
 307:Src/foc.c     ****         break;
 308:Src/foc.c     ****     default:
 309:Src/foc.c     ****         break;
 310:Src/foc.c     ****     }
 311:Src/foc.c     **** }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 8


 312:Src/foc.c     **** 
 313:Src/foc.c     **** #define ADC_RAW2_CURRENT(raw) raw * 3300.0f / 4096 / 200 / 0.003f
 314:Src/foc.c     **** 
 315:Src/foc.c     **** void Park_Conv(float ia, float ib, float *ialpha, float *ibeta)
 316:Src/foc.c     **** {
 317:Src/foc.c     ****     *ialpha = ia;
 318:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 319:Src/foc.c     **** }
 320:Src/foc.c     **** 
 321:Src/foc.c     **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc)
 322:Src/foc.c     **** {
 323:Src/foc.c     ****     float ia, ib;
 324:Src/foc.c     **** 
 325:Src/foc.c     ****     if (hadc->Instance == ADC1)
 326:Src/foc.c     ****     {
 327:Src/foc.c     ****     }
 328:Src/foc.c     ****     else if (hadc->Instance == ADC2)
 329:Src/foc.c     ****     {
 330:Src/foc.c     ****         if (Board_Mode == SENSOR_FOC)
 331:Src/foc.c     ****         {
 332:Src/foc.c     ****             ia = ADC_RAW2_CURRENT(ADC_Values_Raw2[0]);
 333:Src/foc.c     ****             ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 334:Src/foc.c     ****             Park_Conv(ia, ib, &Ialpha, &Ibeta);
 335:Src/foc.c     ****         }
 336:Src/foc.c     ****         Measure_R_20Khz_Handler();
 337:Src/foc.c     ****     }
 338:Src/foc.c     **** }
 339:Src/foc.c     **** 
 340:Src/foc.c     **** void Foc()
 341:Src/foc.c     **** {
 342:Src/foc.c     ****     Uvect_Mos u1, u2;
 343:Src/foc.c     ****     float t1, t2;
 344:Src/foc.c     ****     float x, y;
 345:Src/foc.c     **** 
 346:Src/foc.c     ****     float electric_position = (-1 * Position_Degree + 360);
 347:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 348:Src/foc.c     ****     //float electric_position=Position_Degree;
 349:Src/foc.c     ****     //float electric_position_offset=Position_Offset;
 350:Src/foc.c     ****     int32_t sub = (int32_t)(electric_position - electric_position_offset);
 351:Src/foc.c     **** 
 352:Src/foc.c     ****     if (sub < 0)
 353:Src/foc.c     ****     {
 354:Src/foc.c     ****         sub += 360;
 355:Src/foc.c     ****     }
 356:Src/foc.c     ****     sub *= Motor.pairs;
 357:Src/foc.c     ****     sub += 90;
 358:Src/foc.c     **** 
 359:Src/foc.c     ****     sub %= 360;
 360:Src/foc.c     **** 
 361:Src/foc.c     ****     SVPWM(sub, 1);
 362:Src/foc.c     **** }
 363:Src/foc.c     **** 
 364:Src/foc.c     **** // Target_U ÊúüÊúõÁîµÂéãÁü¢ÈáèÁöÑËßíÂ∫¶ Âçï‰Ωç¬∞ 0-360
 365:Src/foc.c     **** // duty ÊúüÊúõÂç†Á©∫ÊØî 0-1
 366:Src/foc.c     **** static void SVPWM(float Target_U, float duty)
 367:Src/foc.c     **** {
 368:Src/foc.c     ****     Uvect_Mos u1, u2;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 9


 369:Src/foc.c     ****     float x, y;
 370:Src/foc.c     ****     float t1, t2;
 371:Src/foc.c     ****     static CCR_Duty CCR_Dutys = {0};
 372:Src/foc.c     **** 
 373:Src/foc.c     ****     uint8_t area = get_area(Target_U);
 374:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 375:Src/foc.c     ****     arm_sin_cos_f32(Target_U, &y, &x);
 376:Src/foc.c     ****     x *= 0.86f * duty;
 377:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 378:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 379:Src/foc.c     ****     CCR_Dutys = get_ccr_duty(t1, t2, u1, u2);
 380:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 381:Src/foc.c     **** }
 382:Src/foc.c     **** 
 383:Src/foc.c     **** void VF_Openloop_Control(float duty, float freq, int8_t direction, float rps)
 384:Src/foc.c     **** {
 385:Src/foc.c     ****     static float theta = 0;
 386:Src/foc.c     ****     float delta_p = rps * Motor.pairs * 360.0f / freq; // ÊØèÊ¨°Ë∞ÉÁî®Êú¨ÂáΩÊï∞Ë¶ÅÂ¢ûÂä†ÁöÑÂÄº
 387:Src/foc.c     **** 
 388:Src/foc.c     ****     theta += direction * delta_p;
 389:Src/foc.c     ****     if (theta > 360)
 390:Src/foc.c     ****     {
 391:Src/foc.c     ****         theta -= 360;
 392:Src/foc.c     ****     }
 393:Src/foc.c     ****     else if (theta < 0)
 394:Src/foc.c     ****     {
 395:Src/foc.c     ****         theta += 360;
 396:Src/foc.c     ****     }
 397:Src/foc.c     ****     SVPWM(theta, duty);
 398:Src/foc.c     **** }
 399:Src/foc.c     **** 
 400:Src/foc.c     **** static void Test_Direction()
 401:Src/foc.c     **** {
 402:Src/foc.c     ****     Test_Direction_Info.time += 1;
 403:Src/foc.c     **** 
 404:Src/foc.c     ****     if (Position_Degree > Test_Direction_Info.last_position)
 405:Src/foc.c     ****     {
 406:Src/foc.c     ****         Test_Direction_Info.direction_result += 1;
 407:Src/foc.c     ****     }
 408:Src/foc.c     ****     else
 409:Src/foc.c     ****     {
 410:Src/foc.c     ****         Test_Direction_Info.direction_result -= 1;
 411:Src/foc.c     ****     }
 412:Src/foc.c     ****     Test_Direction_Info.last_position = Position_Degree;
 413:Src/foc.c     **** 
 414:Src/foc.c     ****     VF_Openloop_Control(1, 1000, 1, 1);
 415:Src/foc.c     **** 
 416:Src/foc.c     ****     if (Test_Direction_Info.time > 10000)
 417:Src/foc.c     ****     { // run 10s
 418:Src/foc.c     ****         Board_Mode = STOP_MODE;
 419:Src/foc.c     ****         Test_Direction_Info.time = 0;
 420:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 421:Src/foc.c     ****         if (Test_Direction_Info.direction_result > 0)
 422:Src/foc.c     ****         {
 423:Src/foc.c     ****             uprintf_polling("the direction of the motor is postive!\r\n");
 424:Src/foc.c     ****             Motor.direction = 1;
 425:Src/foc.c     ****         }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 10


 426:Src/foc.c     ****         else
 427:Src/foc.c     ****         {
 428:Src/foc.c     ****             uprintf_polling("the direction of the motor is nagative!\r\n");
 429:Src/foc.c     ****             Motor.direction = -1;
 430:Src/foc.c     ****         }
 431:Src/foc.c     ****         Test_Direction_Info.direction_result = 0;
 432:Src/foc.c     ****     }
 433:Src/foc.c     **** }
 434:Src/foc.c     **** 
 435:Src/foc.c     **** struct
 436:Src/foc.c     **** {
 437:Src/foc.c     ****     uint32_t time; //unit:ms
 438:Src/foc.c     ****     Uvect_Mos *Used_Mos;
 439:Src/foc.c     ****     uint32_t cnt;
 440:Src/foc.c     ****     uint32_t USELESS_CNT;
 441:Src/foc.c     ****     uint32_t CNT_MAX;
 442:Src/foc.c     ****     float current_sum;
 443:Src/foc.c     **** } Measure_R_Info;
 444:Src/foc.c     **** 
 445:Src/foc.c     **** static void Set_Vector(Uvect_Mos u,float duty){
  92              		.loc 1 445 47 is_stmt 1 view -0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 32
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  96              		.loc 1 445 47 is_stmt 0 view .LVU15
  97 0000 10B5     		push	{r4, lr}
  98              	.LCFI2:
  99              		.cfi_def_cfa_offset 8
 100              		.cfi_offset 4, -8
 101              		.cfi_offset 14, -4
 102 0002 88B0     		sub	sp, sp, #32
 103              	.LCFI3:
 104              		.cfi_def_cfa_offset 40
 105 0004 6C46     		mov	r4, sp
 106 0006 84E80F00 		stm	r4, {r0, r1, r2, r3}
 107 000a F0EE407A 		vmov.f32	s15, s0
 446:Src/foc.c     ****     CCR_Duty temp_duty={0};
 108              		.loc 1 446 5 is_stmt 1 view .LVU16
 447:Src/foc.c     **** 
 448:Src/foc.c     ****     temp_duty.ccra = u.a * duty; //011
 109              		.loc 1 448 5 view .LVU17
 110              		.loc 1 448 23 is_stmt 0 view .LVU18
 111 000e 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 112 0012 00EE103A 		vmov	s0, r3	@ int
 113              	.LVL1:
 114              		.loc 1 448 26 view .LVU19
 115 0016 B8EEC00A 		vcvt.f32.s32	s0, s0
 449:Src/foc.c     ****     temp_duty.ccrb = u.b * duty;
 116              		.loc 1 449 5 is_stmt 1 view .LVU20
 117              		.loc 1 449 23 is_stmt 0 view .LVU21
 118 001a 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 119 001e 00EE903A 		vmov	s1, r3	@ int
 120              		.loc 1 449 26 view .LVU22
 121 0022 F8EEE00A 		vcvt.f32.s32	s1, s1
 450:Src/foc.c     ****     temp_duty.ccrc = u.c * duty;
 122              		.loc 1 450 5 is_stmt 1 view .LVU23
 123              		.loc 1 450 23 is_stmt 0 view .LVU24
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 11


 124 0026 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 125 002a 01EE103A 		vmov	s2, r3	@ int
 126              		.loc 1 450 26 view .LVU25
 127 002e B8EEC11A 		vcvt.f32.s32	s2, s2
 451:Src/foc.c     **** 
 452:Src/foc.c     ****     SVPWM_Step(temp_duty);    
 128              		.loc 1 452 5 is_stmt 1 view .LVU26
 129 0032 20EE270A 		vmul.f32	s0, s0, s15
 130 0036 60EEA70A 		vmul.f32	s1, s1, s15
 131 003a 21EE271A 		vmul.f32	s2, s2, s15
 132 003e FFF7FEFF 		bl	SVPWM_Step
 133              	.LVL2:
 453:Src/foc.c     **** }
 134              		.loc 1 453 1 is_stmt 0 view .LVU27
 135 0042 08B0     		add	sp, sp, #32
 136              	.LCFI4:
 137              		.cfi_def_cfa_offset 8
 138              		@ sp needed
 139 0044 10BD     		pop	{r4, pc}
 140              		.cfi_endproc
 141              	.LFE183:
 143              		.section	.text.Measure_R_20Khz_Handler,"ax",%progbits
 144              		.align	1
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 148              		.fpu fpv4-sp-d16
 150              	Measure_R_20Khz_Handler:
 151              	.LFB185:
 454:Src/foc.c     **** 
 455:Src/foc.c     **** 
 456:Src/foc.c     **** static void Measure_R_MS_Handler(float duty)
 457:Src/foc.c     **** {
 458:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 459:Src/foc.c     ****     static float current1 = 0;
 460:Src/foc.c     ****     static float current2 = 0;
 461:Src/foc.c     ****     float cur_avg = 0;
 462:Src/foc.c     ****     if (Measure_R_Info.time == 0)
 463:Src/foc.c     ****     {
 464:Src/foc.c     ****         Measure_R_Info.Used_Mos = &U5;
 465:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 466:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 467:Src/foc.c     **** 
 468:Src/foc.c     ****         temp_duty.ccra = Measure_R_Info.Used_Mos->a * duty; //011
 469:Src/foc.c     ****         temp_duty.ccrb = Measure_R_Info.Used_Mos->b * duty;
 470:Src/foc.c     ****         temp_duty.ccrc = Measure_R_Info.Used_Mos->c * duty;
 471:Src/foc.c     ****         SVPWM_Step(temp_duty);
 472:Src/foc.c     ****         
 473:Src/foc.c     ****         //Set_Vector(*Measure_R_Info.Used_Mos,duty); 
 474:Src/foc.c     ****         Measure_R_Info.time = 1;
 475:Src/foc.c     **** 
 476:Src/foc.c     ****         return;
 477:Src/foc.c     ****     }
 478:Src/foc.c     **** 
 479:Src/foc.c     ****     Measure_R_Info.time += 1;
 480:Src/foc.c     **** 
 481:Src/foc.c     ****     // ËøôÈáåÁöÑÁîµÊµÅ‰ªÖÁî®‰∫éÊµãËØïÈááÊ†∑Áõ∏ÊòØÂê¶Ê≠£Á°Æ
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 12


 482:Src/foc.c     ****     current1 += ADC_RAW2_CURRENT(ADC_Values_Raw2[0]);
 483:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 484:Src/foc.c     **** 
 485:Src/foc.c     ****     if (Measure_R_Info.time >= 3)
 486:Src/foc.c     ****     {
 487:Src/foc.c     ****         uprintf_polling("duty:%f current1:%f  current2:%f\r\n", duty, current1, current2);
 488:Src/foc.c     ****         current1 = 0;
 489:Src/foc.c     ****         current2 = 0;
 490:Src/foc.c     ****         Board_Mode = STOP_MODE;
 491:Src/foc.c     ****         Measure_R_Info.time = 0;
 492:Src/foc.c     **** 
 493:Src/foc.c     ****         if (Measure_R_Info.cnt < Measure_R_Info.CNT_MAX)
 494:Src/foc.c     ****         {
 495:Src/foc.c     ****             uprintf_polling("error! no enough time! %d \r\n", Measure_R_Info.cnt);
 496:Src/foc.c     ****         }
 497:Src/foc.c     ****         else
 498:Src/foc.c     ****         {
 499:Src/foc.c     ****             cur_avg = Measure_R_Info.current_sum / (Measure_R_Info.CNT_MAX - Measure_R_Info.USELESS
 500:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 501:Src/foc.c     ****         }
 502:Src/foc.c     ****         Measure_R_Info.current_sum = 0;
 503:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 504:Src/foc.c     ****     }
 505:Src/foc.c     **** }
 506:Src/foc.c     **** 
 507:Src/foc.c     **** static void Measure_R_20Khz_Handler()
 508:Src/foc.c     **** {
 152              		.loc 1 508 1 is_stmt 1 view -0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 0
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              		@ link register save eliminated.
 509:Src/foc.c     ****     if (Board_Mode != MEASURE_R)
 157              		.loc 1 509 5 view .LVU29
 158              		.loc 1 509 20 is_stmt 0 view .LVU30
 159 0000 2B4B     		ldr	r3, .L12
 160 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 161              		.loc 1 509 8 view .LVU31
 162 0004 052B     		cmp	r3, #5
 163 0006 15D1     		bne	.L7
 510:Src/foc.c     ****     {
 511:Src/foc.c     ****         return;
 512:Src/foc.c     ****     }
 513:Src/foc.c     **** 
 514:Src/foc.c     ****     if (Measure_R_Info.time < 1)
 164              		.loc 1 514 5 is_stmt 1 view .LVU32
 165              		.loc 1 514 23 is_stmt 0 view .LVU33
 166 0008 2A4B     		ldr	r3, .L12+4
 167 000a 1B68     		ldr	r3, [r3]
 168              		.loc 1 514 8 view .LVU34
 169 000c 93B1     		cbz	r3, .L7
 515:Src/foc.c     ****     {
 516:Src/foc.c     ****         return;
 517:Src/foc.c     ****     }
 518:Src/foc.c     ****     Measure_R_Info.cnt++;
 170              		.loc 1 518 5 is_stmt 1 view .LVU35
 171              		.loc 1 518 19 is_stmt 0 view .LVU36
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 13


 172 000e 294A     		ldr	r2, .L12+4
 173 0010 9368     		ldr	r3, [r2, #8]
 174              		.loc 1 518 23 view .LVU37
 175 0012 0133     		adds	r3, r3, #1
 176 0014 9360     		str	r3, [r2, #8]
 519:Src/foc.c     **** 
 520:Src/foc.c     ****     // eg:USELESS_CNT=5   CNT_MAX=30
 521:Src/foc.c     ****     // 5,6,7...30
 522:Src/foc.c     ****     // so times is CNT_MAX-USELESS_CNT+1
 523:Src/foc.c     ****     if (Measure_R_Info.cnt >= Measure_R_Info.USELESS_CNT && Measure_R_Info.cnt <= Measure_R_Info.CN
 177              		.loc 1 523 5 is_stmt 1 view .LVU38
 178              		.loc 1 523 45 is_stmt 0 view .LVU39
 179 0016 D268     		ldr	r2, [r2, #12]
 180              		.loc 1 523 8 view .LVU40
 181 0018 9342     		cmp	r3, r2
 182 001a 0BD3     		bcc	.L7
 183              		.loc 1 523 97 discriminator 1 view .LVU41
 184 001c 254A     		ldr	r2, .L12+4
 185 001e 1269     		ldr	r2, [r2, #16]
 186              		.loc 1 523 58 discriminator 1 view .LVU42
 187 0020 9342     		cmp	r3, r2
 188 0022 07D8     		bhi	.L7
 524:Src/foc.c     ****     {
 525:Src/foc.c     ****         if (Measure_R_Info.Used_Mos == &U3)
 189              		.loc 1 525 9 is_stmt 1 view .LVU43
 190              		.loc 1 525 27 is_stmt 0 view .LVU44
 191 0024 234B     		ldr	r3, .L12+4
 192 0026 5B68     		ldr	r3, [r3, #4]
 193              		.loc 1 525 12 view .LVU45
 194 0028 234A     		ldr	r2, .L12+8
 195 002a 9342     		cmp	r3, r2
 196 002c 03D0     		beq	.L10
 526:Src/foc.c     ****         { //011
 527:Src/foc.c     ****             Measure_R_Info.current_sum += ADC_RAW2_CURRENT(ADC_Values_Raw2[0]);
 528:Src/foc.c     ****         }
 529:Src/foc.c     ****         else if (Measure_R_Info.Used_Mos == &U5)
 197              		.loc 1 529 14 is_stmt 1 view .LVU46
 198              		.loc 1 529 17 is_stmt 0 view .LVU47
 199 002e 234A     		ldr	r2, .L12+12
 200 0030 9342     		cmp	r3, r2
 201 0032 1ED0     		beq	.L11
 202              	.L7:
 530:Src/foc.c     ****         {
 531:Src/foc.c     ****             Measure_R_Info.current_sum += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 532:Src/foc.c     ****         }
 533:Src/foc.c     ****     }
 534:Src/foc.c     **** }
 203              		.loc 1 534 1 view .LVU48
 204 0034 7047     		bx	lr
 205              	.L10:
 527:Src/foc.c     ****         }
 206              		.loc 1 527 13 is_stmt 1 view .LVU49
 527:Src/foc.c     ****         }
 207              		.loc 1 527 43 is_stmt 0 view .LVU50
 208 0036 224B     		ldr	r3, .L12+16
 209 0038 1B88     		ldrh	r3, [r3]
 210 003a 07EE903A 		vmov	s15, r3	@ int
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 14


 211 003e F8EEE77A 		vcvt.f32.s32	s15, s15
 212 0042 9FED207A 		vldr.32	s14, .L12+20
 213 0046 67EE877A 		vmul.f32	s15, s15, s14
 214 004a 9FED1F7A 		vldr.32	s14, .L12+24
 215 004e 67EE877A 		vmul.f32	s15, s15, s14
 216 0052 9FED1E7A 		vldr.32	s14, .L12+28
 217 0056 C7EE876A 		vdiv.f32	s13, s15, s14
 218 005a DFED1D7A 		vldr.32	s15, .L12+32
 219 005e 86EEA77A 		vdiv.f32	s14, s13, s15
 527:Src/foc.c     ****         }
 220              		.loc 1 527 40 view .LVU51
 221 0062 144B     		ldr	r3, .L12+4
 222 0064 D3ED057A 		vldr.32	s15, [r3, #20]
 223 0068 77EE877A 		vadd.f32	s15, s15, s14
 224 006c C3ED057A 		vstr.32	s15, [r3, #20]
 225 0070 7047     		bx	lr
 226              	.L11:
 531:Src/foc.c     ****         }
 227              		.loc 1 531 13 is_stmt 1 view .LVU52
 531:Src/foc.c     ****         }
 228              		.loc 1 531 43 is_stmt 0 view .LVU53
 229 0072 134B     		ldr	r3, .L12+16
 230 0074 5B88     		ldrh	r3, [r3, #2]
 231 0076 07EE903A 		vmov	s15, r3	@ int
 232 007a F8EEE77A 		vcvt.f32.s32	s15, s15
 233 007e 9FED117A 		vldr.32	s14, .L12+20
 234 0082 67EE877A 		vmul.f32	s15, s15, s14
 235 0086 9FED107A 		vldr.32	s14, .L12+24
 236 008a 67EE877A 		vmul.f32	s15, s15, s14
 237 008e 9FED0F7A 		vldr.32	s14, .L12+28
 238 0092 C7EE876A 		vdiv.f32	s13, s15, s14
 239 0096 DFED0E7A 		vldr.32	s15, .L12+32
 240 009a 86EEA77A 		vdiv.f32	s14, s13, s15
 531:Src/foc.c     ****         }
 241              		.loc 1 531 40 view .LVU54
 242 009e 054B     		ldr	r3, .L12+4
 243 00a0 D3ED057A 		vldr.32	s15, [r3, #20]
 244 00a4 77EE877A 		vadd.f32	s15, s15, s14
 245 00a8 C3ED057A 		vstr.32	s15, [r3, #20]
 246 00ac C2E7     		b	.L7
 247              	.L13:
 248 00ae 00BF     		.align	2
 249              	.L12:
 250 00b0 00000000 		.word	Board_Mode
 251 00b4 00000000 		.word	Measure_R_Info
 252 00b8 00000000 		.word	.LANCHOR0
 253 00bc 00000000 		.word	.LANCHOR1
 254 00c0 00000000 		.word	ADC_Values_Raw2
 255 00c4 00404E45 		.word	1162756096
 256 00c8 00008039 		.word	964689920
 257 00cc 00004843 		.word	1128792064
 258 00d0 A69B443B 		.word	994352038
 259              		.cfi_endproc
 260              	.LFE185:
 262              		.section	.text.UVects_Init,"ax",%progbits
 263              		.align	1
 264              		.syntax unified
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 15


 265              		.thumb
 266              		.thumb_func
 267              		.fpu fpv4-sp-d16
 269              	UVects_Init:
 270              	.LFB166:
  84:Src/foc.c     ****     for (int i = 0; i < 6; ++i)
 271              		.loc 1 84 1 is_stmt 1 view -0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275 0000 70B5     		push	{r4, r5, r6, lr}
 276              	.LCFI5:
 277              		.cfi_def_cfa_offset 16
 278              		.cfi_offset 4, -16
 279              		.cfi_offset 5, -12
 280              		.cfi_offset 6, -8
 281              		.cfi_offset 14, -4
 282 0002 2DED028B 		vpush.64	{d8}
 283              	.LCFI6:
 284              		.cfi_def_cfa_offset 24
 285              		.cfi_offset 80, -24
 286              		.cfi_offset 81, -20
  85:Src/foc.c     ****     {
 287              		.loc 1 85 5 view .LVU56
 288              	.LBB2:
  85:Src/foc.c     ****     {
 289              		.loc 1 85 10 view .LVU57
 290              	.LVL3:
  85:Src/foc.c     ****     {
 291              		.loc 1 85 14 is_stmt 0 view .LVU58
 292 0006 0024     		movs	r4, #0
 293              	.LVL4:
 294              	.L15:
  85:Src/foc.c     ****     {
 295              		.loc 1 85 21 is_stmt 1 discriminator 1 view .LVU59
  85:Src/foc.c     ****     {
 296              		.loc 1 85 5 is_stmt 0 discriminator 1 view .LVU60
 297 0008 052C     		cmp	r4, #5
 298 000a 14DC     		bgt	.L18
 299              	.LBB3:
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 300              		.loc 1 87 9 is_stmt 1 discriminator 3 view .LVU61
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 301              		.loc 1 87 31 is_stmt 0 discriminator 3 view .LVU62
 302 000c 0B4D     		ldr	r5, .L19
 303 000e 55F82460 		ldr	r6, [r5, r4, lsl #2]
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 304              		.loc 1 87 15 discriminator 3 view .LVU63
 305 0012 96ED018A 		vldr.32	s16, [r6, #4]
 306              	.LVL5:
  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 307              		.loc 1 88 9 is_stmt 1 discriminator 3 view .LVU64
  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 308              		.loc 1 88 24 is_stmt 0 discriminator 3 view .LVU65
 309 0016 B0EE480A 		vmov.f32	s0, s16
 310 001a FFF7FEFF 		bl	cosf
 311              	.LVL6:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 16


  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 312              		.loc 1 88 22 discriminator 3 view .LVU66
 313 001e 86ED020A 		vstr.32	s0, [r6, #8]
  89:Src/foc.c     ****     }
 314              		.loc 1 89 9 is_stmt 1 discriminator 3 view .LVU67
  89:Src/foc.c     ****     }
 315              		.loc 1 89 15 is_stmt 0 discriminator 3 view .LVU68
 316 0022 55F82450 		ldr	r5, [r5, r4, lsl #2]
  89:Src/foc.c     ****     }
 317              		.loc 1 89 24 discriminator 3 view .LVU69
 318 0026 B0EE480A 		vmov.f32	s0, s16
 319 002a FFF7FEFF 		bl	sinf
 320              	.LVL7:
  89:Src/foc.c     ****     }
 321              		.loc 1 89 22 discriminator 3 view .LVU70
 322 002e 85ED030A 		vstr.32	s0, [r5, #12]
 323              	.LBE3:
  85:Src/foc.c     ****     {
 324              		.loc 1 85 28 is_stmt 1 discriminator 3 view .LVU71
 325 0032 0134     		adds	r4, r4, #1
 326              	.LVL8:
  85:Src/foc.c     ****     {
 327              		.loc 1 85 28 is_stmt 0 discriminator 3 view .LVU72
 328 0034 E8E7     		b	.L15
 329              	.LVL9:
 330              	.L18:
  85:Src/foc.c     ****     {
 331              		.loc 1 85 28 discriminator 3 view .LVU73
 332              	.LBE2:
  91:Src/foc.c     **** 
 333              		.loc 1 91 1 view .LVU74
 334 0036 BDEC028B 		vldm	sp!, {d8}
 335              	.LCFI7:
 336              		.cfi_restore 80
 337              		.cfi_restore 81
 338              		.cfi_def_cfa_offset 16
 339 003a 70BD     		pop	{r4, r5, r6, pc}
 340              	.LVL10:
 341              	.L20:
  91:Src/foc.c     **** 
 342              		.loc 1 91 1 view .LVU75
 343              		.align	2
 344              	.L19:
 345 003c 00000000 		.word	.LANCHOR2
 346              		.cfi_endproc
 347              	.LFE166:
 349              		.global	__aeabi_f2d
 350              		.section	.rodata.Measure_R_MS_Handler.str1.4,"aMS",%progbits,1
 351              		.align	2
 352              	.LC0:
 353 0000 64757479 		.ascii	"duty:%f current1:%f  current2:%f\015\012\000"
 353      3A256620 
 353      63757272 
 353      656E7431 
 353      3A256620 
 354 0023 00       		.align	2
 355              	.LC1:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 17


 356 0024 6572726F 		.ascii	"error! no enough time! %d \015\012\000"
 356      7221206E 
 356      6F20656E 
 356      6F756768 
 356      2074696D 
 357 0041 000000   		.align	2
 358              	.LC2:
 359 0044 63757272 		.ascii	"current_avg:%f cnt:%d \015\012\000"
 359      656E745F 
 359      6176673A 
 359      25662063 
 359      6E743A25 
 360              		.section	.text.Measure_R_MS_Handler,"ax",%progbits
 361              		.align	1
 362              		.syntax unified
 363              		.thumb
 364              		.thumb_func
 365              		.fpu fpv4-sp-d16
 367              	Measure_R_MS_Handler:
 368              	.LVL11:
 369              	.LFB184:
 457:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 370              		.loc 1 457 1 is_stmt 1 view -0
 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 16
 373              		@ frame_needed = 0, uses_anonymous_args = 0
 457:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 374              		.loc 1 457 1 is_stmt 0 view .LVU77
 375 0000 30B5     		push	{r4, r5, lr}
 376              	.LCFI8:
 377              		.cfi_def_cfa_offset 12
 378              		.cfi_offset 4, -12
 379              		.cfi_offset 5, -8
 380              		.cfi_offset 14, -4
 381 0002 2DED028B 		vpush.64	{d8}
 382              	.LCFI9:
 383              		.cfi_def_cfa_offset 20
 384              		.cfi_offset 80, -20
 385              		.cfi_offset 81, -16
 386 0006 89B0     		sub	sp, sp, #36
 387              	.LCFI10:
 388              		.cfi_def_cfa_offset 56
 389 0008 B0EE401A 		vmov.f32	s2, s0
 458:Src/foc.c     ****     static float current1 = 0;
 390              		.loc 1 458 5 is_stmt 1 view .LVU78
 459:Src/foc.c     ****     static float current2 = 0;
 391              		.loc 1 459 5 view .LVU79
 460:Src/foc.c     ****     float cur_avg = 0;
 392              		.loc 1 460 5 view .LVU80
 461:Src/foc.c     ****     if (Measure_R_Info.time == 0)
 393              		.loc 1 461 5 view .LVU81
 394              	.LVL12:
 462:Src/foc.c     ****     {
 395              		.loc 1 462 5 view .LVU82
 462:Src/foc.c     ****     {
 396              		.loc 1 462 23 is_stmt 0 view .LVU83
 397 000c 524B     		ldr	r3, .L30
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 18


 398 000e 1B68     		ldr	r3, [r3]
 462:Src/foc.c     ****     {
 399              		.loc 1 462 8 view .LVU84
 400 0010 002B     		cmp	r3, #0
 401 0012 39D0     		beq	.L28
 479:Src/foc.c     **** 
 402              		.loc 1 479 5 is_stmt 1 view .LVU85
 479:Src/foc.c     **** 
 403              		.loc 1 479 25 is_stmt 0 view .LVU86
 404 0014 0133     		adds	r3, r3, #1
 405 0016 504A     		ldr	r2, .L30
 406 0018 1360     		str	r3, [r2]
 482:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 407              		.loc 1 482 5 is_stmt 1 view .LVU87
 482:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 408              		.loc 1 482 17 is_stmt 0 view .LVU88
 409 001a 504A     		ldr	r2, .L30+4
 410 001c 1188     		ldrh	r1, [r2]
 411 001e 07EE101A 		vmov	s14, r1	@ int
 412 0022 B8EEC77A 		vcvt.f32.s32	s14, s14
 413 0026 DFED4E5A 		vldr.32	s11, .L30+8
 414 002a 27EE257A 		vmul.f32	s14, s14, s11
 415 002e 9FED4D6A 		vldr.32	s12, .L30+12
 416 0032 27EE067A 		vmul.f32	s14, s14, s12
 417 0036 DFED4C6A 		vldr.32	s13, .L30+16
 418 003a C7EE267A 		vdiv.f32	s15, s14, s13
 419 003e 9FED4B7A 		vldr.32	s14, .L30+20
 420 0042 87EE878A 		vdiv.f32	s16, s15, s14
 482:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 421              		.loc 1 482 14 view .LVU89
 422 0046 4A49     		ldr	r1, .L30+24
 423 0048 D1ED007A 		vldr.32	s15, [r1]
 424 004c 38EE278A 		vadd.f32	s16, s16, s15
 425 0050 81ED008A 		vstr.32	s16, [r1]
 483:Src/foc.c     **** 
 426              		.loc 1 483 5 is_stmt 1 view .LVU90
 483:Src/foc.c     **** 
 427              		.loc 1 483 17 is_stmt 0 view .LVU91
 428 0054 5288     		ldrh	r2, [r2, #2]
 429 0056 07EE902A 		vmov	s15, r2	@ int
 430 005a F8EEE77A 		vcvt.f32.s32	s15, s15
 431 005e 67EEA57A 		vmul.f32	s15, s15, s11
 432 0062 67EE867A 		vmul.f32	s15, s15, s12
 433 0066 87EEA66A 		vdiv.f32	s12, s15, s13
 434 006a C6EE078A 		vdiv.f32	s17, s12, s14
 483:Src/foc.c     **** 
 435              		.loc 1 483 14 view .LVU92
 436 006e 414A     		ldr	r2, .L30+28
 437 0070 D2ED007A 		vldr.32	s15, [r2]
 438 0074 78EEA78A 		vadd.f32	s17, s17, s15
 439 0078 C2ED008A 		vstr.32	s17, [r2]
 485:Src/foc.c     ****     {
 440              		.loc 1 485 5 is_stmt 1 view .LVU93
 485:Src/foc.c     ****     {
 441              		.loc 1 485 8 is_stmt 0 view .LVU94
 442 007c 022B     		cmp	r3, #2
 443 007e 24D8     		bhi	.L29
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 19


 444              	.LVL13:
 445              	.L21:
 505:Src/foc.c     **** 
 446              		.loc 1 505 1 view .LVU95
 447 0080 09B0     		add	sp, sp, #36
 448              	.LCFI11:
 449              		.cfi_remember_state
 450              		.cfi_def_cfa_offset 20
 451              		@ sp needed
 452 0082 BDEC028B 		vldm	sp!, {d8}
 453              	.LCFI12:
 454              		.cfi_restore 80
 455              		.cfi_restore 81
 456              		.cfi_def_cfa_offset 12
 457 0086 30BD     		pop	{r4, r5, pc}
 458              	.LVL14:
 459              	.L28:
 460              	.LCFI13:
 461              		.cfi_restore_state
 464:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 462              		.loc 1 464 9 is_stmt 1 view .LVU96
 464:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 463              		.loc 1 464 33 is_stmt 0 view .LVU97
 464 0088 334C     		ldr	r4, .L30
 465 008a 3B4B     		ldr	r3, .L30+32
 466 008c 6360     		str	r3, [r4, #4]
 465:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 467              		.loc 1 465 9 is_stmt 1 view .LVU98
 465:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 468              		.loc 1 465 36 is_stmt 0 view .LVU99
 469 008e 0222     		movs	r2, #2
 470 0090 E260     		str	r2, [r4, #12]
 466:Src/foc.c     **** 
 471              		.loc 1 466 9 is_stmt 1 view .LVU100
 466:Src/foc.c     **** 
 472              		.loc 1 466 32 is_stmt 0 view .LVU101
 473 0092 1E22     		movs	r2, #30
 474 0094 2261     		str	r2, [r4, #16]
 468:Src/foc.c     ****         temp_duty.ccrb = Measure_R_Info.Used_Mos->b * duty;
 475              		.loc 1 468 9 is_stmt 1 view .LVU102
 468:Src/foc.c     ****         temp_duty.ccrb = Measure_R_Info.Used_Mos->b * duty;
 476              		.loc 1 468 49 is_stmt 0 view .LVU103
 477 0096 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 478 0098 00EE102A 		vmov	s0, r2	@ int
 479              	.LVL15:
 468:Src/foc.c     ****         temp_duty.ccrb = Measure_R_Info.Used_Mos->b * duty;
 480              		.loc 1 468 53 view .LVU104
 481 009c B8EEC00A 		vcvt.f32.s32	s0, s0
 469:Src/foc.c     ****         temp_duty.ccrc = Measure_R_Info.Used_Mos->c * duty;
 482              		.loc 1 469 9 is_stmt 1 view .LVU105
 469:Src/foc.c     ****         temp_duty.ccrc = Measure_R_Info.Used_Mos->c * duty;
 483              		.loc 1 469 49 is_stmt 0 view .LVU106
 484 00a0 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 485 00a2 00EE902A 		vmov	s1, r2	@ int
 469:Src/foc.c     ****         temp_duty.ccrc = Measure_R_Info.Used_Mos->c * duty;
 486              		.loc 1 469 53 view .LVU107
 487 00a6 F8EEE00A 		vcvt.f32.s32	s1, s1
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 20


 470:Src/foc.c     ****         SVPWM_Step(temp_duty);
 488              		.loc 1 470 9 is_stmt 1 view .LVU108
 470:Src/foc.c     ****         SVPWM_Step(temp_duty);
 489              		.loc 1 470 49 is_stmt 0 view .LVU109
 490 00aa 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 491 00ac 07EE903A 		vmov	s15, r3	@ int
 470:Src/foc.c     ****         SVPWM_Step(temp_duty);
 492              		.loc 1 470 53 view .LVU110
 493 00b0 F8EEE77A 		vcvt.f32.s32	s15, s15
 471:Src/foc.c     ****         
 494              		.loc 1 471 9 is_stmt 1 view .LVU111
 495 00b4 20EE010A 		vmul.f32	s0, s0, s2
 496 00b8 60EE810A 		vmul.f32	s1, s1, s2
 497 00bc 27EE811A 		vmul.f32	s2, s15, s2
 498              	.LVL16:
 471:Src/foc.c     ****         
 499              		.loc 1 471 9 is_stmt 0 view .LVU112
 500 00c0 FFF7FEFF 		bl	SVPWM_Step
 501              	.LVL17:
 474:Src/foc.c     **** 
 502              		.loc 1 474 9 is_stmt 1 view .LVU113
 474:Src/foc.c     **** 
 503              		.loc 1 474 29 is_stmt 0 view .LVU114
 504 00c4 0123     		movs	r3, #1
 505 00c6 2360     		str	r3, [r4]
 476:Src/foc.c     ****     }
 506              		.loc 1 476 9 is_stmt 1 view .LVU115
 507 00c8 DAE7     		b	.L21
 508              	.LVL18:
 509              	.L29:
 487:Src/foc.c     ****         current1 = 0;
 510              		.loc 1 487 9 view .LVU116
 511 00ca 10EE100A 		vmov	r0, s0
 512 00ce FFF7FEFF 		bl	__aeabi_f2d
 513              	.LVL19:
 487:Src/foc.c     ****         current1 = 0;
 514              		.loc 1 487 9 is_stmt 0 view .LVU117
 515 00d2 0446     		mov	r4, r0
 516 00d4 0D46     		mov	r5, r1
 517 00d6 18EE900A 		vmov	r0, s17
 518 00da FFF7FEFF 		bl	__aeabi_f2d
 519              	.LVL20:
 520 00de CDE90201 		strd	r0, [sp, #8]
 521 00e2 18EE100A 		vmov	r0, s16
 522 00e6 FFF7FEFF 		bl	__aeabi_f2d
 523              	.LVL21:
 524 00ea CDE90001 		strd	r0, [sp]
 525 00ee 2246     		mov	r2, r4
 526 00f0 2B46     		mov	r3, r5
 527 00f2 2248     		ldr	r0, .L30+36
 528 00f4 FFF7FEFF 		bl	uprintf_polling
 529              	.LVL22:
 488:Src/foc.c     ****         current2 = 0;
 530              		.loc 1 488 9 is_stmt 1 view .LVU118
 488:Src/foc.c     ****         current2 = 0;
 531              		.loc 1 488 18 is_stmt 0 view .LVU119
 532 00f8 0023     		movs	r3, #0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 21


 533 00fa 1D4A     		ldr	r2, .L30+24
 534 00fc 1360     		str	r3, [r2]	@ float
 489:Src/foc.c     ****         Board_Mode = STOP_MODE;
 535              		.loc 1 489 9 is_stmt 1 view .LVU120
 489:Src/foc.c     ****         Board_Mode = STOP_MODE;
 536              		.loc 1 489 18 is_stmt 0 view .LVU121
 537 00fe 1D4A     		ldr	r2, .L30+28
 538 0100 1360     		str	r3, [r2]	@ float
 490:Src/foc.c     ****         Measure_R_Info.time = 0;
 539              		.loc 1 490 9 is_stmt 1 view .LVU122
 490:Src/foc.c     ****         Measure_R_Info.time = 0;
 540              		.loc 1 490 20 is_stmt 0 view .LVU123
 541 0102 0022     		movs	r2, #0
 542 0104 1E4B     		ldr	r3, .L30+40
 543 0106 1A70     		strb	r2, [r3]
 491:Src/foc.c     **** 
 544              		.loc 1 491 9 is_stmt 1 view .LVU124
 491:Src/foc.c     **** 
 545              		.loc 1 491 29 is_stmt 0 view .LVU125
 546 0108 134B     		ldr	r3, .L30
 547 010a 1A60     		str	r2, [r3]
 493:Src/foc.c     ****         {
 548              		.loc 1 493 9 is_stmt 1 view .LVU126
 493:Src/foc.c     ****         {
 549              		.loc 1 493 27 is_stmt 0 view .LVU127
 550 010c 9C68     		ldr	r4, [r3, #8]
 493:Src/foc.c     ****         {
 551              		.loc 1 493 48 view .LVU128
 552 010e 1B69     		ldr	r3, [r3, #16]
 493:Src/foc.c     ****         {
 553              		.loc 1 493 12 view .LVU129
 554 0110 9C42     		cmp	r4, r3
 555 0112 09D2     		bcs	.L25
 495:Src/foc.c     ****         }
 556              		.loc 1 495 13 is_stmt 1 view .LVU130
 557 0114 2146     		mov	r1, r4
 558 0116 1B48     		ldr	r0, .L30+44
 559 0118 FFF7FEFF 		bl	uprintf_polling
 560              	.LVL23:
 561              	.L26:
 502:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 562              		.loc 1 502 9 view .LVU131
 502:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 563              		.loc 1 502 36 is_stmt 0 view .LVU132
 564 011c 0E4B     		ldr	r3, .L30
 565 011e 0022     		movs	r2, #0
 566 0120 5A61     		str	r2, [r3, #20]	@ float
 503:Src/foc.c     ****     }
 567              		.loc 1 503 9 is_stmt 1 view .LVU133
 503:Src/foc.c     ****     }
 568              		.loc 1 503 28 is_stmt 0 view .LVU134
 569 0122 0022     		movs	r2, #0
 570 0124 9A60     		str	r2, [r3, #8]
 571 0126 ABE7     		b	.L21
 572              	.LVL24:
 573              	.L25:
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 22


 574              		.loc 1 499 13 is_stmt 1 view .LVU135
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 575              		.loc 1 499 37 is_stmt 0 view .LVU136
 576 0128 0B4A     		ldr	r2, .L30
 577 012a 92ED057A 		vldr.32	s14, [r2, #20]
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 578              		.loc 1 499 92 view .LVU137
 579 012e D268     		ldr	r2, [r2, #12]
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 580              		.loc 1 499 76 view .LVU138
 581 0130 9B1A     		subs	r3, r3, r2
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 582              		.loc 1 499 105 view .LVU139
 583 0132 0133     		adds	r3, r3, #1
 499:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", cur_avg, Measure_R_Info.cnt);
 584              		.loc 1 499 50 view .LVU140
 585 0134 07EE903A 		vmov	s15, r3	@ int
 586 0138 F8EE677A 		vcvt.f32.u32	s15, s15
 587              	.LVL25:
 500:Src/foc.c     ****         }
 588              		.loc 1 500 13 is_stmt 1 view .LVU141
 589 013c C7EE277A 		vdiv.f32	s15, s14, s15
 590              	.LVL26:
 500:Src/foc.c     ****         }
 591              		.loc 1 500 13 is_stmt 0 view .LVU142
 592 0140 17EE900A 		vmov	r0, s15
 593 0144 FFF7FEFF 		bl	__aeabi_f2d
 594              	.LVL27:
 500:Src/foc.c     ****         }
 595              		.loc 1 500 13 view .LVU143
 596 0148 0246     		mov	r2, r0
 597 014a 0B46     		mov	r3, r1
 598 014c 0094     		str	r4, [sp]
 599 014e 0E48     		ldr	r0, .L30+48
 600 0150 FFF7FEFF 		bl	uprintf_polling
 601              	.LVL28:
 602 0154 E2E7     		b	.L26
 603              	.L31:
 604 0156 00BF     		.align	2
 605              	.L30:
 606 0158 00000000 		.word	Measure_R_Info
 607 015c 00000000 		.word	ADC_Values_Raw2
 608 0160 00404E45 		.word	1162756096
 609 0164 00008039 		.word	964689920
 610 0168 00004843 		.word	1128792064
 611 016c A69B443B 		.word	994352038
 612 0170 00000000 		.word	.LANCHOR3
 613 0174 00000000 		.word	.LANCHOR4
 614 0178 00000000 		.word	.LANCHOR1
 615 017c 00000000 		.word	.LC0
 616 0180 00000000 		.word	Board_Mode
 617 0184 24000000 		.word	.LC1
 618 0188 44000000 		.word	.LC2
 619              		.cfi_endproc
 620              	.LFE184:
 622              		.section	.text.Foc_Init,"ax",%progbits
 623              		.align	1
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 23


 624              		.global	Foc_Init
 625              		.syntax unified
 626              		.thumb
 627              		.thumb_func
 628              		.fpu fpv4-sp-d16
 630              	Foc_Init:
 631              	.LVL29:
 632              	.LFB167:
  94:Src/foc.c     ****     // rps unit is r/s
 633              		.loc 1 94 1 is_stmt 1 view -0
 634              		.cfi_startproc
 635              		@ args = 0, pretend = 0, frame = 0
 636              		@ frame_needed = 0, uses_anonymous_args = 0
  94:Src/foc.c     ****     // rps unit is r/s
 637              		.loc 1 94 1 is_stmt 0 view .LVU145
 638 0000 10B5     		push	{r4, lr}
 639              	.LCFI14:
 640              		.cfi_def_cfa_offset 8
 641              		.cfi_offset 4, -8
 642              		.cfi_offset 14, -4
  96:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
 643              		.loc 1 96 5 is_stmt 1 view .LVU146
  96:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
 644              		.loc 1 96 16 is_stmt 0 view .LVU147
 645 0002 194B     		ldr	r3, .L34
 646 0004 F322     		movs	r2, #243
 647 0006 1A70     		strb	r2, [r3]
  97:Src/foc.c     **** 
 648              		.loc 1 97 5 is_stmt 1 view .LVU148
  97:Src/foc.c     **** 
 649              		.loc 1 97 15 is_stmt 0 view .LVU149
 650 0008 184B     		ldr	r3, .L34+4
 651 000a 41F26802 		movw	r2, #4200
 652 000e DA62     		str	r2, [r3, #44]
  99:Src/foc.c     **** 
 653              		.loc 1 99 5 is_stmt 1 view .LVU150
  99:Src/foc.c     **** 
 654              		.loc 1 99 22 is_stmt 0 view .LVU151
 655 0010 DA6A     		ldr	r2, [r3, #44]
  99:Src/foc.c     **** 
 656              		.loc 1 99 28 view .LVU152
 657 0012 023A     		subs	r2, r2, #2
  99:Src/foc.c     **** 
 658              		.loc 1 99 16 view .LVU153
 659 0014 1A64     		str	r2, [r3, #64]
 101:Src/foc.c     **** #ifdef DRIVE
 660              		.loc 1 101 5 is_stmt 1 view .LVU154
 661 0016 FFF7FEFF 		bl	UVects_Init
 662              	.LVL30:
 103:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_2);
 663              		.loc 1 103 5 view .LVU155
 664 001a 154C     		ldr	r4, .L34+8
 665 001c 0021     		movs	r1, #0
 666 001e 2046     		mov	r0, r4
 667 0020 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 668              	.LVL31:
 104:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_3);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 24


 669              		.loc 1 104 5 view .LVU156
 670 0024 0421     		movs	r1, #4
 671 0026 2046     		mov	r0, r4
 672 0028 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 673              	.LVL32:
 105:Src/foc.c     **** 
 674              		.loc 1 105 5 view .LVU157
 675 002c 0821     		movs	r1, #8
 676 002e 2046     		mov	r0, r4
 677 0030 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 678              	.LVL33:
 107:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_2);
 679              		.loc 1 107 5 view .LVU158
 680 0034 0021     		movs	r1, #0
 681 0036 2046     		mov	r0, r4
 682 0038 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 683              	.LVL34:
 108:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_3);
 684              		.loc 1 108 5 view .LVU159
 685 003c 0421     		movs	r1, #4
 686 003e 2046     		mov	r0, r4
 687 0040 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 688              	.LVL35:
 109:Src/foc.c     **** #endif
 689              		.loc 1 109 5 view .LVU160
 690 0044 0821     		movs	r1, #8
 691 0046 2046     		mov	r0, r4
 692 0048 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 693              	.LVL36:
 111:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 694              		.loc 1 111 5 view .LVU161
 111:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 695              		.loc 1 111 15 is_stmt 0 view .LVU162
 696 004c 094B     		ldr	r3, .L34+12
 697 004e 0122     		movs	r2, #1
 698 0050 9A62     		str	r2, [r3, #40]
 112:Src/foc.c     **** 
 699              		.loc 1 112 5 is_stmt 1 view .LVU163
 112:Src/foc.c     **** 
 700              		.loc 1 112 15 is_stmt 0 view .LVU164
 701 0052 4AF20F42 		movw	r2, #41999
 702 0056 DA62     		str	r2, [r3, #44]
 114:Src/foc.c     **** 
 703              		.loc 1 114 5 is_stmt 1 view .LVU165
 704 0058 0748     		ldr	r0, .L34+16
 705 005a FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 706              	.LVL37:
 116:Src/foc.c     **** }
 707              		.loc 1 116 5 view .LVU166
 708 005e 2046     		mov	r0, r4
 709 0060 FFF7FEFF 		bl	HAL_TIM_Base_Start
 710              	.LVL38:
 117:Src/foc.c     **** 
 711              		.loc 1 117 1 is_stmt 0 view .LVU167
 712 0064 10BD     		pop	{r4, pc}
 713              	.L35:
 714 0066 00BF     		.align	2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 25


 715              	.L34:
 716 0068 00000000 		.word	Board_Mode
 717 006c 00040140 		.word	1073808384
 718 0070 00000000 		.word	htim8
 719 0074 00140040 		.word	1073746944
 720 0078 00000000 		.word	htim7
 721              		.cfi_endproc
 722              	.LFE167:
 724              		.section	.text.get_area,"ax",%progbits
 725              		.align	1
 726              		.global	get_area
 727              		.syntax unified
 728              		.thumb
 729              		.thumb_func
 730              		.fpu fpv4-sp-d16
 732              	get_area:
 733              	.LVL39:
 734              	.LFB168:
 120:Src/foc.c     ****     return now_theta / 60 + 1;
 735              		.loc 1 120 1 is_stmt 1 view -0
 736              		.cfi_startproc
 737              		@ args = 0, pretend = 0, frame = 0
 738              		@ frame_needed = 0, uses_anonymous_args = 0
 739              		@ link register save eliminated.
 121:Src/foc.c     **** }
 740              		.loc 1 121 5 view .LVU169
 121:Src/foc.c     **** }
 741              		.loc 1 121 22 is_stmt 0 view .LVU170
 742 0000 034B     		ldr	r3, .L37
 743 0002 A3FB0030 		umull	r3, r0, r3, r0
 744              	.LVL40:
 121:Src/foc.c     **** }
 745              		.loc 1 121 22 view .LVU171
 746 0006 4009     		lsrs	r0, r0, #5
 121:Src/foc.c     **** }
 747              		.loc 1 121 27 view .LVU172
 748 0008 0130     		adds	r0, r0, #1
 122:Src/foc.c     **** 
 749              		.loc 1 122 1 view .LVU173
 750 000a C0B2     		uxtb	r0, r0
 751 000c 7047     		bx	lr
 752              	.L38:
 753 000e 00BF     		.align	2
 754              	.L37:
 755 0010 89888888 		.word	-2004318071
 756              		.cfi_endproc
 757              	.LFE168:
 759              		.section	.text.get_area_u,"ax",%progbits
 760              		.align	1
 761              		.global	get_area_u
 762              		.syntax unified
 763              		.thumb
 764              		.thumb_func
 765              		.fpu fpv4-sp-d16
 767              	get_area_u:
 768              	.LVL41:
 769              	.LFB169:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 26


 127:Src/foc.c     ****     switch (area)
 770              		.loc 1 127 1 is_stmt 1 view -0
 771              		.cfi_startproc
 772              		@ args = 0, pretend = 0, frame = 0
 773              		@ frame_needed = 0, uses_anonymous_args = 0
 774              		@ link register save eliminated.
 127:Src/foc.c     ****     switch (area)
 775              		.loc 1 127 1 is_stmt 0 view .LVU175
 776 0000 30B4     		push	{r4, r5}
 777              	.LCFI15:
 778              		.cfi_def_cfa_offset 8
 779              		.cfi_offset 4, -8
 780              		.cfi_offset 5, -4
 781 0002 0D46     		mov	r5, r1
 782 0004 1446     		mov	r4, r2
 128:Src/foc.c     ****     {
 783              		.loc 1 128 5 is_stmt 1 view .LVU176
 784 0006 0138     		subs	r0, r0, #1
 785              	.LVL42:
 128:Src/foc.c     ****     {
 786              		.loc 1 128 5 is_stmt 0 view .LVU177
 787 0008 0528     		cmp	r0, #5
 788 000a 0CD8     		bhi	.L39
 789 000c DFE800F0 		tbb	[pc, r0]
 790              	.L42:
 791 0010 03       		.byte	(.L47-.L42)/2
 792 0011 0D       		.byte	(.L46-.L42)/2
 793 0012 16       		.byte	(.L45-.L42)/2
 794 0013 1F       		.byte	(.L44-.L42)/2
 795 0014 28       		.byte	(.L43-.L42)/2
 796 0015 31       		.byte	(.L41-.L42)/2
 797              		.p2align 1
 798              	.L47:
 131:Src/foc.c     ****         *u2 = U6;
 799              		.loc 1 131 9 is_stmt 1 view .LVU178
 131:Src/foc.c     ****         *u2 = U6;
 800              		.loc 1 131 13 is_stmt 0 view .LVU179
 801 0016 1B4B     		ldr	r3, .L49
 802 0018 0FCB     		ldm	r3, {r0, r1, r2, r3}
 803              	.LVL43:
 131:Src/foc.c     ****         *u2 = U6;
 804              		.loc 1 131 13 view .LVU180
 805 001a 85E80F00 		stm	r5, {r0, r1, r2, r3}
 132:Src/foc.c     ****         break;
 806              		.loc 1 132 9 is_stmt 1 view .LVU181
 132:Src/foc.c     ****         break;
 807              		.loc 1 132 13 is_stmt 0 view .LVU182
 808 001e 1A4B     		ldr	r3, .L49+4
 809 0020 0FCB     		ldm	r3, {r0, r1, r2, r3}
 810 0022 84E80F00 		stm	r4, {r0, r1, r2, r3}
 133:Src/foc.c     ****     case 2:
 811              		.loc 1 133 9 is_stmt 1 view .LVU183
 812              	.L39:
 157:Src/foc.c     **** 
 813              		.loc 1 157 1 is_stmt 0 view .LVU184
 814 0026 30BC     		pop	{r4, r5}
 815              	.LCFI16:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 27


 816              		.cfi_remember_state
 817              		.cfi_restore 5
 818              		.cfi_restore 4
 819              		.cfi_def_cfa_offset 0
 820              	.LVL44:
 157:Src/foc.c     **** 
 821              		.loc 1 157 1 view .LVU185
 822 0028 7047     		bx	lr
 823              	.LVL45:
 824              	.L46:
 825              	.LCFI17:
 826              		.cfi_restore_state
 135:Src/foc.c     ****         *u2 = U2;
 827              		.loc 1 135 9 is_stmt 1 view .LVU186
 135:Src/foc.c     ****         *u2 = U2;
 828              		.loc 1 135 13 is_stmt 0 view .LVU187
 829 002a 174B     		ldr	r3, .L49+4
 830 002c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 831              	.LVL46:
 135:Src/foc.c     ****         *u2 = U2;
 832              		.loc 1 135 13 view .LVU188
 833 002e 85E80F00 		stm	r5, {r0, r1, r2, r3}
 136:Src/foc.c     ****         break;
 834              		.loc 1 136 9 is_stmt 1 view .LVU189
 136:Src/foc.c     ****         break;
 835              		.loc 1 136 13 is_stmt 0 view .LVU190
 836 0032 164B     		ldr	r3, .L49+8
 837 0034 0FCB     		ldm	r3, {r0, r1, r2, r3}
 838 0036 84E80F00 		stm	r4, {r0, r1, r2, r3}
 137:Src/foc.c     ****     case 3:
 839              		.loc 1 137 9 is_stmt 1 view .LVU191
 840 003a F4E7     		b	.L39
 841              	.LVL47:
 842              	.L45:
 139:Src/foc.c     ****         *u2 = U3;
 843              		.loc 1 139 9 view .LVU192
 139:Src/foc.c     ****         *u2 = U3;
 844              		.loc 1 139 13 is_stmt 0 view .LVU193
 845 003c 134B     		ldr	r3, .L49+8
 846 003e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 847              	.LVL48:
 139:Src/foc.c     ****         *u2 = U3;
 848              		.loc 1 139 13 view .LVU194
 849 0040 85E80F00 		stm	r5, {r0, r1, r2, r3}
 140:Src/foc.c     ****         break;
 850              		.loc 1 140 9 is_stmt 1 view .LVU195
 140:Src/foc.c     ****         break;
 851              		.loc 1 140 13 is_stmt 0 view .LVU196
 852 0044 124B     		ldr	r3, .L49+12
 853 0046 0FCB     		ldm	r3, {r0, r1, r2, r3}
 854 0048 84E80F00 		stm	r4, {r0, r1, r2, r3}
 141:Src/foc.c     ****     case 4:
 855              		.loc 1 141 9 is_stmt 1 view .LVU197
 856 004c EBE7     		b	.L39
 857              	.LVL49:
 858              	.L44:
 143:Src/foc.c     ****         *u2 = U1;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 28


 859              		.loc 1 143 9 view .LVU198
 143:Src/foc.c     ****         *u2 = U1;
 860              		.loc 1 143 13 is_stmt 0 view .LVU199
 861 004e 104B     		ldr	r3, .L49+12
 862 0050 0FCB     		ldm	r3, {r0, r1, r2, r3}
 863              	.LVL50:
 143:Src/foc.c     ****         *u2 = U1;
 864              		.loc 1 143 13 view .LVU200
 865 0052 85E80F00 		stm	r5, {r0, r1, r2, r3}
 144:Src/foc.c     ****         break;
 866              		.loc 1 144 9 is_stmt 1 view .LVU201
 144:Src/foc.c     ****         break;
 867              		.loc 1 144 13 is_stmt 0 view .LVU202
 868 0056 0F4B     		ldr	r3, .L49+16
 869 0058 0FCB     		ldm	r3, {r0, r1, r2, r3}
 870 005a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 145:Src/foc.c     ****     case 5:
 871              		.loc 1 145 9 is_stmt 1 view .LVU203
 872 005e E2E7     		b	.L39
 873              	.LVL51:
 874              	.L43:
 147:Src/foc.c     ****         *u2 = U5;
 875              		.loc 1 147 9 view .LVU204
 147:Src/foc.c     ****         *u2 = U5;
 876              		.loc 1 147 13 is_stmt 0 view .LVU205
 877 0060 0C4B     		ldr	r3, .L49+16
 878 0062 0FCB     		ldm	r3, {r0, r1, r2, r3}
 879              	.LVL52:
 147:Src/foc.c     ****         *u2 = U5;
 880              		.loc 1 147 13 view .LVU206
 881 0064 85E80F00 		stm	r5, {r0, r1, r2, r3}
 148:Src/foc.c     ****         break;
 882              		.loc 1 148 9 is_stmt 1 view .LVU207
 148:Src/foc.c     ****         break;
 883              		.loc 1 148 13 is_stmt 0 view .LVU208
 884 0068 0B4B     		ldr	r3, .L49+20
 885 006a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 886 006c 84E80F00 		stm	r4, {r0, r1, r2, r3}
 149:Src/foc.c     ****     case 6:
 887              		.loc 1 149 9 is_stmt 1 view .LVU209
 888 0070 D9E7     		b	.L39
 889              	.LVL53:
 890              	.L41:
 151:Src/foc.c     ****         *u2 = U4;
 891              		.loc 1 151 9 view .LVU210
 151:Src/foc.c     ****         *u2 = U4;
 892              		.loc 1 151 13 is_stmt 0 view .LVU211
 893 0072 094B     		ldr	r3, .L49+20
 894 0074 0FCB     		ldm	r3, {r0, r1, r2, r3}
 895              	.LVL54:
 151:Src/foc.c     ****         *u2 = U4;
 896              		.loc 1 151 13 view .LVU212
 897 0076 85E80F00 		stm	r5, {r0, r1, r2, r3}
 152:Src/foc.c     ****         break;
 898              		.loc 1 152 9 is_stmt 1 view .LVU213
 152:Src/foc.c     ****         break;
 899              		.loc 1 152 13 is_stmt 0 view .LVU214
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 29


 900 007a 024B     		ldr	r3, .L49
 901 007c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 902 007e 84E80F00 		stm	r4, {r0, r1, r2, r3}
 153:Src/foc.c     ****     default:
 903              		.loc 1 153 9 is_stmt 1 view .LVU215
 157:Src/foc.c     **** 
 904              		.loc 1 157 1 is_stmt 0 view .LVU216
 905 0082 D0E7     		b	.L39
 906              	.L50:
 907              		.align	2
 908              	.L49:
 909 0084 00000000 		.word	.LANCHOR5
 910 0088 00000000 		.word	.LANCHOR6
 911 008c 00000000 		.word	.LANCHOR7
 912 0090 00000000 		.word	.LANCHOR0
 913 0094 00000000 		.word	.LANCHOR8
 914 0098 00000000 		.word	.LANCHOR1
 915              		.cfi_endproc
 916              	.LFE169:
 918              		.section	.text.get_t,"ax",%progbits
 919              		.align	1
 920              		.global	get_t
 921              		.syntax unified
 922              		.thumb
 923              		.thumb_func
 924              		.fpu fpv4-sp-d16
 926              	get_t:
 927              	.LVL55:
 928              	.LFB170:
 164:Src/foc.c     ****     /*
 929              		.loc 1 164 1 is_stmt 1 view -0
 930              		.cfi_startproc
 931              		@ args = 0, pretend = 0, frame = 40
 932              		@ frame_needed = 0, uses_anonymous_args = 0
 164:Src/foc.c     ****     /*
 933              		.loc 1 164 1 is_stmt 0 view .LVU218
 934 0000 30B5     		push	{r4, r5, lr}
 935              	.LCFI18:
 936              		.cfi_def_cfa_offset 12
 937              		.cfi_offset 4, -12
 938              		.cfi_offset 5, -8
 939              		.cfi_offset 14, -4
 940 0002 2DED028B 		vpush.64	{d8}
 941              	.LCFI19:
 942              		.cfi_def_cfa_offset 20
 943              		.cfi_offset 80, -20
 944              		.cfi_offset 81, -16
 945 0006 8BB0     		sub	sp, sp, #44
 946              	.LCFI20:
 947              		.cfi_def_cfa_offset 64
 948 0008 B0EE408A 		vmov.f32	s16, s0
 949 000c 0546     		mov	r5, r0
 950 000e 0C46     		mov	r4, r1
 174:Src/foc.c     ****     float theta_f; // Âçï‰Ωç‰∏∫rad
 951              		.loc 1 174 5 is_stmt 1 view .LVU219
 175:Src/foc.c     ****     Uvect_Mos u1, u2;
 952              		.loc 1 175 5 view .LVU220
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 30


 176:Src/foc.c     ****     float x, y;
 953              		.loc 1 176 5 view .LVU221
 177:Src/foc.c     ****     get_area_u(get_area(theta), &u1, &u2);
 954              		.loc 1 177 5 view .LVU222
 178:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 955              		.loc 1 178 5 view .LVU223
 956 0010 FCEEC07A 		vcvt.u32.f32	s15, s0
 957 0014 17EE900A 		vmov	r0, s15	@ int
 958              	.LVL56:
 178:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 959              		.loc 1 178 5 is_stmt 0 view .LVU224
 960 0018 FFF7FEFF 		bl	get_area
 961              	.LVL57:
 178:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 962              		.loc 1 178 5 view .LVU225
 963 001c 02AA     		add	r2, sp, #8
 964 001e 06A9     		add	r1, sp, #24
 965 0020 FFF7FEFF 		bl	get_area_u
 966              	.LVL58:
 180:Src/foc.c     ****     x *= 0.86f;
 967              		.loc 1 180 5 is_stmt 1 view .LVU226
 968 0024 01A9     		add	r1, sp, #4
 969 0026 6846     		mov	r0, sp
 970 0028 B0EE480A 		vmov.f32	s0, s16
 971 002c FFF7FEFF 		bl	arm_sin_cos_f32
 972              	.LVL59:
 181:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 973              		.loc 1 181 5 view .LVU227
 181:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 974              		.loc 1 181 7 is_stmt 0 view .LVU228
 975 0030 DFED197A 		vldr.32	s15, .L53
 976 0034 9DED017A 		vldr.32	s14, [sp, #4]
 977 0038 27EE277A 		vmul.f32	s14, s14, s15
 182:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 978              		.loc 1 182 5 is_stmt 1 view .LVU229
 182:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 979              		.loc 1 182 7 is_stmt 0 view .LVU230
 980 003c DDED006A 		vldr.32	s13, [sp]
 981 0040 66EEA76A 		vmul.f32	s13, s13, s15
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 982              		.loc 1 185 5 is_stmt 1 view .LVU231
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 983              		.loc 1 185 17 is_stmt 0 view .LVU232
 984 0044 DDED057A 		vldr.32	s15, [sp, #20]
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 985              		.loc 1 185 20 view .LVU233
 986 0048 27EE274A 		vmul.f32	s8, s14, s15
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 987              		.loc 1 185 29 view .LVU234
 988 004c DDED084A 		vldr.32	s9, [sp, #32]
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 989              		.loc 1 185 32 view .LVU235
 990 0050 67EEA47A 		vmul.f32	s15, s15, s9
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 991              		.loc 1 185 43 view .LVU236
 992 0054 9DED046A 		vldr.32	s12, [sp, #16]
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 31


 993              		.loc 1 185 50 view .LVU237
 994 0058 9DED095A 		vldr.32	s10, [sp, #36]
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 995              		.loc 1 185 46 view .LVU238
 996 005c 66EE055A 		vmul.f32	s11, s12, s10
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 997              		.loc 1 185 39 view .LVU239
 998 0060 77EEE57A 		vsub.f32	s15, s15, s11
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 999              		.loc 1 185 24 view .LVU240
 1000 0064 C4EE275A 		vdiv.f32	s11, s8, s15
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 1001              		.loc 1 185 62 view .LVU241
 1002 0068 26EE866A 		vmul.f32	s12, s13, s12
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 1003              		.loc 1 185 67 view .LVU242
 1004 006c 86EE274A 		vdiv.f32	s8, s12, s15
 185:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 1005              		.loc 1 185 13 view .LVU243
 1006 0070 75EEC45A 		vsub.f32	s11, s11, s8
 1007              	.LVL60:
 186:Src/foc.c     **** 
 1008              		.loc 1 186 5 is_stmt 1 view .LVU244
 186:Src/foc.c     **** 
 1009              		.loc 1 186 20 is_stmt 0 view .LVU245
 1010 0074 66EEA46A 		vmul.f32	s13, s13, s9
 186:Src/foc.c     **** 
 1011              		.loc 1 186 24 view .LVU246
 1012 0078 86EEA76A 		vdiv.f32	s12, s13, s15
 186:Src/foc.c     **** 
 1013              		.loc 1 186 62 view .LVU247
 1014 007c 27EE057A 		vmul.f32	s14, s14, s10
 186:Src/foc.c     **** 
 1015              		.loc 1 186 67 view .LVU248
 1016 0080 C7EE276A 		vdiv.f32	s13, s14, s15
 186:Src/foc.c     **** 
 1017              		.loc 1 186 13 view .LVU249
 1018 0084 76EE667A 		vsub.f32	s15, s12, s13
 1019              	.LVL61:
 188:Src/foc.c     ****     *t2 = temp_t2;
 1020              		.loc 1 188 5 is_stmt 1 view .LVU250
 188:Src/foc.c     ****     *t2 = temp_t2;
 1021              		.loc 1 188 9 is_stmt 0 view .LVU251
 1022 0088 C5ED005A 		vstr.32	s11, [r5]
 189:Src/foc.c     **** }
 1023              		.loc 1 189 5 is_stmt 1 view .LVU252
 189:Src/foc.c     **** }
 1024              		.loc 1 189 9 is_stmt 0 view .LVU253
 1025 008c C4ED007A 		vstr.32	s15, [r4]
 190:Src/foc.c     **** 
 1026              		.loc 1 190 1 view .LVU254
 1027 0090 0BB0     		add	sp, sp, #44
 1028              	.LCFI21:
 1029              		.cfi_def_cfa_offset 20
 1030              		@ sp needed
 1031 0092 BDEC028B 		vldm	sp!, {d8}
 1032              	.LCFI22:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 32


 1033              		.cfi_restore 80
 1034              		.cfi_restore 81
 1035              		.cfi_def_cfa_offset 12
 1036              	.LVL62:
 190:Src/foc.c     **** 
 1037              		.loc 1 190 1 view .LVU255
 1038 0096 30BD     		pop	{r4, r5, pc}
 1039              	.LVL63:
 1040              	.L54:
 190:Src/foc.c     **** 
 1041              		.loc 1 190 1 view .LVU256
 1042              		.align	2
 1043              	.L53:
 1044 0098 F6285C3F 		.word	1063004406
 1045              		.cfi_endproc
 1046              	.LFE170:
 1048              		.section	.text.get_ccr_duty,"ax",%progbits
 1049              		.align	1
 1050              		.global	get_ccr_duty
 1051              		.syntax unified
 1052              		.thumb
 1053              		.thumb_func
 1054              		.fpu fpv4-sp-d16
 1056              	get_ccr_duty:
 1057              	.LVL64:
 1058              	.LFB171:
 193:Src/foc.c     ****     float t0, t3;
 1059              		.loc 1 193 1 is_stmt 1 view -0
 1060              		.cfi_startproc
 1061              		@ args = 16, pretend = 0, frame = 56
 1062              		@ frame_needed = 0, uses_anonymous_args = 0
 1063              		@ link register save eliminated.
 193:Src/foc.c     ****     float t0, t3;
 1064              		.loc 1 193 1 is_stmt 0 view .LVU258
 1065 0000 10B4     		push	{r4}
 1066              	.LCFI23:
 1067              		.cfi_def_cfa_offset 4
 1068              		.cfi_offset 4, -4
 1069 0002 8FB0     		sub	sp, sp, #60
 1070              	.LCFI24:
 1071              		.cfi_def_cfa_offset 64
 1072 0004 04AC     		add	r4, sp, #16
 1073 0006 84E80F00 		stm	r4, {r0, r1, r2, r3}
 194:Src/foc.c     ****     CCR_Duty result;
 1074              		.loc 1 194 5 is_stmt 1 view .LVU259
 195:Src/foc.c     ****     t0 = (1 - t1 - t2) / 2;
 1075              		.loc 1 195 5 view .LVU260
 196:Src/foc.c     ****     t3 = t0;
 1076              		.loc 1 196 5 view .LVU261
 196:Src/foc.c     ****     t3 = t0;
 1077              		.loc 1 196 13 is_stmt 0 view .LVU262
 1078 000a F7EE007A 		vmov.f32	s15, #1.0e+0
 1079 000e 77EEC07A 		vsub.f32	s15, s15, s0
 196:Src/foc.c     ****     t3 = t0;
 1080              		.loc 1 196 18 view .LVU263
 1081 0012 77EEE07A 		vsub.f32	s15, s15, s1
 196:Src/foc.c     ****     t3 = t0;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 33


 1082              		.loc 1 196 8 view .LVU264
 1083 0016 B6EE007A 		vmov.f32	s14, #5.0e-1
 1084 001a 27EE877A 		vmul.f32	s14, s15, s14
 1085              	.LVL65:
 197:Src/foc.c     **** 
 1086              		.loc 1 197 5 is_stmt 1 view .LVU265
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1087              		.loc 1 199 5 view .LVU266
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1088              		.loc 1 199 21 is_stmt 0 view .LVU267
 1089 001e 344B     		ldr	r3, .L57
 1090 0020 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1091 0022 07EE902A 		vmov	s15, r2	@ int
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1092              		.loc 1 199 24 view .LVU268
 1093 0026 F8EEE77A 		vcvt.f32.s32	s15, s15
 1094 002a 67EE877A 		vmul.f32	s15, s15, s14
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1095              		.loc 1 199 33 view .LVU269
 1096 002e 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 1097 0032 06EE902A 		vmov	s13, r2	@ int
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1098              		.loc 1 199 36 view .LVU270
 1099 0036 F8EEE66A 		vcvt.f32.s32	s13, s13
 1100 003a 66EE806A 		vmul.f32	s13, s13, s0
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1101              		.loc 1 199 29 view .LVU271
 1102 003e 77EEA67A 		vadd.f32	s15, s15, s13
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1103              		.loc 1 199 45 view .LVU272
 1104 0042 9DF84020 		ldrb	r2, [sp, #64]	@ zero_extendqisi2
 1105 0046 06EE902A 		vmov	s13, r2	@ int
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1106              		.loc 1 199 48 view .LVU273
 1107 004a F8EEE66A 		vcvt.f32.s32	s13, s13
 1108 004e 66EEA06A 		vmul.f32	s13, s13, s1
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1109              		.loc 1 199 41 view .LVU274
 1110 0052 77EEA67A 		vadd.f32	s15, s15, s13
 199:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 1111              		.loc 1 199 17 view .LVU275
 1112 0056 CDED087A 		vstr.32	s15, [sp, #32]
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1113              		.loc 1 200 5 is_stmt 1 view .LVU276
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1114              		.loc 1 200 21 is_stmt 0 view .LVU277
 1115 005a 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1116 005c 07EE902A 		vmov	s15, r2	@ int
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1117              		.loc 1 200 24 view .LVU278
 1118 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 1119 0064 67EE877A 		vmul.f32	s15, s15, s14
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1120              		.loc 1 200 33 view .LVU279
 1121 0068 9DF81120 		ldrb	r2, [sp, #17]	@ zero_extendqisi2
 1122 006c 06EE902A 		vmov	s13, r2	@ int
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 34


 1123              		.loc 1 200 36 view .LVU280
 1124 0070 F8EEE66A 		vcvt.f32.s32	s13, s13
 1125 0074 66EE806A 		vmul.f32	s13, s13, s0
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1126              		.loc 1 200 29 view .LVU281
 1127 0078 77EEA67A 		vadd.f32	s15, s15, s13
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1128              		.loc 1 200 45 view .LVU282
 1129 007c 9DF84120 		ldrb	r2, [sp, #65]	@ zero_extendqisi2
 1130 0080 06EE902A 		vmov	s13, r2	@ int
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1131              		.loc 1 200 48 view .LVU283
 1132 0084 F8EEE66A 		vcvt.f32.s32	s13, s13
 1133 0088 66EEA06A 		vmul.f32	s13, s13, s1
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1134              		.loc 1 200 41 view .LVU284
 1135 008c 77EEA67A 		vadd.f32	s15, s15, s13
 200:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 1136              		.loc 1 200 17 view .LVU285
 1137 0090 CDED097A 		vstr.32	s15, [sp, #36]
 201:Src/foc.c     **** 
 1138              		.loc 1 201 5 is_stmt 1 view .LVU286
 201:Src/foc.c     **** 
 1139              		.loc 1 201 21 is_stmt 0 view .LVU287
 1140 0094 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1141 0096 07EE903A 		vmov	s15, r3	@ int
 201:Src/foc.c     **** 
 1142              		.loc 1 201 24 view .LVU288
 1143 009a F8EEE77A 		vcvt.f32.s32	s15, s15
 1144 009e 67EE877A 		vmul.f32	s15, s15, s14
 201:Src/foc.c     **** 
 1145              		.loc 1 201 33 view .LVU289
 1146 00a2 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 1147 00a6 07EE103A 		vmov	s14, r3	@ int
 1148              	.LVL66:
 201:Src/foc.c     **** 
 1149              		.loc 1 201 36 view .LVU290
 1150 00aa B8EEC77A 		vcvt.f32.s32	s14, s14
 1151 00ae 27EE000A 		vmul.f32	s0, s14, s0
 1152              	.LVL67:
 201:Src/foc.c     **** 
 1153              		.loc 1 201 29 view .LVU291
 1154 00b2 37EE800A 		vadd.f32	s0, s15, s0
 201:Src/foc.c     **** 
 1155              		.loc 1 201 45 view .LVU292
 1156 00b6 9DF84230 		ldrb	r3, [sp, #66]	@ zero_extendqisi2
 1157 00ba 07EE903A 		vmov	s15, r3	@ int
 201:Src/foc.c     **** 
 1158              		.loc 1 201 48 view .LVU293
 1159 00be F8EEE77A 		vcvt.f32.s32	s15, s15
 1160 00c2 67EEA00A 		vmul.f32	s1, s15, s1
 1161              	.LVL68:
 201:Src/foc.c     **** 
 1162              		.loc 1 201 41 view .LVU294
 1163 00c6 70EE200A 		vadd.f32	s1, s0, s1
 201:Src/foc.c     **** 
 1164              		.loc 1 201 17 view .LVU295
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 35


 1165 00ca CDED0A0A 		vstr.32	s1, [sp, #40]
 203:Src/foc.c     **** }
 1166              		.loc 1 203 5 is_stmt 1 view .LVU296
 203:Src/foc.c     **** }
 1167              		.loc 1 203 12 is_stmt 0 view .LVU297
 1168 00ce 08AB     		add	r3, sp, #32
 1169 00d0 93E80700 		ldm	r3, {r0, r1, r2}
 1170 00d4 0EAB     		add	r3, sp, #56
 1171 00d6 03E90700 		stmdb	r3, {r0, r1, r2}
 204:Src/foc.c     **** 
 1172              		.loc 1 204 1 view .LVU298
 1173 00da 9DED0B0A 		vldr.32	s0, [sp, #44]
 1174 00de DDED0C0A 		vldr.32	s1, [sp, #48]
 1175 00e2 9DED0D1A 		vldr.32	s2, [sp, #52]
 1176 00e6 0FB0     		add	sp, sp, #60
 1177              	.LCFI25:
 1178              		.cfi_def_cfa_offset 4
 1179              		@ sp needed
 1180 00e8 5DF8044B 		ldr	r4, [sp], #4
 1181              	.LCFI26:
 1182              		.cfi_restore 4
 1183              		.cfi_def_cfa_offset 0
 1184 00ec 7047     		bx	lr
 1185              	.L58:
 1186 00ee 00BF     		.align	2
 1187              	.L57:
 1188 00f0 00000000 		.word	.LANCHOR9
 1189              		.cfi_endproc
 1190              	.LFE171:
 1192              		.section	.rodata.Set_to_U4.str1.4,"aMS",%progbits,1
 1193              		.align	2
 1194              	.LC3:
 1195 0000 706F7369 		.ascii	"position:%f \015\012\000"
 1195      74696F6E 
 1195      3A256620 
 1195      0D0A00
 1196              		.section	.text.Set_to_U4,"ax",%progbits
 1197              		.align	1
 1198              		.global	Set_to_U4
 1199              		.syntax unified
 1200              		.thumb
 1201              		.thumb_func
 1202              		.fpu fpv4-sp-d16
 1204              	Set_to_U4:
 1205              	.LVL69:
 1206              	.LFB173:
 217:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1207              		.loc 1 217 1 is_stmt 1 view -0
 1208              		.cfi_startproc
 1209              		@ args = 0, pretend = 0, frame = 16
 1210              		@ frame_needed = 0, uses_anonymous_args = 0
 217:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1211              		.loc 1 217 1 is_stmt 0 view .LVU300
 1212 0000 10B5     		push	{r4, lr}
 1213              	.LCFI27:
 1214              		.cfi_def_cfa_offset 8
 1215              		.cfi_offset 4, -8
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 36


 1216              		.cfi_offset 14, -4
 1217 0002 84B0     		sub	sp, sp, #16
 1218              	.LCFI28:
 1219              		.cfi_def_cfa_offset 24
 1220 0004 0446     		mov	r4, r0
 218:Src/foc.c     ****     temp_duty.ccra = U4.a;
 1221              		.loc 1 218 5 is_stmt 1 view .LVU301
 219:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 1222              		.loc 1 219 5 view .LVU302
 219:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 1223              		.loc 1 219 24 is_stmt 0 view .LVU303
 1224 0006 194B     		ldr	r3, .L61
 1225 0008 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1226 000a 00EE102A 		vmov	s0, r2	@ int
 220:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 1227              		.loc 1 220 5 is_stmt 1 view .LVU304
 220:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 1228              		.loc 1 220 24 is_stmt 0 view .LVU305
 1229 000e 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1230 0010 00EE902A 		vmov	s1, r2	@ int
 221:Src/foc.c     ****     SVPWM_Step(temp_duty);
 1231              		.loc 1 221 5 is_stmt 1 view .LVU306
 221:Src/foc.c     ****     SVPWM_Step(temp_duty);
 1232              		.loc 1 221 24 is_stmt 0 view .LVU307
 1233 0014 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1234 0016 01EE103A 		vmov	s2, r3	@ int
 222:Src/foc.c     ****     HAL_Delay(t);
 1235              		.loc 1 222 5 is_stmt 1 view .LVU308
 1236 001a B8EE400A 		vcvt.f32.u32	s0, s0
 1237 001e F8EE600A 		vcvt.f32.u32	s1, s1
 1238 0022 B8EE411A 		vcvt.f32.u32	s2, s2
 1239 0026 FFF7FEFF 		bl	SVPWM_Step
 1240              	.LVL70:
 223:Src/foc.c     ****     temp_duty.ccra = U0.a;
 1241              		.loc 1 223 5 view .LVU309
 1242 002a 2046     		mov	r0, r4
 1243 002c FFF7FEFF 		bl	HAL_Delay
 1244              	.LVL71:
 224:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 1245              		.loc 1 224 5 view .LVU310
 224:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 1246              		.loc 1 224 24 is_stmt 0 view .LVU311
 1247 0030 0F4B     		ldr	r3, .L61+4
 1248 0032 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1249 0034 00EE102A 		vmov	s0, r2	@ int
 225:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 1250              		.loc 1 225 5 is_stmt 1 view .LVU312
 225:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 1251              		.loc 1 225 24 is_stmt 0 view .LVU313
 1252 0038 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1253 003a 00EE902A 		vmov	s1, r2	@ int
 226:Src/foc.c     ****     SVPWM_Step(temp_duty);
 1254              		.loc 1 226 5 is_stmt 1 view .LVU314
 226:Src/foc.c     ****     SVPWM_Step(temp_duty);
 1255              		.loc 1 226 24 is_stmt 0 view .LVU315
 1256 003e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1257 0040 01EE103A 		vmov	s2, r3	@ int
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 37


 227:Src/foc.c     ****     uprintf("position:%f \r\n", Position_Degree);
 1258              		.loc 1 227 5 is_stmt 1 view .LVU316
 1259 0044 B8EE400A 		vcvt.f32.u32	s0, s0
 1260 0048 F8EE600A 		vcvt.f32.u32	s1, s1
 1261 004c B8EE411A 		vcvt.f32.u32	s2, s2
 1262 0050 FFF7FEFF 		bl	SVPWM_Step
 1263              	.LVL72:
 228:Src/foc.c     **** }
 1264              		.loc 1 228 5 view .LVU317
 1265 0054 074B     		ldr	r3, .L61+8
 1266 0056 1868     		ldr	r0, [r3]	@ float
 1267 0058 FFF7FEFF 		bl	__aeabi_f2d
 1268              	.LVL73:
 1269 005c 0246     		mov	r2, r0
 1270 005e 0B46     		mov	r3, r1
 1271 0060 0548     		ldr	r0, .L61+12
 1272 0062 FFF7FEFF 		bl	uprintf
 1273              	.LVL74:
 229:Src/foc.c     **** 
 1274              		.loc 1 229 1 is_stmt 0 view .LVU318
 1275 0066 04B0     		add	sp, sp, #16
 1276              	.LCFI29:
 1277              		.cfi_def_cfa_offset 8
 1278              		@ sp needed
 1279 0068 10BD     		pop	{r4, pc}
 1280              	.L62:
 1281 006a 00BF     		.align	2
 1282              	.L61:
 1283 006c 00000000 		.word	.LANCHOR5
 1284 0070 00000000 		.word	.LANCHOR10
 1285 0074 00000000 		.word	Position_Degree
 1286 0078 00000000 		.word	.LC3
 1287              		.cfi_endproc
 1288              	.LFE173:
 1290              		.section	.text.SVPWM_Normal_CalT1T2,"ax",%progbits
 1291              		.align	1
 1292              		.global	SVPWM_Normal_CalT1T2
 1293              		.syntax unified
 1294              		.thumb
 1295              		.thumb_func
 1296              		.fpu fpv4-sp-d16
 1298              	SVPWM_Normal_CalT1T2:
 1299              	.LVL75:
 1300              	.LFB175:
 249:Src/foc.c     ****     float temp = 0;
 1301              		.loc 1 249 1 is_stmt 1 view -0
 1302              		.cfi_startproc
 1303              		@ args = 0, pretend = 0, frame = 0
 1304              		@ frame_needed = 0, uses_anonymous_args = 0
 1305              		@ link register save eliminated.
 250:Src/foc.c     ****     switch (area)
 1306              		.loc 1 250 5 view .LVU320
 251:Src/foc.c     ****     {
 1307              		.loc 1 251 5 view .LVU321
 1308 0000 0138     		subs	r0, r0, #1
 1309              	.LVL76:
 251:Src/foc.c     ****     {
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 38


 1310              		.loc 1 251 5 is_stmt 0 view .LVU322
 1311 0002 0528     		cmp	r0, #5
 1312 0004 5BD8     		bhi	.L63
 1313 0006 DFE800F0 		tbb	[pc, r0]
 1314              	.L66:
 1315 000a 03       		.byte	(.L71-.L66)/2
 1316 000b 12       		.byte	(.L70-.L66)/2
 1317 000c 1F       		.byte	(.L69-.L66)/2
 1318 000d 30       		.byte	(.L68-.L66)/2
 1319 000e 3F       		.byte	(.L67-.L66)/2
 1320 000f 4C       		.byte	(.L65-.L66)/2
 1321              		.p2align 1
 1322              	.L71:
 254:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1323              		.loc 1 254 9 is_stmt 1 view .LVU323
 254:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1324              		.loc 1 254 32 is_stmt 0 view .LVU324
 1325 0010 DFED2B7A 		vldr.32	s15, .L72
 1326 0014 60EEA77A 		vmul.f32	s15, s1, s15
 254:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1327              		.loc 1 254 21 view .LVU325
 1328 0018 30EE670A 		vsub.f32	s0, s0, s15
 1329              	.LVL77:
 254:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1330              		.loc 1 254 13 view .LVU326
 1331 001c 81ED000A 		vstr.32	s0, [r1]
 255:Src/foc.c     ****         break;
 1332              		.loc 1 255 9 is_stmt 1 view .LVU327
 255:Src/foc.c     ****         break;
 1333              		.loc 1 255 23 is_stmt 0 view .LVU328
 1334 0020 DFED287A 		vldr.32	s15, .L72+4
 1335 0024 60EEA70A 		vmul.f32	s1, s1, s15
 1336              	.LVL78:
 255:Src/foc.c     ****         break;
 1337              		.loc 1 255 13 view .LVU329
 1338 0028 C2ED000A 		vstr.32	s1, [r2]
 256:Src/foc.c     ****     case 2:
 1339              		.loc 1 256 9 is_stmt 1 view .LVU330
 1340 002c 7047     		bx	lr
 1341              	.LVL79:
 1342              	.L70:
 258:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1343              		.loc 1 258 9 view .LVU331
 258:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1344              		.loc 1 258 32 is_stmt 0 view .LVU332
 1345 002e DFED247A 		vldr.32	s15, .L72
 1346 0032 60EEA70A 		vmul.f32	s1, s1, s15
 1347              	.LVL80:
 258:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1348              		.loc 1 258 21 view .LVU333
 1349 0036 70EE807A 		vadd.f32	s15, s1, s0
 258:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1350              		.loc 1 258 13 view .LVU334
 1351 003a C1ED007A 		vstr.32	s15, [r1]
 259:Src/foc.c     ****         break;
 1352              		.loc 1 259 9 is_stmt 1 view .LVU335
 259:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 39


 1353              		.loc 1 259 31 is_stmt 0 view .LVU336
 1354 003e 70EEC00A 		vsub.f32	s1, s1, s0
 259:Src/foc.c     ****         break;
 1355              		.loc 1 259 13 view .LVU337
 1356 0042 C2ED000A 		vstr.32	s1, [r2]
 260:Src/foc.c     ****     case 3:
 1357              		.loc 1 260 9 is_stmt 1 view .LVU338
 1358 0046 7047     		bx	lr
 1359              	.LVL81:
 1360              	.L69:
 262:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1361              		.loc 1 262 9 view .LVU339
 262:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1362              		.loc 1 262 23 is_stmt 0 view .LVU340
 1363 0048 DFED1E7A 		vldr.32	s15, .L72+4
 1364 004c 60EEA77A 		vmul.f32	s15, s1, s15
 262:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1365              		.loc 1 262 13 view .LVU341
 1366 0050 C1ED007A 		vstr.32	s15, [r1]
 263:Src/foc.c     ****         break;
 1367              		.loc 1 263 9 is_stmt 1 view .LVU342
 263:Src/foc.c     ****         break;
 1368              		.loc 1 263 15 is_stmt 0 view .LVU343
 1369 0054 B1EE400A 		vneg.f32	s0, s0
 1370              	.LVL82:
 263:Src/foc.c     ****         break;
 1371              		.loc 1 263 33 view .LVU344
 1372 0058 DFED197A 		vldr.32	s15, .L72
 1373 005c 60EEA70A 		vmul.f32	s1, s1, s15
 1374              	.LVL83:
 263:Src/foc.c     ****         break;
 1375              		.loc 1 263 22 view .LVU345
 1376 0060 70EE600A 		vsub.f32	s1, s0, s1
 263:Src/foc.c     ****         break;
 1377              		.loc 1 263 13 view .LVU346
 1378 0064 C2ED000A 		vstr.32	s1, [r2]
 264:Src/foc.c     ****     case 4:
 1379              		.loc 1 264 9 is_stmt 1 view .LVU347
 1380 0068 7047     		bx	lr
 1381              	.LVL84:
 1382              	.L68:
 266:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1383              		.loc 1 266 9 view .LVU348
 266:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1384              		.loc 1 266 24 is_stmt 0 view .LVU349
 1385 006a DFED157A 		vldr.32	s15, .L72
 1386 006e 60EEA77A 		vmul.f32	s15, s1, s15
 266:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1387              		.loc 1 266 31 view .LVU350
 1388 0072 37EEC00A 		vsub.f32	s0, s15, s0
 1389              	.LVL85:
 266:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1390              		.loc 1 266 13 view .LVU351
 1391 0076 81ED000A 		vstr.32	s0, [r1]
 267:Src/foc.c     ****         break;
 1392              		.loc 1 267 9 is_stmt 1 view .LVU352
 267:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 40


 1393              		.loc 1 267 24 is_stmt 0 view .LVU353
 1394 007a DFED137A 		vldr.32	s15, .L72+8
 1395 007e 60EEA70A 		vmul.f32	s1, s1, s15
 1396              	.LVL86:
 267:Src/foc.c     ****         break;
 1397              		.loc 1 267 13 view .LVU354
 1398 0082 C2ED000A 		vstr.32	s1, [r2]
 268:Src/foc.c     ****     case 5:
 1399              		.loc 1 268 9 is_stmt 1 view .LVU355
 1400 0086 7047     		bx	lr
 1401              	.LVL87:
 1402              	.L67:
 270:Src/foc.c     ****         *t1 = temp - alpha;
 1403              		.loc 1 270 9 view .LVU356
 270:Src/foc.c     ****         *t1 = temp - alpha;
 1404              		.loc 1 270 14 is_stmt 0 view .LVU357
 1405 0088 DFED107A 		vldr.32	s15, .L72+12
 1406 008c 60EEA70A 		vmul.f32	s1, s1, s15
 1407              	.LVL88:
 271:Src/foc.c     ****         *t2 = temp + alpha;
 1408              		.loc 1 271 9 is_stmt 1 view .LVU358
 271:Src/foc.c     ****         *t2 = temp + alpha;
 1409              		.loc 1 271 20 is_stmt 0 view .LVU359
 1410 0090 70EEC07A 		vsub.f32	s15, s1, s0
 271:Src/foc.c     ****         *t2 = temp + alpha;
 1411              		.loc 1 271 13 view .LVU360
 1412 0094 C1ED007A 		vstr.32	s15, [r1]
 272:Src/foc.c     ****         break;
 1413              		.loc 1 272 9 is_stmt 1 view .LVU361
 272:Src/foc.c     ****         break;
 1414              		.loc 1 272 20 is_stmt 0 view .LVU362
 1415 0098 70EE200A 		vadd.f32	s1, s0, s1
 1416              	.LVL89:
 272:Src/foc.c     ****         break;
 1417              		.loc 1 272 13 view .LVU363
 1418 009c C2ED000A 		vstr.32	s1, [r2]
 273:Src/foc.c     ****     case 6:
 1419              		.loc 1 273 9 is_stmt 1 view .LVU364
 1420 00a0 7047     		bx	lr
 1421              	.LVL90:
 1422              	.L65:
 275:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1423              		.loc 1 275 9 view .LVU365
 275:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1424              		.loc 1 275 24 is_stmt 0 view .LVU366
 1425 00a2 DFED097A 		vldr.32	s15, .L72+8
 1426 00a6 60EEA77A 		vmul.f32	s15, s1, s15
 275:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1427              		.loc 1 275 13 view .LVU367
 1428 00aa C1ED007A 		vstr.32	s15, [r1]
 276:Src/foc.c     ****         break;
 1429              		.loc 1 276 9 is_stmt 1 view .LVU368
 276:Src/foc.c     ****         break;
 1430              		.loc 1 276 32 is_stmt 0 view .LVU369
 1431 00ae DFED047A 		vldr.32	s15, .L72
 1432 00b2 60EEA77A 		vmul.f32	s15, s1, s15
 276:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 41


 1433              		.loc 1 276 21 view .LVU370
 1434 00b6 77EE800A 		vadd.f32	s1, s15, s0
 1435              	.LVL91:
 276:Src/foc.c     ****         break;
 1436              		.loc 1 276 13 view .LVU371
 1437 00ba C2ED000A 		vstr.32	s1, [r2]
 277:Src/foc.c     ****     }
 1438              		.loc 1 277 9 is_stmt 1 view .LVU372
 1439              	.L63:
 279:Src/foc.c     **** 
 1440              		.loc 1 279 1 is_stmt 0 view .LVU373
 1441 00be 7047     		bx	lr
 1442              	.L73:
 1443              		.align	2
 1444              	.L72:
 1445 00c0 36CD133F 		.word	1058262326
 1446 00c4 36CD933F 		.word	1066650934
 1447 00c8 36CD93BF 		.word	-1080832714
 1448 00cc 36CD13BF 		.word	-1089221322
 1449              		.cfi_endproc
 1450              	.LFE175:
 1452              		.section	.text.SVPWM,"ax",%progbits
 1453              		.align	1
 1454              		.syntax unified
 1455              		.thumb
 1456              		.thumb_func
 1457              		.fpu fpv4-sp-d16
 1459              	SVPWM:
 1460              	.LVL92:
 1461              	.LFB180:
 367:Src/foc.c     ****     Uvect_Mos u1, u2;
 1462              		.loc 1 367 1 is_stmt 1 view -0
 1463              		.cfi_startproc
 1464              		@ args = 0, pretend = 0, frame = 48
 1465              		@ frame_needed = 0, uses_anonymous_args = 0
 367:Src/foc.c     ****     Uvect_Mos u1, u2;
 1466              		.loc 1 367 1 is_stmt 0 view .LVU375
 1467 0000 70B5     		push	{r4, r5, r6, lr}
 1468              	.LCFI30:
 1469              		.cfi_def_cfa_offset 16
 1470              		.cfi_offset 4, -16
 1471              		.cfi_offset 5, -12
 1472              		.cfi_offset 6, -8
 1473              		.cfi_offset 14, -4
 1474 0002 2DED028B 		vpush.64	{d8}
 1475              	.LCFI31:
 1476              		.cfi_def_cfa_offset 24
 1477              		.cfi_offset 80, -24
 1478              		.cfi_offset 81, -20
 1479 0006 90B0     		sub	sp, sp, #64
 1480              	.LCFI32:
 1481              		.cfi_def_cfa_offset 88
 1482 0008 F0EE408A 		vmov.f32	s17, s0
 1483 000c B0EE608A 		vmov.f32	s16, s1
 368:Src/foc.c     ****     float x, y;
 1484              		.loc 1 368 5 is_stmt 1 view .LVU376
 369:Src/foc.c     ****     float t1, t2;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 42


 1485              		.loc 1 369 5 view .LVU377
 370:Src/foc.c     ****     static CCR_Duty CCR_Dutys = {0};
 1486              		.loc 1 370 5 view .LVU378
 371:Src/foc.c     **** 
 1487              		.loc 1 371 5 view .LVU379
 373:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1488              		.loc 1 373 5 view .LVU380
 373:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1489              		.loc 1 373 20 is_stmt 0 view .LVU381
 1490 0010 FCEEC07A 		vcvt.u32.f32	s15, s0
 1491 0014 17EE900A 		vmov	r0, s15	@ int
 1492 0018 FFF7FEFF 		bl	get_area
 1493              	.LVL93:
 373:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1494              		.loc 1 373 20 view .LVU382
 1495 001c 0646     		mov	r6, r0
 1496              	.LVL94:
 374:Src/foc.c     ****     arm_sin_cos_f32(Target_U, &y, &x);
 1497              		.loc 1 374 5 is_stmt 1 view .LVU383
 1498 001e 08AD     		add	r5, sp, #32
 1499 0020 0CAC     		add	r4, sp, #48
 1500 0022 2A46     		mov	r2, r5
 1501 0024 2146     		mov	r1, r4
 1502 0026 FFF7FEFF 		bl	get_area_u
 1503              	.LVL95:
 375:Src/foc.c     ****     x *= 0.86f * duty;
 1504              		.loc 1 375 5 view .LVU384
 1505 002a 07A9     		add	r1, sp, #28
 1506 002c 06A8     		add	r0, sp, #24
 1507 002e B0EE680A 		vmov.f32	s0, s17
 1508 0032 FFF7FEFF 		bl	arm_sin_cos_f32
 1509              	.LVL96:
 376:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1510              		.loc 1 376 5 view .LVU385
 376:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1511              		.loc 1 376 16 is_stmt 0 view .LVU386
 1512 0036 DFED170A 		vldr.32	s1, .L76
 1513 003a 68EE200A 		vmul.f32	s1, s16, s1
 376:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1514              		.loc 1 376 7 view .LVU387
 1515 003e 9DED070A 		vldr.32	s0, [sp, #28]
 1516 0042 20EE800A 		vmul.f32	s0, s1, s0
 1517 0046 8DED070A 		vstr.32	s0, [sp, #28]
 377:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 1518              		.loc 1 377 5 is_stmt 1 view .LVU388
 377:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 1519              		.loc 1 377 7 is_stmt 0 view .LVU389
 1520 004a DDED067A 		vldr.32	s15, [sp, #24]
 1521 004e 60EEA70A 		vmul.f32	s1, s1, s15
 1522 0052 CDED060A 		vstr.32	s1, [sp, #24]
 378:Src/foc.c     ****     CCR_Dutys = get_ccr_duty(t1, t2, u1, u2);
 1523              		.loc 1 378 5 is_stmt 1 view .LVU390
 1524 0056 04AA     		add	r2, sp, #16
 1525 0058 05A9     		add	r1, sp, #20
 1526 005a 3046     		mov	r0, r6
 1527 005c FFF7FEFF 		bl	SVPWM_Normal_CalT1T2
 1528              	.LVL97:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 43


 379:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 1529              		.loc 1 379 5 view .LVU391
 379:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 1530              		.loc 1 379 17 is_stmt 0 view .LVU392
 1531 0060 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1532 0064 8DE80F00 		stm	sp, {r0, r1, r2, r3}
 1533 0068 94E80F00 		ldm	r4, {r0, r1, r2, r3}
 1534 006c DDED040A 		vldr.32	s1, [sp, #16]
 1535 0070 9DED050A 		vldr.32	s0, [sp, #20]
 1536 0074 FFF7FEFF 		bl	get_ccr_duty
 1537              	.LVL98:
 1538 0078 074B     		ldr	r3, .L76+4
 1539 007a 83ED000A 		vstr.32	s0, [r3]
 1540 007e C3ED010A 		vstr.32	s1, [r3, #4]
 1541 0082 83ED021A 		vstr.32	s2, [r3, #8]
 380:Src/foc.c     **** }
 1542              		.loc 1 380 5 is_stmt 1 view .LVU393
 1543 0086 FFF7FEFF 		bl	SVPWM_Step
 1544              	.LVL99:
 381:Src/foc.c     **** 
 1545              		.loc 1 381 1 is_stmt 0 view .LVU394
 1546 008a 10B0     		add	sp, sp, #64
 1547              	.LCFI33:
 1548              		.cfi_def_cfa_offset 24
 1549              		@ sp needed
 1550 008c BDEC028B 		vldm	sp!, {d8}
 1551              	.LCFI34:
 1552              		.cfi_restore 80
 1553              		.cfi_restore 81
 1554              		.cfi_def_cfa_offset 16
 1555              	.LVL100:
 381:Src/foc.c     **** 
 1556              		.loc 1 381 1 view .LVU395
 1557 0090 70BD     		pop	{r4, r5, r6, pc}
 1558              	.LVL101:
 1559              	.L77:
 381:Src/foc.c     **** 
 1560              		.loc 1 381 1 view .LVU396
 1561 0092 00BF     		.align	2
 1562              	.L76:
 1563 0094 F6285C3F 		.word	1063004406
 1564 0098 00000000 		.word	.LANCHOR11
 1565              		.cfi_endproc
 1566              	.LFE180:
 1568              		.section	.text.Park_Conv,"ax",%progbits
 1569              		.align	1
 1570              		.global	Park_Conv
 1571              		.syntax unified
 1572              		.thumb
 1573              		.thumb_func
 1574              		.fpu fpv4-sp-d16
 1576              	Park_Conv:
 1577              	.LVL102:
 1578              	.LFB177:
 316:Src/foc.c     ****     *ialpha = ia;
 1579              		.loc 1 316 1 is_stmt 1 view -0
 1580              		.cfi_startproc
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 44


 1581              		@ args = 0, pretend = 0, frame = 0
 1582              		@ frame_needed = 0, uses_anonymous_args = 0
 1583              		@ link register save eliminated.
 317:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 1584              		.loc 1 317 5 view .LVU398
 317:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 1585              		.loc 1 317 13 is_stmt 0 view .LVU399
 1586 0000 80ED000A 		vstr.32	s0, [r0]
 318:Src/foc.c     **** }
 1587              		.loc 1 318 5 is_stmt 1 view .LVU400
 318:Src/foc.c     **** }
 1588              		.loc 1 318 24 is_stmt 0 view .LVU401
 1589 0004 9FED087A 		vldr.32	s14, .L79
 1590 0008 60EE877A 		vmul.f32	s15, s1, s14
 318:Src/foc.c     **** }
 1591              		.loc 1 318 46 view .LVU402
 1592 000c 30EE200A 		vadd.f32	s0, s0, s1
 1593              	.LVL103:
 318:Src/foc.c     **** }
 1594              		.loc 1 318 40 view .LVU403
 1595 0010 20EE070A 		vmul.f32	s0, s0, s14
 318:Src/foc.c     **** }
 1596              		.loc 1 318 29 view .LVU404
 1597 0014 37EE800A 		vadd.f32	s0, s15, s0
 318:Src/foc.c     **** }
 1598              		.loc 1 318 53 view .LVU405
 1599 0018 B0EE087A 		vmov.f32	s14, #3.0e+0
 1600 001c C0EE077A 		vdiv.f32	s15, s0, s14
 318:Src/foc.c     **** }
 1601              		.loc 1 318 12 view .LVU406
 1602 0020 C1ED007A 		vstr.32	s15, [r1]
 1603              	.LVL104:
 319:Src/foc.c     **** 
 1604              		.loc 1 319 1 view .LVU407
 1605 0024 7047     		bx	lr
 1606              	.L80:
 1607 0026 00BF     		.align	2
 1608              	.L79:
 1609 0028 D7B3DD3F 		.word	1071494103
 1610              		.cfi_endproc
 1611              	.LFE177:
 1613              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
 1614              		.align	1
 1615              		.global	HAL_ADC_ConvCpltCallback
 1616              		.syntax unified
 1617              		.thumb
 1618              		.thumb_func
 1619              		.fpu fpv4-sp-d16
 1621              	HAL_ADC_ConvCpltCallback:
 1622              	.LVL105:
 1623              	.LFB178:
 322:Src/foc.c     ****     float ia, ib;
 1624              		.loc 1 322 1 is_stmt 1 view -0
 1625              		.cfi_startproc
 1626              		@ args = 0, pretend = 0, frame = 0
 1627              		@ frame_needed = 0, uses_anonymous_args = 0
 322:Src/foc.c     ****     float ia, ib;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 45


 1628              		.loc 1 322 1 is_stmt 0 view .LVU409
 1629 0000 08B5     		push	{r3, lr}
 1630              	.LCFI35:
 1631              		.cfi_def_cfa_offset 8
 1632              		.cfi_offset 3, -8
 1633              		.cfi_offset 14, -4
 323:Src/foc.c     **** 
 1634              		.loc 1 323 5 is_stmt 1 view .LVU410
 325:Src/foc.c     ****     {
 1635              		.loc 1 325 5 view .LVU411
 325:Src/foc.c     ****     {
 1636              		.loc 1 325 13 is_stmt 0 view .LVU412
 1637 0002 0368     		ldr	r3, [r0]
 325:Src/foc.c     ****     {
 1638              		.loc 1 325 8 view .LVU413
 1639 0004 1B4A     		ldr	r2, .L87
 1640 0006 9342     		cmp	r3, r2
 1641 0008 03D0     		beq	.L81
 328:Src/foc.c     ****     {
 1642              		.loc 1 328 10 is_stmt 1 view .LVU414
 328:Src/foc.c     ****     {
 1643              		.loc 1 328 13 is_stmt 0 view .LVU415
 1644 000a 02F58072 		add	r2, r2, #256
 1645 000e 9342     		cmp	r3, r2
 1646 0010 00D0     		beq	.L85
 1647              	.LVL106:
 1648              	.L81:
 338:Src/foc.c     **** 
 1649              		.loc 1 338 1 view .LVU416
 1650 0012 08BD     		pop	{r3, pc}
 1651              	.LVL107:
 1652              	.L85:
 330:Src/foc.c     ****         {
 1653              		.loc 1 330 9 is_stmt 1 view .LVU417
 330:Src/foc.c     ****         {
 1654              		.loc 1 330 24 is_stmt 0 view .LVU418
 1655 0014 184B     		ldr	r3, .L87+4
 1656 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 330:Src/foc.c     ****         {
 1657              		.loc 1 330 12 view .LVU419
 1658 0018 022B     		cmp	r3, #2
 1659 001a 02D0     		beq	.L86
 1660              	.LVL108:
 1661              	.L83:
 336:Src/foc.c     ****     }
 1662              		.loc 1 336 9 is_stmt 1 view .LVU420
 1663 001c FFF7FEFF 		bl	Measure_R_20Khz_Handler
 1664              	.LVL109:
 338:Src/foc.c     **** 
 1665              		.loc 1 338 1 is_stmt 0 view .LVU421
 1666 0020 F7E7     		b	.L81
 1667              	.LVL110:
 1668              	.L86:
 332:Src/foc.c     ****             ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1669              		.loc 1 332 13 is_stmt 1 view .LVU422
 332:Src/foc.c     ****             ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1670              		.loc 1 332 18 is_stmt 0 view .LVU423
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 46


 1671 0022 164B     		ldr	r3, .L87+8
 1672 0024 1A88     		ldrh	r2, [r3]
 1673 0026 07EE102A 		vmov	s14, r2	@ int
 1674 002a B8EEC77A 		vcvt.f32.s32	s14, s14
 1675 002e DFED145A 		vldr.32	s11, .L87+12
 1676 0032 27EE257A 		vmul.f32	s14, s14, s11
 1677 0036 9FED136A 		vldr.32	s12, .L87+16
 1678 003a 27EE067A 		vmul.f32	s14, s14, s12
 1679 003e DFED126A 		vldr.32	s13, .L87+20
 1680 0042 87EE260A 		vdiv.f32	s0, s14, s13
 332:Src/foc.c     ****             ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1681              		.loc 1 332 16 view .LVU424
 1682 0046 9FED117A 		vldr.32	s14, .L87+24
 1683              	.LVL111:
 333:Src/foc.c     ****             Park_Conv(ia, ib, &Ialpha, &Ibeta);
 1684              		.loc 1 333 13 is_stmt 1 view .LVU425
 333:Src/foc.c     ****             Park_Conv(ia, ib, &Ialpha, &Ibeta);
 1685              		.loc 1 333 18 is_stmt 0 view .LVU426
 1686 004a 5B88     		ldrh	r3, [r3, #2]
 1687 004c 07EE903A 		vmov	s15, r3	@ int
 1688 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 1689 0054 67EEA57A 		vmul.f32	s15, s15, s11
 1690 0058 67EE867A 		vmul.f32	s15, s15, s12
 1691 005c C7EEA60A 		vdiv.f32	s1, s15, s13
 1692              	.LVL112:
 334:Src/foc.c     ****         }
 1693              		.loc 1 334 13 is_stmt 1 view .LVU427
 1694 0060 0B49     		ldr	r1, .L87+28
 1695 0062 0C48     		ldr	r0, .L87+32
 1696              	.LVL113:
 334:Src/foc.c     ****         }
 1697              		.loc 1 334 13 is_stmt 0 view .LVU428
 1698 0064 C0EE870A 		vdiv.f32	s1, s1, s14
 1699              	.LVL114:
 334:Src/foc.c     ****         }
 1700              		.loc 1 334 13 view .LVU429
 1701 0068 80EE070A 		vdiv.f32	s0, s0, s14
 1702              	.LVL115:
 334:Src/foc.c     ****         }
 1703              		.loc 1 334 13 view .LVU430
 1704 006c FFF7FEFF 		bl	Park_Conv
 1705              	.LVL116:
 334:Src/foc.c     ****         }
 1706              		.loc 1 334 13 view .LVU431
 1707 0070 D4E7     		b	.L83
 1708              	.L88:
 1709 0072 00BF     		.align	2
 1710              	.L87:
 1711 0074 00200140 		.word	1073815552
 1712 0078 00000000 		.word	Board_Mode
 1713 007c 00000000 		.word	ADC_Values_Raw2
 1714 0080 00404E45 		.word	1162756096
 1715 0084 00008039 		.word	964689920
 1716 0088 00004843 		.word	1128792064
 1717 008c A69B443B 		.word	994352038
 1718 0090 00000000 		.word	Ibeta
 1719 0094 00000000 		.word	Ialpha
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 47


 1720              		.cfi_endproc
 1721              	.LFE178:
 1723              		.section	.text.Foc,"ax",%progbits
 1724              		.align	1
 1725              		.global	Foc
 1726              		.syntax unified
 1727              		.thumb
 1728              		.thumb_func
 1729              		.fpu fpv4-sp-d16
 1731              	Foc:
 1732              	.LFB179:
 341:Src/foc.c     ****     Uvect_Mos u1, u2;
 1733              		.loc 1 341 1 is_stmt 1 view -0
 1734              		.cfi_startproc
 1735              		@ args = 0, pretend = 0, frame = 0
 1736              		@ frame_needed = 0, uses_anonymous_args = 0
 1737 0000 08B5     		push	{r3, lr}
 1738              	.LCFI36:
 1739              		.cfi_def_cfa_offset 8
 1740              		.cfi_offset 3, -8
 1741              		.cfi_offset 14, -4
 342:Src/foc.c     ****     float t1, t2;
 1742              		.loc 1 342 5 view .LVU433
 343:Src/foc.c     ****     float x, y;
 1743              		.loc 1 343 5 view .LVU434
 344:Src/foc.c     **** 
 1744              		.loc 1 344 5 view .LVU435
 346:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1745              		.loc 1 346 5 view .LVU436
 346:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1746              		.loc 1 346 53 is_stmt 0 view .LVU437
 1747 0002 184B     		ldr	r3, .L93
 1748 0004 D3ED007A 		vldr.32	s15, [r3]
 346:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1749              		.loc 1 346 11 view .LVU438
 1750 0008 9FED177A 		vldr.32	s14, .L93+4
 1751 000c 77EE677A 		vsub.f32	s15, s14, s15
 1752              	.LVL117:
 347:Src/foc.c     ****     //float electric_position=Position_Degree;
 1753              		.loc 1 347 5 is_stmt 1 view .LVU439
 347:Src/foc.c     ****     //float electric_position=Position_Degree;
 1754              		.loc 1 347 60 is_stmt 0 view .LVU440
 1755 0010 164B     		ldr	r3, .L93+8
 1756 0012 D3ED006A 		vldr.32	s13, [r3]
 347:Src/foc.c     ****     //float electric_position=Position_Degree;
 1757              		.loc 1 347 11 view .LVU441
 1758 0016 37EE667A 		vsub.f32	s14, s14, s13
 1759              	.LVL118:
 350:Src/foc.c     **** 
 1760              		.loc 1 350 5 is_stmt 1 view .LVU442
 350:Src/foc.c     **** 
 1761              		.loc 1 350 47 is_stmt 0 view .LVU443
 1762 001a 77EEC77A 		vsub.f32	s15, s15, s14
 1763              	.LVL119:
 350:Src/foc.c     **** 
 1764              		.loc 1 350 13 view .LVU444
 1765 001e FDEEE77A 		vcvt.s32.f32	s15, s15
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 48


 1766 0022 17EE903A 		vmov	r3, s15	@ int
 1767              	.LVL120:
 352:Src/foc.c     ****     {
 1768              		.loc 1 352 5 is_stmt 1 view .LVU445
 352:Src/foc.c     ****     {
 1769              		.loc 1 352 8 is_stmt 0 view .LVU446
 1770 0026 002B     		cmp	r3, #0
 1771 0028 18DB     		blt	.L92
 1772              	.L90:
 356:Src/foc.c     ****     sub += 90;
 1773              		.loc 1 356 5 is_stmt 1 view .LVU447
 356:Src/foc.c     ****     sub += 90;
 1774              		.loc 1 356 17 is_stmt 0 view .LVU448
 1775 002a 114A     		ldr	r2, .L93+12
 1776 002c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 356:Src/foc.c     ****     sub += 90;
 1777              		.loc 1 356 9 view .LVU449
 1778 002e 03FB02F3 		mul	r3, r3, r2
 1779              	.LVL121:
 357:Src/foc.c     **** 
 1780              		.loc 1 357 5 is_stmt 1 view .LVU450
 357:Src/foc.c     **** 
 1781              		.loc 1 357 9 is_stmt 0 view .LVU451
 1782 0032 5A33     		adds	r3, r3, #90
 1783              	.LVL122:
 359:Src/foc.c     **** 
 1784              		.loc 1 359 5 is_stmt 1 view .LVU452
 359:Src/foc.c     **** 
 1785              		.loc 1 359 9 is_stmt 0 view .LVU453
 1786 0034 0F4A     		ldr	r2, .L93+16
 1787 0036 82FB0312 		smull	r1, r2, r2, r3
 1788 003a D118     		adds	r1, r2, r3
 1789 003c DA17     		asrs	r2, r3, #31
 1790 003e C2EB2122 		rsb	r2, r2, r1, asr #8
 1791 0042 4FF4B471 		mov	r1, #360
 1792 0046 01FB1232 		mls	r2, r1, r2, r3
 1793              	.LVL123:
 361:Src/foc.c     **** }
 1794              		.loc 1 361 5 is_stmt 1 view .LVU454
 1795 004a F7EE000A 		vmov.f32	s1, #1.0e+0
 1796 004e 07EE902A 		vmov	s15, r2	@ int
 1797 0052 B8EEE70A 		vcvt.f32.s32	s0, s15
 1798 0056 FFF7FEFF 		bl	SVPWM
 1799              	.LVL124:
 362:Src/foc.c     **** 
 1800              		.loc 1 362 1 is_stmt 0 view .LVU455
 1801 005a 08BD     		pop	{r3, pc}
 1802              	.LVL125:
 1803              	.L92:
 354:Src/foc.c     ****     }
 1804              		.loc 1 354 9 is_stmt 1 view .LVU456
 354:Src/foc.c     ****     }
 1805              		.loc 1 354 13 is_stmt 0 view .LVU457
 1806 005c 03F5B473 		add	r3, r3, #360
 1807              	.LVL126:
 354:Src/foc.c     ****     }
 1808              		.loc 1 354 13 view .LVU458
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 49


 1809 0060 E3E7     		b	.L90
 1810              	.L94:
 1811 0062 00BF     		.align	2
 1812              	.L93:
 1813 0064 00000000 		.word	Position_Degree
 1814 0068 0000B443 		.word	1135869952
 1815 006c 00000000 		.word	.LANCHOR12
 1816 0070 00000000 		.word	.LANCHOR13
 1817 0074 B7600BB6 		.word	-1240768329
 1818              		.cfi_endproc
 1819              	.LFE179:
 1821              		.section	.text.VF_Openloop_Control,"ax",%progbits
 1822              		.align	1
 1823              		.global	VF_Openloop_Control
 1824              		.syntax unified
 1825              		.thumb
 1826              		.thumb_func
 1827              		.fpu fpv4-sp-d16
 1829              	VF_Openloop_Control:
 1830              	.LVL127:
 1831              	.LFB181:
 384:Src/foc.c     ****     static float theta = 0;
 1832              		.loc 1 384 1 is_stmt 1 view -0
 1833              		.cfi_startproc
 1834              		@ args = 0, pretend = 0, frame = 0
 1835              		@ frame_needed = 0, uses_anonymous_args = 0
 384:Src/foc.c     ****     static float theta = 0;
 1836              		.loc 1 384 1 is_stmt 0 view .LVU460
 1837 0000 08B5     		push	{r3, lr}
 1838              	.LCFI37:
 1839              		.cfi_def_cfa_offset 8
 1840              		.cfi_offset 3, -8
 1841              		.cfi_offset 14, -4
 1842 0002 07EE100A 		vmov	s14, r0	@ int
 385:Src/foc.c     ****     float delta_p = rps * Motor.pairs * 360.0f / freq; // ÊØèÊ¨°Ë∞ÉÁî®Êú¨ÂáΩÊï∞Ë¶ÅÂ¢ûÂä†ÁöÑÂÄº
 1843              		.loc 1 385 5 is_stmt 1 view .LVU461
 386:Src/foc.c     **** 
 1844              		.loc 1 386 5 view .LVU462
 386:Src/foc.c     **** 
 1845              		.loc 1 386 32 is_stmt 0 view .LVU463
 1846 0006 1B4B     		ldr	r3, .L104
 1847 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1848 000a 07EE903A 		vmov	s15, r3	@ int
 386:Src/foc.c     **** 
 1849              		.loc 1 386 25 view .LVU464
 1850 000e F8EEE77A 		vcvt.f32.s32	s15, s15
 1851 0012 27EE811A 		vmul.f32	s2, s15, s2
 1852              	.LVL128:
 386:Src/foc.c     **** 
 1853              		.loc 1 386 39 view .LVU465
 1854 0016 DFED186A 		vldr.32	s13, .L104+4
 1855 001a 21EE261A 		vmul.f32	s2, s2, s13
 386:Src/foc.c     **** 
 1856              		.loc 1 386 11 view .LVU466
 1857 001e 81EE206A 		vdiv.f32	s12, s2, s1
 1858              	.LVL129:
 388:Src/foc.c     ****     if (theta > 360)
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 50


 1859              		.loc 1 388 5 is_stmt 1 view .LVU467
 388:Src/foc.c     ****     if (theta > 360)
 1860              		.loc 1 388 24 is_stmt 0 view .LVU468
 1861 0022 F8EEC77A 		vcvt.f32.s32	s15, s14
 1862 0026 67EE867A 		vmul.f32	s15, s15, s12
 388:Src/foc.c     ****     if (theta > 360)
 1863              		.loc 1 388 11 view .LVU469
 1864 002a 144B     		ldr	r3, .L104+8
 1865 002c 93ED007A 		vldr.32	s14, [r3]
 1866 0030 77EE877A 		vadd.f32	s15, s15, s14
 1867 0034 C3ED007A 		vstr.32	s15, [r3]
 389:Src/foc.c     ****     {
 1868              		.loc 1 389 5 is_stmt 1 view .LVU470
 389:Src/foc.c     ****     {
 1869              		.loc 1 389 8 is_stmt 0 view .LVU471
 1870 0038 F4EEE67A 		vcmpe.f32	s15, s13
 1871 003c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1872 0040 0BDD     		ble	.L102
 391:Src/foc.c     ****     }
 1873              		.loc 1 391 9 is_stmt 1 view .LVU472
 391:Src/foc.c     ****     }
 1874              		.loc 1 391 15 is_stmt 0 view .LVU473
 1875 0042 77EEE67A 		vsub.f32	s15, s15, s13
 1876 0046 C3ED007A 		vstr.32	s15, [r3]
 1877              	.L98:
 397:Src/foc.c     **** }
 1878              		.loc 1 397 5 is_stmt 1 view .LVU474
 1879 004a F0EE400A 		vmov.f32	s1, s0
 1880              	.LVL130:
 397:Src/foc.c     **** }
 1881              		.loc 1 397 5 is_stmt 0 view .LVU475
 1882 004e 0B4B     		ldr	r3, .L104+8
 1883 0050 93ED000A 		vldr.32	s0, [r3]
 1884              	.LVL131:
 397:Src/foc.c     **** }
 1885              		.loc 1 397 5 view .LVU476
 1886 0054 FFF7FEFF 		bl	SVPWM
 1887              	.LVL132:
 398:Src/foc.c     **** 
 1888              		.loc 1 398 1 view .LVU477
 1889 0058 08BD     		pop	{r3, pc}
 1890              	.LVL133:
 1891              	.L102:
 393:Src/foc.c     ****     {
 1892              		.loc 1 393 10 is_stmt 1 view .LVU478
 393:Src/foc.c     ****     {
 1893              		.loc 1 393 13 is_stmt 0 view .LVU479
 1894 005a F5EEC07A 		vcmpe.f32	s15, #0
 1895 005e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1896 0062 F2D5     		bpl	.L98
 395:Src/foc.c     ****     }
 1897              		.loc 1 395 9 is_stmt 1 view .LVU480
 395:Src/foc.c     ****     }
 1898              		.loc 1 395 15 is_stmt 0 view .LVU481
 1899 0064 9FED047A 		vldr.32	s14, .L104+4
 1900 0068 77EE877A 		vadd.f32	s15, s15, s14
 1901 006c 034B     		ldr	r3, .L104+8
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 51


 1902 006e C3ED007A 		vstr.32	s15, [r3]
 1903 0072 EAE7     		b	.L98
 1904              	.L105:
 1905              		.align	2
 1906              	.L104:
 1907 0074 00000000 		.word	.LANCHOR13
 1908 0078 0000B443 		.word	1135869952
 1909 007c 00000000 		.word	.LANCHOR14
 1910              		.cfi_endproc
 1911              	.LFE181:
 1913              		.section	.rodata.Test_Direction.str1.4,"aMS",%progbits,1
 1914              		.align	2
 1915              	.LC4:
 1916 0000 64697265 		.ascii	"direction result:%d\015\012\000"
 1916      6374696F 
 1916      6E207265 
 1916      73756C74 
 1916      3A25640D 
 1917 0016 0000     		.align	2
 1918              	.LC5:
 1919 0018 74686520 		.ascii	"the direction of the motor is postive!\015\012\000"
 1919      64697265 
 1919      6374696F 
 1919      6E206F66 
 1919      20746865 
 1920 0041 000000   		.align	2
 1921              	.LC6:
 1922 0044 74686520 		.ascii	"the direction of the motor is nagative!\015\012\000"
 1922      64697265 
 1922      6374696F 
 1922      6E206F66 
 1922      20746865 
 1923              		.section	.text.Test_Direction,"ax",%progbits
 1924              		.align	1
 1925              		.syntax unified
 1926              		.thumb
 1927              		.thumb_func
 1928              		.fpu fpv4-sp-d16
 1930              	Test_Direction:
 1931              	.LFB182:
 401:Src/foc.c     ****     Test_Direction_Info.time += 1;
 1932              		.loc 1 401 1 is_stmt 1 view -0
 1933              		.cfi_startproc
 1934              		@ args = 0, pretend = 0, frame = 0
 1935              		@ frame_needed = 0, uses_anonymous_args = 0
 1936 0000 10B5     		push	{r4, lr}
 1937              	.LCFI38:
 1938              		.cfi_def_cfa_offset 8
 1939              		.cfi_offset 4, -8
 1940              		.cfi_offset 14, -4
 402:Src/foc.c     **** 
 1941              		.loc 1 402 5 view .LVU483
 402:Src/foc.c     **** 
 1942              		.loc 1 402 30 is_stmt 0 view .LVU484
 1943 0002 224B     		ldr	r3, .L117
 1944 0004 1A68     		ldr	r2, [r3]
 1945 0006 0132     		adds	r2, r2, #1
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 52


 1946 0008 1A60     		str	r2, [r3]
 404:Src/foc.c     ****     {
 1947              		.loc 1 404 5 is_stmt 1 view .LVU485
 404:Src/foc.c     ****     {
 1948              		.loc 1 404 46 is_stmt 0 view .LVU486
 1949 000a 93ED017A 		vldr.32	s14, [r3, #4]
 404:Src/foc.c     ****     {
 1950              		.loc 1 404 25 view .LVU487
 1951 000e 204B     		ldr	r3, .L117+4
 1952 0010 D3ED007A 		vldr.32	s15, [r3]
 404:Src/foc.c     ****     {
 1953              		.loc 1 404 8 view .LVU488
 1954 0014 B4EEE77A 		vcmpe.f32	s14, s15
 1955 0018 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1956 001c 15D5     		bpl	.L114
 406:Src/foc.c     ****     }
 1957              		.loc 1 406 9 is_stmt 1 view .LVU489
 406:Src/foc.c     ****     }
 1958              		.loc 1 406 46 is_stmt 0 view .LVU490
 1959 001e 1B4A     		ldr	r2, .L117
 1960 0020 9368     		ldr	r3, [r2, #8]
 1961 0022 0133     		adds	r3, r3, #1
 1962 0024 9360     		str	r3, [r2, #8]
 1963              	.L109:
 412:Src/foc.c     **** 
 1964              		.loc 1 412 5 is_stmt 1 view .LVU491
 412:Src/foc.c     **** 
 1965              		.loc 1 412 39 is_stmt 0 view .LVU492
 1966 0026 194C     		ldr	r4, .L117
 1967 0028 C4ED017A 		vstr.32	s15, [r4, #4]
 414:Src/foc.c     **** 
 1968              		.loc 1 414 5 is_stmt 1 view .LVU493
 1969 002c B7EE001A 		vmov.f32	s2, #1.0e+0
 1970 0030 0120     		movs	r0, #1
 1971 0032 DFED180A 		vldr.32	s1, .L117+8
 1972 0036 B0EE410A 		vmov.f32	s0, s2
 1973 003a FFF7FEFF 		bl	VF_Openloop_Control
 1974              	.LVL134:
 416:Src/foc.c     ****     { // run 10s
 1975              		.loc 1 416 5 view .LVU494
 416:Src/foc.c     ****     { // run 10s
 1976              		.loc 1 416 28 is_stmt 0 view .LVU495
 1977 003e 2268     		ldr	r2, [r4]
 416:Src/foc.c     ****     { // run 10s
 1978              		.loc 1 416 8 view .LVU496
 1979 0040 42F21073 		movw	r3, #10000
 1980 0044 9A42     		cmp	r2, r3
 1981 0046 05D8     		bhi	.L116
 1982              	.L106:
 433:Src/foc.c     **** 
 1983              		.loc 1 433 1 view .LVU497
 1984 0048 10BD     		pop	{r4, pc}
 1985              	.L114:
 410:Src/foc.c     ****     }
 1986              		.loc 1 410 9 is_stmt 1 view .LVU498
 410:Src/foc.c     ****     }
 1987              		.loc 1 410 46 is_stmt 0 view .LVU499
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 53


 1988 004a 104A     		ldr	r2, .L117
 1989 004c 9368     		ldr	r3, [r2, #8]
 1990 004e 013B     		subs	r3, r3, #1
 1991 0050 9360     		str	r3, [r2, #8]
 1992 0052 E8E7     		b	.L109
 1993              	.L116:
 418:Src/foc.c     ****         Test_Direction_Info.time = 0;
 1994              		.loc 1 418 9 is_stmt 1 view .LVU500
 418:Src/foc.c     ****         Test_Direction_Info.time = 0;
 1995              		.loc 1 418 20 is_stmt 0 view .LVU501
 1996 0054 0023     		movs	r3, #0
 1997 0056 104A     		ldr	r2, .L117+12
 1998 0058 1370     		strb	r3, [r2]
 419:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 1999              		.loc 1 419 9 is_stmt 1 view .LVU502
 419:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 2000              		.loc 1 419 34 is_stmt 0 view .LVU503
 2001 005a 2360     		str	r3, [r4]
 420:Src/foc.c     ****         if (Test_Direction_Info.direction_result > 0)
 2002              		.loc 1 420 9 is_stmt 1 view .LVU504
 2003 005c A168     		ldr	r1, [r4, #8]
 2004 005e 0F48     		ldr	r0, .L117+16
 2005 0060 FFF7FEFF 		bl	uprintf_polling
 2006              	.LVL135:
 421:Src/foc.c     ****         {
 2007              		.loc 1 421 9 view .LVU505
 421:Src/foc.c     ****         {
 2008              		.loc 1 421 32 is_stmt 0 view .LVU506
 2009 0064 A368     		ldr	r3, [r4, #8]
 421:Src/foc.c     ****         {
 2010              		.loc 1 421 12 view .LVU507
 2011 0066 002B     		cmp	r3, #0
 2012 0068 09DD     		ble	.L111
 423:Src/foc.c     ****             Motor.direction = 1;
 2013              		.loc 1 423 13 is_stmt 1 view .LVU508
 2014 006a 0D48     		ldr	r0, .L117+20
 2015 006c FFF7FEFF 		bl	uprintf_polling
 2016              	.LVL136:
 424:Src/foc.c     ****         }
 2017              		.loc 1 424 13 view .LVU509
 424:Src/foc.c     ****         }
 2018              		.loc 1 424 29 is_stmt 0 view .LVU510
 2019 0070 0C4B     		ldr	r3, .L117+24
 2020 0072 0122     		movs	r2, #1
 2021 0074 1A73     		strb	r2, [r3, #12]
 2022              	.L112:
 431:Src/foc.c     ****     }
 2023              		.loc 1 431 9 is_stmt 1 view .LVU511
 431:Src/foc.c     ****     }
 2024              		.loc 1 431 46 is_stmt 0 view .LVU512
 2025 0076 054B     		ldr	r3, .L117
 2026 0078 0022     		movs	r2, #0
 2027 007a 9A60     		str	r2, [r3, #8]
 433:Src/foc.c     **** 
 2028              		.loc 1 433 1 view .LVU513
 2029 007c E4E7     		b	.L106
 2030              	.L111:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 54


 428:Src/foc.c     ****             Motor.direction = -1;
 2031              		.loc 1 428 13 is_stmt 1 view .LVU514
 2032 007e 0A48     		ldr	r0, .L117+28
 2033 0080 FFF7FEFF 		bl	uprintf_polling
 2034              	.LVL137:
 429:Src/foc.c     ****         }
 2035              		.loc 1 429 13 view .LVU515
 429:Src/foc.c     ****         }
 2036              		.loc 1 429 29 is_stmt 0 view .LVU516
 2037 0084 074B     		ldr	r3, .L117+24
 2038 0086 FF22     		movs	r2, #255
 2039 0088 1A73     		strb	r2, [r3, #12]
 2040 008a F4E7     		b	.L112
 2041              	.L118:
 2042              		.align	2
 2043              	.L117:
 2044 008c 00000000 		.word	Test_Direction_Info
 2045 0090 00000000 		.word	Position_Degree
 2046 0094 00007A44 		.word	1148846080
 2047 0098 00000000 		.word	Board_Mode
 2048 009c 00000000 		.word	.LC4
 2049 00a0 18000000 		.word	.LC5
 2050 00a4 00000000 		.word	.LANCHOR13
 2051 00a8 44000000 		.word	.LC6
 2052              		.cfi_endproc
 2053              	.LFE182:
 2055              		.section	.text.Set_Sing_Mode,"ax",%progbits
 2056              		.align	1
 2057              		.global	Set_Sing_Mode
 2058              		.syntax unified
 2059              		.thumb
 2060              		.thumb_func
 2061              		.fpu fpv4-sp-d16
 2063              	Set_Sing_Mode:
 2064              	.LFB186:
 535:Src/foc.c     **** 
 536:Src/foc.c     **** typedef enum{
 537:Src/foc.c     ****     STOP_NOTE=20000,
 538:Src/foc.c     ****     DO=261,
 539:Src/foc.c     ****     RE=293,
 540:Src/foc.c     ****     MI=329,
 541:Src/foc.c     ****     FA=349,
 542:Src/foc.c     ****     SOL=392,
 543:Src/foc.c     ****     LA=440,
 544:Src/foc.c     ****     SI=493
 545:Src/foc.c     **** }MUSIC_FREQ;
 546:Src/foc.c     **** 
 547:Src/foc.c     **** MUSIC_FREQ Music_Freqs[8]={STOP_NOTE,DO,RE,MI,FA,SOL,LA,SI};
 548:Src/foc.c     **** //uint16_t Music_Song[]={0x1803,0x1802,0x1801,0x806,0x1801,0x1802,0x1803,0x1805,0x1803,0x1802,0x180
 549:Src/foc.c     **** uint16_t Music_Song[]={0x803,0x803,0x803,0x802,0x203,0x802,0x803,0x802,0x802,0x3406,0x3806,0x3807,0
 550:Src/foc.c     **** /*
 551:Src/foc.c     **** 3/,3/,3/,2/,3-,2/,3/,2/,2/,-6,-6/,-7/,1,2/,1/,-7
 552:Src/foc.c     **** */
 553:Src/foc.c     **** struct{
 554:Src/foc.c     ****     uint32_t ms_cnt;
 555:Src/foc.c     ****     uint32_t cnt;
 556:Src/foc.c     ****     uint32_t TIM_old_ARR;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 55


 557:Src/foc.c     ****     float time;
 558:Src/foc.c     ****     uint8_t stop;
 559:Src/foc.c     **** }Music_Info;
 560:Src/foc.c     **** 
 561:Src/foc.c     **** 
 562:Src/foc.c     **** void Set_Sing_Mode(){
 2065              		.loc 1 562 21 is_stmt 1 view -0
 2066              		.cfi_startproc
 2067              		@ args = 0, pretend = 0, frame = 0
 2068              		@ frame_needed = 0, uses_anonymous_args = 0
 2069              		@ link register save eliminated.
 563:Src/foc.c     ****     Music_Info.TIM_old_ARR=TIM7->ARR;
 2070              		.loc 1 563 5 view .LVU518
 2071              		.loc 1 563 32 is_stmt 0 view .LVU519
 2072 0000 034B     		ldr	r3, .L120
 2073 0002 DA6A     		ldr	r2, [r3, #44]
 2074              		.loc 1 563 27 view .LVU520
 2075 0004 034B     		ldr	r3, .L120+4
 2076 0006 9A60     		str	r2, [r3, #8]
 564:Src/foc.c     ****     Music_Info.cnt=0;
 2077              		.loc 1 564 5 is_stmt 1 view .LVU521
 2078              		.loc 1 564 19 is_stmt 0 view .LVU522
 2079 0008 0022     		movs	r2, #0
 2080 000a 5A60     		str	r2, [r3, #4]
 565:Src/foc.c     **** }
 2081              		.loc 1 565 1 view .LVU523
 2082 000c 7047     		bx	lr
 2083              	.L121:
 2084 000e 00BF     		.align	2
 2085              	.L120:
 2086 0010 00140040 		.word	1073746944
 2087 0014 00000000 		.word	Music_Info
 2088              		.cfi_endproc
 2089              	.LFE186:
 2091              		.section	.text.Music_Get_Note,"ax",%progbits
 2092              		.align	1
 2093              		.global	Music_Get_Note
 2094              		.syntax unified
 2095              		.thumb
 2096              		.thumb_func
 2097              		.fpu fpv4-sp-d16
 2099              	Music_Get_Note:
 2100              	.LVL138:
 2101              	.LFB187:
 566:Src/foc.c     **** 
 567:Src/foc.c     **** #define HALF_NOTE_K  1.059f
 568:Src/foc.c     **** float Music_Get_Note(uint16_t num,float* time){
 2102              		.loc 1 568 47 is_stmt 1 view -0
 2103              		.cfi_startproc
 2104              		@ args = 0, pretend = 0, frame = 0
 2105              		@ frame_needed = 0, uses_anonymous_args = 0
 2106              		@ link register save eliminated.
 2107              		.loc 1 568 47 is_stmt 0 view .LVU525
 2108 0000 10B4     		push	{r4}
 2109              	.LCFI39:
 2110              		.cfi_def_cfa_offset 4
 2111              		.cfi_offset 4, -4
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 56


 569:Src/foc.c     ****     uint8_t index=num&0xFF;
 2112              		.loc 1 569 5 is_stmt 1 view .LVU526
 2113              		.loc 1 569 13 is_stmt 0 view .LVU527
 2114 0002 C2B2     		uxtb	r2, r0
 2115              	.LVL139:
 570:Src/foc.c     ****     MUSIC_FREQ note=Music_Freqs[index];
 2116              		.loc 1 570 5 is_stmt 1 view .LVU528
 2117              		.loc 1 570 16 is_stmt 0 view .LVU529
 2118 0004 264B     		ldr	r3, .L137
 2119 0006 33F81220 		ldrh	r2, [r3, r2, lsl #1]
 2120              	.LVL140:
 571:Src/foc.c     **** 
 572:Src/foc.c     ****     float result=note;
 2121              		.loc 1 572 5 is_stmt 1 view .LVU530
 2122              		.loc 1 572 11 is_stmt 0 view .LVU531
 2123 000a 07EE902A 		vmov	s15, r2	@ int
 2124 000e B8EE670A 		vcvt.f32.u32	s0, s15
 2125              	.LVL141:
 573:Src/foc.c     **** 
 574:Src/foc.c     ****     uint8_t t=(num&0xF00)>>8; 
 2126              		.loc 1 574 5 is_stmt 1 view .LVU532
 2127              		.loc 1 574 13 is_stmt 0 view .LVU533
 2128 0012 C0F30323 		ubfx	r3, r0, #8, #4
 2129              	.LVL142:
 575:Src/foc.c     ****     uint8_t octave=(num&0x3000)>>12;
 2130              		.loc 1 575 5 is_stmt 1 view .LVU534
 2131              		.loc 1 575 13 is_stmt 0 view .LVU535
 2132 0016 C0F30134 		ubfx	r4, r0, #12, #2
 2133              	.LVL143:
 576:Src/foc.c     ****     uint8_t semitone=(num&0xC000)>>14;
 2134              		.loc 1 576 5 is_stmt 1 view .LVU536
 2135              		.loc 1 576 13 is_stmt 0 view .LVU537
 2136 001a 800B     		lsrs	r0, r0, #14
 2137              	.LVL144:
 577:Src/foc.c     ****     switch (t)
 2138              		.loc 1 577 5 is_stmt 1 view .LVU538
 2139 001c 013B     		subs	r3, r3, #1
 2140              	.LVL145:
 2141              		.loc 1 577 5 is_stmt 0 view .LVU539
 2142 001e 0E2B     		cmp	r3, #14
 2143 0020 0CD8     		bhi	.L123
 2144 0022 DFE803F0 		tbb	[pc, r3]
 2145              	.L125:
 2146 0026 08       		.byte	(.L129-.L125)/2
 2147 0027 16       		.byte	(.L128-.L125)/2
 2148 0028 0B       		.byte	(.L123-.L125)/2
 2149 0029 1A       		.byte	(.L127-.L125)/2
 2150 002a 0B       		.byte	(.L123-.L125)/2
 2151 002b 0B       		.byte	(.L123-.L125)/2
 2152 002c 0B       		.byte	(.L123-.L125)/2
 2153 002d 1E       		.byte	(.L126-.L125)/2
 2154 002e 0B       		.byte	(.L123-.L125)/2
 2155 002f 0B       		.byte	(.L123-.L125)/2
 2156 0030 0B       		.byte	(.L123-.L125)/2
 2157 0031 0B       		.byte	(.L123-.L125)/2
 2158 0032 0B       		.byte	(.L123-.L125)/2
 2159 0033 0B       		.byte	(.L123-.L125)/2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 57


 2160 0034 22       		.byte	(.L124-.L125)/2
 2161 0035 00       		.p2align 1
 2162              	.L129:
 578:Src/foc.c     ****     {
 579:Src/foc.c     ****     case 1:
 580:Src/foc.c     ****         *time=4.0f;
 2163              		.loc 1 580 9 is_stmt 1 view .LVU540
 2164              		.loc 1 580 14 is_stmt 0 view .LVU541
 2165 0036 4FF08143 		mov	r3, #1082130432
 2166              	.LVL146:
 2167              		.loc 1 580 14 view .LVU542
 2168 003a 0B60     		str	r3, [r1]	@ float
 581:Src/foc.c     ****         break;
 2169              		.loc 1 581 9 is_stmt 1 view .LVU543
 2170              	.L123:
 582:Src/foc.c     ****     case 2:
 583:Src/foc.c     ****         *time=2.0f;
 584:Src/foc.c     ****         break;
 585:Src/foc.c     ****     case 4:
 586:Src/foc.c     ****         *time=1.0f;
 587:Src/foc.c     ****         break;
 588:Src/foc.c     ****     case 8:
 589:Src/foc.c     ****         *time=0.5f;
 590:Src/foc.c     ****         break;
 591:Src/foc.c     ****     case 0xF:
 592:Src/foc.c     ****         *time=0.25f;
 593:Src/foc.c     ****         break;
 594:Src/foc.c     ****     
 595:Src/foc.c     ****     default:
 596:Src/foc.c     ****         break;
 597:Src/foc.c     ****     }
 598:Src/foc.c     **** 
 599:Src/foc.c     ****     switch(octave){
 2171              		.loc 1 599 5 view .LVU544
 2172 003c 012C     		cmp	r4, #1
 2173 003e 18D0     		beq	.L130
 2174 0040 032C     		cmp	r4, #3
 2175 0042 1CD0     		beq	.L131
 2176              	.L132:
 600:Src/foc.c     ****         case 1:
 601:Src/foc.c     ****         result=note*2;
 602:Src/foc.c     ****         break;
 603:Src/foc.c     ****         case 0:
 604:Src/foc.c     ****         result=note;
 605:Src/foc.c     ****         break;
 606:Src/foc.c     ****         case 3:
 607:Src/foc.c     ****         result=note/2;
 608:Src/foc.c     ****         break;
 609:Src/foc.c     ****     }
 610:Src/foc.c     **** 
 611:Src/foc.c     ****     switch(semitone){
 2177              		.loc 1 611 5 view .LVU545
 2178 0044 0128     		cmp	r0, #1
 2179 0046 20D0     		beq	.L133
 2180              		.loc 1 611 5 is_stmt 0 view .LVU546
 2181 0048 0328     		cmp	r0, #3
 2182 004a 23D0     		beq	.L134
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 58


 2183              	.L122:
 612:Src/foc.c     ****         case 1:
 613:Src/foc.c     ****         result*=HALF_NOTE_K;
 614:Src/foc.c     ****         break;
 615:Src/foc.c     ****         case 0:
 616:Src/foc.c     ****         break;
 617:Src/foc.c     ****         case 3:
 618:Src/foc.c     ****         result/=HALF_NOTE_K;
 619:Src/foc.c     ****         break;
 620:Src/foc.c     ****     }
 621:Src/foc.c     ****     
 622:Src/foc.c     ****     return result;
 623:Src/foc.c     **** }
 2184              		.loc 1 623 1 view .LVU547
 2185 004c 5DF8044B 		ldr	r4, [sp], #4
 2186              	.LCFI40:
 2187              		.cfi_remember_state
 2188              		.cfi_restore 4
 2189              		.cfi_def_cfa_offset 0
 2190              	.LVL147:
 2191              		.loc 1 623 1 view .LVU548
 2192 0050 7047     		bx	lr
 2193              	.LVL148:
 2194              	.L128:
 2195              	.LCFI41:
 2196              		.cfi_restore_state
 583:Src/foc.c     ****         break;
 2197              		.loc 1 583 9 is_stmt 1 view .LVU549
 583:Src/foc.c     ****         break;
 2198              		.loc 1 583 14 is_stmt 0 view .LVU550
 2199 0052 4FF08043 		mov	r3, #1073741824
 2200              	.LVL149:
 583:Src/foc.c     ****         break;
 2201              		.loc 1 583 14 view .LVU551
 2202 0056 0B60     		str	r3, [r1]	@ float
 584:Src/foc.c     ****     case 4:
 2203              		.loc 1 584 9 is_stmt 1 view .LVU552
 2204 0058 F0E7     		b	.L123
 2205              	.LVL150:
 2206              	.L127:
 586:Src/foc.c     ****         break;
 2207              		.loc 1 586 9 view .LVU553
 586:Src/foc.c     ****         break;
 2208              		.loc 1 586 14 is_stmt 0 view .LVU554
 2209 005a 4FF07E53 		mov	r3, #1065353216
 2210              	.LVL151:
 586:Src/foc.c     ****         break;
 2211              		.loc 1 586 14 view .LVU555
 2212 005e 0B60     		str	r3, [r1]	@ float
 587:Src/foc.c     ****     case 8:
 2213              		.loc 1 587 9 is_stmt 1 view .LVU556
 2214 0060 ECE7     		b	.L123
 2215              	.LVL152:
 2216              	.L126:
 589:Src/foc.c     ****         break;
 2217              		.loc 1 589 9 view .LVU557
 589:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 59


 2218              		.loc 1 589 14 is_stmt 0 view .LVU558
 2219 0062 4FF07C53 		mov	r3, #1056964608
 2220              	.LVL153:
 589:Src/foc.c     ****         break;
 2221              		.loc 1 589 14 view .LVU559
 2222 0066 0B60     		str	r3, [r1]	@ float
 590:Src/foc.c     ****     case 0xF:
 2223              		.loc 1 590 9 is_stmt 1 view .LVU560
 2224 0068 E8E7     		b	.L123
 2225              	.LVL154:
 2226              	.L124:
 592:Src/foc.c     ****         break;
 2227              		.loc 1 592 9 view .LVU561
 592:Src/foc.c     ****         break;
 2228              		.loc 1 592 14 is_stmt 0 view .LVU562
 2229 006a 4FF07A53 		mov	r3, #1048576000
 2230              	.LVL155:
 592:Src/foc.c     ****         break;
 2231              		.loc 1 592 14 view .LVU563
 2232 006e 0B60     		str	r3, [r1]	@ float
 593:Src/foc.c     ****     
 2233              		.loc 1 593 9 is_stmt 1 view .LVU564
 2234 0070 E4E7     		b	.L123
 2235              	.L130:
 601:Src/foc.c     ****         break;
 2236              		.loc 1 601 9 view .LVU565
 601:Src/foc.c     ****         break;
 2237              		.loc 1 601 20 is_stmt 0 view .LVU566
 2238 0072 5300     		lsls	r3, r2, #1
 2239 0074 00EE103A 		vmov	s0, r3	@ int
 2240              	.LVL156:
 601:Src/foc.c     ****         break;
 2241              		.loc 1 601 15 view .LVU567
 2242 0078 B8EEC00A 		vcvt.f32.s32	s0, s0
 2243              	.LVL157:
 602:Src/foc.c     ****         case 0:
 2244              		.loc 1 602 9 is_stmt 1 view .LVU568
 2245 007c E2E7     		b	.L132
 2246              	.L131:
 607:Src/foc.c     ****         break;
 2247              		.loc 1 607 9 view .LVU569
 607:Src/foc.c     ****         break;
 2248              		.loc 1 607 20 is_stmt 0 view .LVU570
 2249 007e 5308     		lsrs	r3, r2, #1
 2250 0080 00EE103A 		vmov	s0, r3	@ int
 2251              	.LVL158:
 607:Src/foc.c     ****         break;
 2252              		.loc 1 607 15 view .LVU571
 2253 0084 B8EEC00A 		vcvt.f32.s32	s0, s0
 2254              	.LVL159:
 608:Src/foc.c     ****     }
 2255              		.loc 1 608 9 is_stmt 1 view .LVU572
 2256 0088 DCE7     		b	.L132
 2257              	.L133:
 613:Src/foc.c     ****         break;
 2258              		.loc 1 613 9 view .LVU573
 613:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 60


 2259              		.loc 1 613 15 is_stmt 0 view .LVU574
 2260 008a DFED067A 		vldr.32	s15, .L137+4
 2261 008e 20EE270A 		vmul.f32	s0, s0, s15
 2262              	.LVL160:
 614:Src/foc.c     ****         case 0:
 2263              		.loc 1 614 9 is_stmt 1 view .LVU575
 2264 0092 DBE7     		b	.L122
 2265              	.L134:
 618:Src/foc.c     ****         break;
 2266              		.loc 1 618 9 view .LVU576
 618:Src/foc.c     ****         break;
 2267              		.loc 1 618 15 is_stmt 0 view .LVU577
 2268 0094 DFED037A 		vldr.32	s15, .L137+4
 2269 0098 80EE270A 		vdiv.f32	s0, s0, s15
 2270              	.LVL161:
 619:Src/foc.c     ****     }
 2271              		.loc 1 619 9 is_stmt 1 view .LVU578
 622:Src/foc.c     **** }
 2272              		.loc 1 622 5 view .LVU579
 622:Src/foc.c     **** }
 2273              		.loc 1 622 12 is_stmt 0 view .LVU580
 2274 009c D6E7     		b	.L122
 2275              	.L138:
 2276 009e 00BF     		.align	2
 2277              	.L137:
 2278 00a0 00000000 		.word	.LANCHOR15
 2279 00a4 508D873F 		.word	1065848144
 2280              		.cfi_endproc
 2281              	.LFE187:
 2283              		.section	.text.Music_Play_Note,"ax",%progbits
 2284              		.align	1
 2285              		.global	Music_Play_Note
 2286              		.syntax unified
 2287              		.thumb
 2288              		.thumb_func
 2289              		.fpu fpv4-sp-d16
 2291              	Music_Play_Note:
 2292              	.LVL162:
 2293              	.LFB188:
 624:Src/foc.c     **** void Music_Play_Note(uint16_t freq){
 2294              		.loc 1 624 36 is_stmt 1 view -0
 2295              		.cfi_startproc
 2296              		@ args = 0, pretend = 0, frame = 0
 2297              		@ frame_needed = 0, uses_anonymous_args = 0
 2298              		@ link register save eliminated.
 625:Src/foc.c     **** 
 626:Src/foc.c     ****     TIM7->PSC=6;
 2299              		.loc 1 626 5 view .LVU582
 2300              		.loc 1 626 14 is_stmt 0 view .LVU583
 2301 0000 044A     		ldr	r2, .L140
 2302 0002 0623     		movs	r3, #6
 2303 0004 9362     		str	r3, [r2, #40]
 627:Src/foc.c     ****     TIM7->ARR=12000000/freq-1;
 2304              		.loc 1 627 5 is_stmt 1 view .LVU584
 2305              		.loc 1 627 23 is_stmt 0 view .LVU585
 2306 0006 044B     		ldr	r3, .L140+4
 2307 0008 93FBF0F3 		sdiv	r3, r3, r0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 61


 2308              		.loc 1 627 28 view .LVU586
 2309 000c 013B     		subs	r3, r3, #1
 2310              		.loc 1 627 14 view .LVU587
 2311 000e D362     		str	r3, [r2, #44]
 628:Src/foc.c     **** 
 629:Src/foc.c     **** }
 2312              		.loc 1 629 1 view .LVU588
 2313 0010 7047     		bx	lr
 2314              	.L141:
 2315 0012 00BF     		.align	2
 2316              	.L140:
 2317 0014 00140040 		.word	1073746944
 2318 0018 001BB700 		.word	12000000
 2319              		.cfi_endproc
 2320              	.LFE188:
 2322              		.section	.text.Muisc_Play_TIM7_IRQ_Handler,"ax",%progbits
 2323              		.align	1
 2324              		.global	Muisc_Play_TIM7_IRQ_Handler
 2325              		.syntax unified
 2326              		.thumb
 2327              		.thumb_func
 2328              		.fpu fpv4-sp-d16
 2330              	Muisc_Play_TIM7_IRQ_Handler:
 2331              	.LFB189:
 630:Src/foc.c     **** 
 631:Src/foc.c     **** void Muisc_Play_TIM7_IRQ_Handler(){
 2332              		.loc 1 631 35 is_stmt 1 view -0
 2333              		.cfi_startproc
 2334              		@ args = 0, pretend = 0, frame = 0
 2335              		@ frame_needed = 0, uses_anonymous_args = 0
 2336 0000 08B5     		push	{r3, lr}
 2337              	.LCFI42:
 2338              		.cfi_def_cfa_offset 8
 2339              		.cfi_offset 3, -8
 2340              		.cfi_offset 14, -4
 632:Src/foc.c     ****     static uint8_t first_time=0;
 2341              		.loc 1 632 5 view .LVU590
 633:Src/foc.c     ****     if(Music_Info.stop==1){
 2342              		.loc 1 633 5 view .LVU591
 2343              		.loc 1 633 18 is_stmt 0 view .LVU592
 2344 0002 114B     		ldr	r3, .L149
 2345 0004 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 2346              		.loc 1 633 7 view .LVU593
 2347 0006 012B     		cmp	r3, #1
 2348 0008 0FD0     		beq	.L148
 634:Src/foc.c     ****         Set_Vector(U0,0);
 635:Src/foc.c     ****         return ;
 636:Src/foc.c     ****     }
 637:Src/foc.c     ****     if(!first_time){
 2349              		.loc 1 637 5 is_stmt 1 view .LVU594
 2350              		.loc 1 637 8 is_stmt 0 view .LVU595
 2351 000a 104B     		ldr	r3, .L149+4
 2352 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2353              		.loc 1 637 7 view .LVU596
 2354 000e 9BB9     		cbnz	r3, .L145
 638:Src/foc.c     ****         Set_Vector(U4,0.3f);
 2355              		.loc 1 638 9 is_stmt 1 view .LVU597
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 62


 2356 0010 0F4B     		ldr	r3, .L149+8
 2357 0012 9FED100A 		vldr.32	s0, .L149+12
 2358 0016 0FCB     		ldm	r3, {r0, r1, r2, r3}
 2359 0018 FFF7FEFF 		bl	Set_Vector
 2360              	.LVL163:
 2361              	.L146:
 639:Src/foc.c     ****     }else{
 640:Src/foc.c     ****         Set_Vector(U6,0.3f);
 641:Src/foc.c     ****     }
 642:Src/foc.c     ****     first_time=!first_time;
 2362              		.loc 1 642 5 view .LVU598
 2363              		.loc 1 642 16 is_stmt 0 view .LVU599
 2364 001c 0B4A     		ldr	r2, .L149+4
 2365 001e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2366 0020 B3FA83F3 		clz	r3, r3
 2367 0024 5B09     		lsrs	r3, r3, #5
 2368              		.loc 1 642 15 view .LVU600
 2369 0026 1370     		strb	r3, [r2]
 2370              	.L142:
 643:Src/foc.c     **** }
 2371              		.loc 1 643 1 view .LVU601
 2372 0028 08BD     		pop	{r3, pc}
 2373              	.L148:
 634:Src/foc.c     ****         return ;
 2374              		.loc 1 634 9 is_stmt 1 view .LVU602
 2375 002a 0B4B     		ldr	r3, .L149+16
 2376 002c 9FED0B0A 		vldr.32	s0, .L149+20
 2377 0030 0FCB     		ldm	r3, {r0, r1, r2, r3}
 2378 0032 FFF7FEFF 		bl	Set_Vector
 2379              	.LVL164:
 635:Src/foc.c     ****     }
 2380              		.loc 1 635 9 view .LVU603
 2381 0036 F7E7     		b	.L142
 2382              	.L145:
 640:Src/foc.c     ****     }
 2383              		.loc 1 640 9 view .LVU604
 2384 0038 094B     		ldr	r3, .L149+24
 2385 003a 9FED060A 		vldr.32	s0, .L149+12
 2386 003e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 2387 0040 FFF7FEFF 		bl	Set_Vector
 2388              	.LVL165:
 2389 0044 EAE7     		b	.L146
 2390              	.L150:
 2391 0046 00BF     		.align	2
 2392              	.L149:
 2393 0048 00000000 		.word	Music_Info
 2394 004c 00000000 		.word	.LANCHOR16
 2395 0050 00000000 		.word	.LANCHOR5
 2396 0054 9A99993E 		.word	1050253722
 2397 0058 00000000 		.word	.LANCHOR10
 2398 005c 00000000 		.word	0
 2399 0060 00000000 		.word	.LANCHOR6
 2400              		.cfi_endproc
 2401              	.LFE189:
 2403              		.section	.text.Theta_Handler,"ax",%progbits
 2404              		.align	1
 2405              		.global	Theta_Handler
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 63


 2406              		.syntax unified
 2407              		.thumb
 2408              		.thumb_func
 2409              		.fpu fpv4-sp-d16
 2411              	Theta_Handler:
 2412              	.LFB176:
 282:Src/foc.c     **** 
 2413              		.loc 1 282 1 view -0
 2414              		.cfi_startproc
 2415              		@ args = 0, pretend = 0, frame = 0
 2416              		@ frame_needed = 0, uses_anonymous_args = 0
 2417 0000 08B5     		push	{r3, lr}
 2418              	.LCFI43:
 2419              		.cfi_def_cfa_offset 8
 2420              		.cfi_offset 3, -8
 2421              		.cfi_offset 14, -4
 284:Src/foc.c     ****     switch (Board_Mode)
 2422              		.loc 1 284 5 view .LVU606
 284:Src/foc.c     ****     switch (Board_Mode)
 2423              		.loc 1 284 23 is_stmt 0 view .LVU607
 2424 0002 0120     		movs	r0, #1
 2425 0004 FFF7FEFF 		bl	Get_Position_Rad_Dgree
 2426              	.LVL166:
 284:Src/foc.c     ****     switch (Board_Mode)
 2427              		.loc 1 284 21 view .LVU608
 2428 0008 184B     		ldr	r3, .L162
 2429 000a 83ED000A 		vstr.32	s0, [r3]
 285:Src/foc.c     ****     {
 2430              		.loc 1 285 5 is_stmt 1 view .LVU609
 2431 000e 184B     		ldr	r3, .L162+4
 2432 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2433 0012 052B     		cmp	r3, #5
 2434 0014 06D8     		bhi	.L152
 2435 0016 052B     		cmp	r3, #5
 2436 0018 0DD8     		bhi	.L151
 2437 001a DFE803F0 		tbb	[pc, r3]
 2438              	.L155:
 2439 001e 1A       		.byte	(.L158-.L155)/2
 2440 001f 0C       		.byte	(.L151-.L155)/2
 2441 0020 0A       		.byte	(.L157-.L155)/2
 2442 0021 0C       		.byte	(.L151-.L155)/2
 2443 0022 0D       		.byte	(.L156-.L155)/2
 2444 0023 21       		.byte	(.L154-.L155)/2
 2445              		.p2align 1
 2446              	.L152:
 2447 0024 F12B     		cmp	r3, #241
 2448 0026 11D0     		beq	.L159
 2449 0028 F32B     		cmp	r3, #243
 2450 002a 04D1     		bne	.L151
 2451              	.LBB4:
 306:Src/foc.c     ****         break;
 2452              		.loc 1 306 9 view .LVU610
 2453 002c FFF7FEFF 		bl	Muisc_Play_TIM7_IRQ_Handler
 2454              	.LVL167:
 307:Src/foc.c     ****     default:
 2455              		.loc 1 307 9 view .LVU611
 2456              	.LBE4:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 64


 311:Src/foc.c     **** 
 2457              		.loc 1 311 1 is_stmt 0 view .LVU612
 2458 0030 01E0     		b	.L151
 2459              	.L157:
 2460              	.LBB5:
 288:Src/foc.c     ****         break;
 2461              		.loc 1 288 9 is_stmt 1 view .LVU613
 2462 0032 FFF7FEFF 		bl	Foc
 2463              	.LVL168:
 289:Src/foc.c     ****     case VF_OPENLOOP:
 2464              		.loc 1 289 9 view .LVU614
 2465              	.L151:
 2466              	.LBE5:
 311:Src/foc.c     **** 
 2467              		.loc 1 311 1 is_stmt 0 view .LVU615
 2468 0036 08BD     		pop	{r3, pc}
 2469              	.L156:
 2470              	.LBB6:
 291:Src/foc.c     ****         break;
 2471              		.loc 1 291 9 is_stmt 1 view .LVU616
 2472 0038 B0EE081A 		vmov.f32	s2, #3.0e+0
 2473 003c 0120     		movs	r0, #1
 2474 003e DFED0D0A 		vldr.32	s1, .L162+8
 2475 0042 B7EE000A 		vmov.f32	s0, #1.0e+0
 2476 0046 FFF7FEFF 		bl	VF_Openloop_Control
 2477              	.LVL169:
 292:Src/foc.c     ****     case TEST_DIRECTION:
 2478              		.loc 1 292 9 view .LVU617
 2479 004a F4E7     		b	.L151
 2480              	.L159:
 294:Src/foc.c     ****         break;
 2481              		.loc 1 294 9 view .LVU618
 2482 004c FFF7FEFF 		bl	Test_Direction
 2483              	.LVL170:
 295:Src/foc.c     ****     case STOP_MODE:
 2484              		.loc 1 295 9 view .LVU619
 2485 0050 F1E7     		b	.L151
 2486              	.L158:
 297:Src/foc.c     ****         break;
 2487              		.loc 1 297 9 view .LVU620
 2488 0052 9FED090A 		vldr.32	s0, .L162+12
 2489 0056 F0EE400A 		vmov.f32	s1, s0
 2490 005a FFF7FEFF 		bl	SVPWM
 2491              	.LVL171:
 298:Src/foc.c     ****     case WAIT_MODE:
 2492              		.loc 1 298 9 view .LVU621
 2493 005e EAE7     		b	.L151
 2494              	.L154:
 303:Src/foc.c     ****         break;
 2495              		.loc 1 303 9 view .LVU622
 2496 0060 B7EE000A 		vmov.f32	s0, #1.0e+0
 2497 0064 FFF7FEFF 		bl	Measure_R_MS_Handler
 2498              	.LVL172:
 304:Src/foc.c     ****     case SING_MODE:
 2499              		.loc 1 304 9 view .LVU623
 2500 0068 E5E7     		b	.L151
 2501              	.L163:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 65


 2502 006a 00BF     		.align	2
 2503              	.L162:
 2504 006c 00000000 		.word	Position_Degree
 2505 0070 00000000 		.word	Board_Mode
 2506 0074 00007A44 		.word	1148846080
 2507 0078 00000000 		.word	0
 2508              	.LBE6:
 2509              		.cfi_endproc
 2510              	.LFE176:
 2512              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 2513              		.align	1
 2514              		.global	HAL_TIM_PeriodElapsedCallback
 2515              		.syntax unified
 2516              		.thumb
 2517              		.thumb_func
 2518              		.fpu fpv4-sp-d16
 2520              	HAL_TIM_PeriodElapsedCallback:
 2521              	.LVL173:
 2522              	.LFB174:
 233:Src/foc.c     **** 
 2523              		.loc 1 233 1 view -0
 2524              		.cfi_startproc
 2525              		@ args = 0, pretend = 0, frame = 0
 2526              		@ frame_needed = 0, uses_anonymous_args = 0
 233:Src/foc.c     **** 
 2527              		.loc 1 233 1 is_stmt 0 view .LVU625
 2528 0000 08B5     		push	{r3, lr}
 2529              	.LCFI44:
 2530              		.cfi_def_cfa_offset 8
 2531              		.cfi_offset 3, -8
 2532              		.cfi_offset 14, -4
 235:Src/foc.c     ****     {
 2533              		.loc 1 235 5 is_stmt 1 view .LVU626
 235:Src/foc.c     ****     {
 2534              		.loc 1 235 13 is_stmt 0 view .LVU627
 2535 0002 0268     		ldr	r2, [r0]
 235:Src/foc.c     ****     {
 2536              		.loc 1 235 8 view .LVU628
 2537 0004 054B     		ldr	r3, .L168
 2538 0006 9A42     		cmp	r2, r3
 2539 0008 00D0     		beq	.L167
 2540              	.LVL174:
 2541              	.L164:
 246:Src/foc.c     **** 
 2542              		.loc 1 246 1 view .LVU629
 2543 000a 08BD     		pop	{r3, pc}
 2544              	.LVL175:
 2545              	.L167:
 237:Src/foc.c     ****         {
 2546              		.loc 1 237 9 is_stmt 1 view .LVU630
 237:Src/foc.c     ****         {
 2547              		.loc 1 237 13 is_stmt 0 view .LVU631
 2548 000c 044B     		ldr	r3, .L168+4
 2549 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 237:Src/foc.c     ****         {
 2550              		.loc 1 237 12 view .LVU632
 2551 0010 002B     		cmp	r3, #0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 66


 2552 0012 FAD0     		beq	.L164
 241:Src/foc.c     ****     }
 2553              		.loc 1 241 9 is_stmt 1 view .LVU633
 2554 0014 FFF7FEFF 		bl	Theta_Handler
 2555              	.LVL176:
 245:Src/foc.c     **** }
 2556              		.loc 1 245 5 view .LVU634
 2557 0018 F7E7     		b	.L164
 2558              	.L169:
 2559 001a 00BF     		.align	2
 2560              	.L168:
 2561 001c 00140040 		.word	1073746944
 2562 0020 00000000 		.word	Init_OK
 2563              		.cfi_endproc
 2564              	.LFE174:
 2566              		.global	__aeabi_ui2d
 2567              		.global	__aeabi_i2d
 2568              		.global	__aeabi_dmul
 2569              		.global	__aeabi_dcmpge
 2570              		.section	.text.Music_Play_Beat,"ax",%progbits
 2571              		.align	1
 2572              		.global	Music_Play_Beat
 2573              		.syntax unified
 2574              		.thumb
 2575              		.thumb_func
 2576              		.fpu fpv4-sp-d16
 2578              	Music_Play_Beat:
 2579              	.LFB190:
 644:Src/foc.c     **** 
 645:Src/foc.c     **** void Music_Play_Beat(){   // ËäÇÊãçÂ§ÑÁêÜÔºåÊöÇÂÆö‰∏ÄÂàÜÈíü80ÊãçÔºåÂç≥750ms‰∏ÄÊãç
 2580              		.loc 1 645 23 view -0
 2581              		.cfi_startproc
 2582              		@ args = 0, pretend = 0, frame = 0
 2583              		@ frame_needed = 0, uses_anonymous_args = 0
 2584 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2585              	.LCFI45:
 2586              		.cfi_def_cfa_offset 24
 2587              		.cfi_offset 3, -24
 2588              		.cfi_offset 4, -20
 2589              		.cfi_offset 5, -16
 2590              		.cfi_offset 6, -12
 2591              		.cfi_offset 7, -8
 2592              		.cfi_offset 14, -4
 646:Src/foc.c     ****     static uint16_t next_time=750;
 2593              		.loc 1 646 5 view .LVU636
 647:Src/foc.c     ****     uint16_t note;
 2594              		.loc 1 647 5 view .LVU637
 648:Src/foc.c     ****     if(Board_Mode!=SING_MODE){
 2595              		.loc 1 648 5 view .LVU638
 2596              		.loc 1 648 18 is_stmt 0 view .LVU639
 2597 0002 2B4B     		ldr	r3, .L179+8
 2598 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2599              		.loc 1 648 7 view .LVU640
 2600 0006 F32B     		cmp	r3, #243
 2601 0008 20D1     		bne	.L170
 649:Src/foc.c     ****         return ;
 650:Src/foc.c     ****     }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 67


 651:Src/foc.c     ****     Music_Info.ms_cnt++;
 2602              		.loc 1 651 5 is_stmt 1 view .LVU641
 2603              		.loc 1 651 15 is_stmt 0 view .LVU642
 2604 000a 2A4B     		ldr	r3, .L179+12
 2605 000c 1C68     		ldr	r4, [r3]
 2606              		.loc 1 651 22 view .LVU643
 2607 000e 0134     		adds	r4, r4, #1
 2608 0010 1C60     		str	r4, [r3]
 652:Src/foc.c     **** 
 653:Src/foc.c     ****     if(Music_Info.ms_cnt>=next_time*0.85&&Music_Info.ms_cnt<next_time){
 2609              		.loc 1 653 5 is_stmt 1 view .LVU644
 2610              		.loc 1 653 25 is_stmt 0 view .LVU645
 2611 0012 2046     		mov	r0, r4
 2612 0014 FFF7FEFF 		bl	__aeabi_ui2d
 2613              	.LVL177:
 2614 0018 0646     		mov	r6, r0
 2615 001a 0F46     		mov	r7, r1
 2616              		.loc 1 653 36 view .LVU646
 2617 001c 264B     		ldr	r3, .L179+16
 2618 001e 1D88     		ldrh	r5, [r3]
 2619 0020 2846     		mov	r0, r5
 2620 0022 FFF7FEFF 		bl	__aeabi_i2d
 2621              	.LVL178:
 2622 0026 20A3     		adr	r3, .L179
 2623 0028 D3E90023 		ldrd	r2, [r3]
 2624 002c FFF7FEFF 		bl	__aeabi_dmul
 2625              	.LVL179:
 2626 0030 0246     		mov	r2, r0
 2627 0032 0B46     		mov	r3, r1
 2628              		.loc 1 653 7 view .LVU647
 2629 0034 3046     		mov	r0, r6
 2630 0036 3946     		mov	r1, r7
 2631 0038 FFF7FEFF 		bl	__aeabi_dcmpge
 2632              	.LVL180:
 2633 003c 20B1     		cbz	r0, .L172
 2634              		.loc 1 653 41 discriminator 1 view .LVU648
 2635 003e AC42     		cmp	r4, r5
 2636 0040 02D2     		bcs	.L172
 654:Src/foc.c     ****         Music_Info.stop=1;
 2637              		.loc 1 654 9 is_stmt 1 view .LVU649
 2638              		.loc 1 654 24 is_stmt 0 view .LVU650
 2639 0042 1C4B     		ldr	r3, .L179+12
 2640 0044 0122     		movs	r2, #1
 2641 0046 1A74     		strb	r2, [r3, #16]
 2642              	.L172:
 655:Src/foc.c     ****     }
 656:Src/foc.c     **** 
 657:Src/foc.c     ****     if(Music_Info.ms_cnt>=next_time){  // 750*1/4
 2643              		.loc 1 657 5 is_stmt 1 view .LVU651
 2644              		.loc 1 657 7 is_stmt 0 view .LVU652
 2645 0048 AC42     		cmp	r4, r5
 2646 004a 00D2     		bcs	.L177
 2647              	.L170:
 658:Src/foc.c     ****         Music_Info.ms_cnt=0;    // ‰ª•‰∏ã‰ª£Á†Å1sÊâßË°å‰∏ÄÊ¨°
 659:Src/foc.c     ****         Music_Info.stop=0;
 660:Src/foc.c     ****         Music_Info.time=1.0f;
 661:Src/foc.c     **** 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 68


 662:Src/foc.c     ****         uint16_t temp=Music_Song[Music_Info.cnt];
 663:Src/foc.c     ****         note=(uint16_t)Music_Get_Note(temp,&Music_Info.time);
 664:Src/foc.c     **** 
 665:Src/foc.c     ****         Music_Play_Note(note); 
 666:Src/foc.c     ****         next_time=500*Music_Info.time;
 667:Src/foc.c     ****         if(Music_Info.cnt==sizeof(Music_Song)/sizeof(uint16_t)-1){
 668:Src/foc.c     ****             Board_Mode=STOP_MODE;
 669:Src/foc.c     ****         }else{
 670:Src/foc.c     ****             Music_Info.cnt++;
 671:Src/foc.c     ****         }
 672:Src/foc.c     ****     }
 673:Src/foc.c     **** }
 2648              		.loc 1 673 1 view .LVU653
 2649 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2650              	.L177:
 2651              	.LBB7:
 658:Src/foc.c     ****         Music_Info.ms_cnt=0;    // ‰ª•‰∏ã‰ª£Á†Å1sÊâßË°å‰∏ÄÊ¨°
 2652              		.loc 1 658 9 is_stmt 1 view .LVU654
 658:Src/foc.c     ****         Music_Info.ms_cnt=0;    // ‰ª•‰∏ã‰ª£Á†Å1sÊâßË°å‰∏ÄÊ¨°
 2653              		.loc 1 658 26 is_stmt 0 view .LVU655
 2654 004e 194C     		ldr	r4, .L179+12
 2655 0050 0023     		movs	r3, #0
 2656 0052 2360     		str	r3, [r4]
 659:Src/foc.c     ****         Music_Info.time=1.0f;
 2657              		.loc 1 659 9 is_stmt 1 view .LVU656
 659:Src/foc.c     ****         Music_Info.time=1.0f;
 2658              		.loc 1 659 24 is_stmt 0 view .LVU657
 2659 0054 2374     		strb	r3, [r4, #16]
 660:Src/foc.c     **** 
 2660              		.loc 1 660 9 is_stmt 1 view .LVU658
 660:Src/foc.c     **** 
 2661              		.loc 1 660 24 is_stmt 0 view .LVU659
 2662 0056 4FF07E53 		mov	r3, #1065353216
 2663 005a E360     		str	r3, [r4, #12]	@ float
 662:Src/foc.c     ****         note=(uint16_t)Music_Get_Note(temp,&Music_Info.time);
 2664              		.loc 1 662 9 is_stmt 1 view .LVU660
 662:Src/foc.c     ****         note=(uint16_t)Music_Get_Note(temp,&Music_Info.time);
 2665              		.loc 1 662 44 is_stmt 0 view .LVU661
 2666 005c 6268     		ldr	r2, [r4, #4]
 2667              	.LVL181:
 663:Src/foc.c     **** 
 2668              		.loc 1 663 9 is_stmt 1 view .LVU662
 663:Src/foc.c     **** 
 2669              		.loc 1 663 24 is_stmt 0 view .LVU663
 2670 005e 04F10C01 		add	r1, r4, #12
 2671 0062 164B     		ldr	r3, .L179+20
 2672 0064 33F81200 		ldrh	r0, [r3, r2, lsl #1]
 2673              	.LVL182:
 663:Src/foc.c     **** 
 2674              		.loc 1 663 24 view .LVU664
 2675 0068 FFF7FEFF 		bl	Music_Get_Note
 2676              	.LVL183:
 663:Src/foc.c     **** 
 2677              		.loc 1 663 13 view .LVU665
 2678 006c BCEEC00A 		vcvt.u32.f32	s0, s0
 2679              	.LVL184:
 665:Src/foc.c     ****         next_time=500*Music_Info.time;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 69


 2680              		.loc 1 665 9 is_stmt 1 view .LVU666
 2681 0070 10EE103A 		vmov	r3, s0	@ int
 2682 0074 98B2     		uxth	r0, r3
 2683 0076 FFF7FEFF 		bl	Music_Play_Note
 2684              	.LVL185:
 666:Src/foc.c     ****         if(Music_Info.cnt==sizeof(Music_Song)/sizeof(uint16_t)-1){
 2685              		.loc 1 666 9 view .LVU667
 666:Src/foc.c     ****         if(Music_Info.cnt==sizeof(Music_Song)/sizeof(uint16_t)-1){
 2686              		.loc 1 666 33 is_stmt 0 view .LVU668
 2687 007a D4ED037A 		vldr.32	s15, [r4, #12]
 666:Src/foc.c     ****         if(Music_Info.cnt==sizeof(Music_Song)/sizeof(uint16_t)-1){
 2688              		.loc 1 666 22 view .LVU669
 2689 007e 9FED107A 		vldr.32	s14, .L179+24
 2690 0082 67EE877A 		vmul.f32	s15, s15, s14
 666:Src/foc.c     ****         if(Music_Info.cnt==sizeof(Music_Song)/sizeof(uint16_t)-1){
 2691              		.loc 1 666 18 view .LVU670
 2692 0086 FCEEE77A 		vcvt.u32.f32	s15, s15
 2693 008a 0B4B     		ldr	r3, .L179+16
 2694 008c 17EE902A 		vmov	r2, s15	@ int
 2695 0090 1A80     		strh	r2, [r3]	@ movhi
 667:Src/foc.c     ****             Board_Mode=STOP_MODE;
 2696              		.loc 1 667 9 is_stmt 1 view .LVU671
 667:Src/foc.c     ****             Board_Mode=STOP_MODE;
 2697              		.loc 1 667 22 is_stmt 0 view .LVU672
 2698 0092 6368     		ldr	r3, [r4, #4]
 667:Src/foc.c     ****             Board_Mode=STOP_MODE;
 2699              		.loc 1 667 11 view .LVU673
 2700 0094 5E2B     		cmp	r3, #94
 2701 0096 03D0     		beq	.L178
 670:Src/foc.c     ****         }
 2702              		.loc 1 670 13 is_stmt 1 view .LVU674
 670:Src/foc.c     ****         }
 2703              		.loc 1 670 27 is_stmt 0 view .LVU675
 2704 0098 0133     		adds	r3, r3, #1
 2705 009a 064A     		ldr	r2, .L179+12
 2706 009c 5360     		str	r3, [r2, #4]
 2707 009e D5E7     		b	.L170
 2708              	.L178:
 668:Src/foc.c     ****         }else{
 2709              		.loc 1 668 13 is_stmt 1 view .LVU676
 668:Src/foc.c     ****         }else{
 2710              		.loc 1 668 23 is_stmt 0 view .LVU677
 2711 00a0 034B     		ldr	r3, .L179+8
 2712 00a2 0022     		movs	r2, #0
 2713 00a4 1A70     		strb	r2, [r3]
 2714 00a6 D1E7     		b	.L170
 2715              	.L180:
 2716              		.align	3
 2717              	.L179:
 2718 00a8 33333333 		.word	858993459
 2719 00ac 3333EB3F 		.word	1072378675
 2720 00b0 00000000 		.word	Board_Mode
 2721 00b4 00000000 		.word	Music_Info
 2722 00b8 00000000 		.word	.LANCHOR17
 2723 00bc 00000000 		.word	.LANCHOR18
 2724 00c0 0000FA43 		.word	1140457472
 2725              	.LBE7:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 70


 2726              		.cfi_endproc
 2727              	.LFE190:
 2729              		.comm	Music_Info,20,4
 2730              		.global	Music_Song
 2731              		.global	Music_Freqs
 2732              		.comm	Measure_R_Info,24,4
 2733              		.global	Position_Offset
 2734              		.comm	Position_Degree,4,4
 2735              		.global	RPS
 2736              		.global	Uvects
 2737              		.global	U7
 2738              		.global	U5
 2739              		.global	U1
 2740              		.global	U3
 2741              		.global	U2
 2742              		.global	U6
 2743              		.global	U4
 2744              		.global	U0
 2745              		.global	Motor
 2746              		.comm	Test_Direction_Info,12,4
 2747              		.comm	Board_Mode,1,1
 2748              		.comm	Ibeta,4,4
 2749              		.comm	Ialpha,4,4
 2750              		.comm	ADC_Values_Raw2,8,4
 2751              		.comm	ADC_Values_Raw,8,4
 2752              		.section	.bss.CCR_Dutys.12945,"aw",%nobits
 2753              		.align	2
 2754              		.set	.LANCHOR11,. + 0
 2757              	CCR_Dutys.12945:
 2758 0000 00000000 		.space	12
 2758      00000000 
 2758      00000000 
 2759              		.section	.bss.U0,"aw",%nobits
 2760              		.align	2
 2761              		.set	.LANCHOR10,. + 0
 2764              	U0:
 2765 0000 00000000 		.space	16
 2765      00000000 
 2765      00000000 
 2765      00000000 
 2766              		.section	.bss.current1.12974,"aw",%nobits
 2767              		.align	2
 2768              		.set	.LANCHOR3,. + 0
 2771              	current1.12974:
 2772 0000 00000000 		.space	4
 2773              		.section	.bss.current2.12975,"aw",%nobits
 2774              		.align	2
 2775              		.set	.LANCHOR4,. + 0
 2778              	current2.12975:
 2779 0000 00000000 		.space	4
 2780              		.section	.bss.first_time.13030,"aw",%nobits
 2781              		.set	.LANCHOR16,. + 0
 2784              	first_time.13030:
 2785 0000 00       		.space	1
 2786              		.section	.bss.theta.12953,"aw",%nobits
 2787              		.align	2
 2788              		.set	.LANCHOR14,. + 0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 71


 2791              	theta.12953:
 2792 0000 00000000 		.space	4
 2793              		.section	.data.Motor,"aw"
 2794              		.align	2
 2795              		.set	.LANCHOR13,. + 0
 2798              	Motor:
 2799 0000 07       		.byte	7
 2800 0001 000000   		.space	3
 2801 0004 00000000 		.word	0
 2802 0008 00000000 		.word	0
 2803 000c 00000000 		.space	4
 2804              		.section	.data.Music_Freqs,"aw"
 2805              		.align	2
 2806              		.set	.LANCHOR15,. + 0
 2809              	Music_Freqs:
 2810 0000 204E     		.short	20000
 2811 0002 0501     		.short	261
 2812 0004 2501     		.short	293
 2813 0006 4901     		.short	329
 2814 0008 5D01     		.short	349
 2815 000a 8801     		.short	392
 2816 000c B801     		.short	440
 2817 000e ED01     		.short	493
 2818              		.section	.data.Music_Song,"aw"
 2819              		.align	2
 2820              		.set	.LANCHOR18,. + 0
 2823              	Music_Song:
 2824 0000 0308     		.short	2051
 2825 0002 0308     		.short	2051
 2826 0004 0308     		.short	2051
 2827 0006 0208     		.short	2050
 2828 0008 0302     		.short	515
 2829 000a 0208     		.short	2050
 2830 000c 0308     		.short	2051
 2831 000e 0208     		.short	2050
 2832 0010 0208     		.short	2050
 2833 0012 0634     		.short	13318
 2834 0014 0638     		.short	14342
 2835 0016 0738     		.short	14343
 2836 0018 0104     		.short	1025
 2837 001a 0208     		.short	2050
 2838 001c 0108     		.short	2049
 2839 001e 0734     		.short	13319
 2840 0020 0538     		.short	14341
 2841 0022 0631     		.short	12550
 2842 0024 0308     		.short	2051
 2843 0026 0308     		.short	2051
 2844 0028 0308     		.short	2051
 2845 002a 0208     		.short	2050
 2846 002c 0304     		.short	1027
 2847 002e 0608     		.short	2054
 2848 0030 0508     		.short	2053
 2849 0032 0608     		.short	2054
 2850 0034 0508     		.short	2053
 2851 0036 0508     		.short	2053
 2852 0038 0204     		.short	1026
 2853 003a 0208     		.short	2050
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 72


 2854 003c 0308     		.short	2051
 2855 003e 0408     		.short	2052
 2856 0040 0508     		.short	2053
 2857 0042 0408     		.short	2052
 2858 0044 0304     		.short	1027
 2859 0046 0208     		.short	2050
 2860 0048 0301     		.short	259
 2861 004a 0604     		.short	1030
 2862 004c 0738     		.short	14343
 2863 004e 0638     		.short	14342
 2864 0050 0504     		.short	1029
 2865 0052 0308     		.short	2051
 2866 0054 0501     		.short	261
 2867 0056 0308     		.short	2051
 2868 0058 0508     		.short	2053
 2869 005a 0204     		.short	1026
 2870 005c 0608     		.short	2054
 2871 005e 0508     		.short	2053
 2872 0060 0304     		.short	1027
 2873 0062 0208     		.short	2050
 2874 0064 0301     		.short	259
 2875 0066 0204     		.short	1026
 2876 0068 0508     		.short	2053
 2877 006a 0604     		.short	1030
 2878 006c 0104     		.short	1025
 2879 006e 0608     		.short	2054
 2880 0070 0608     		.short	2054
 2881 0072 0604     		.short	1030
 2882 0074 0608     		.short	2054
 2883 0076 0708     		.short	2055
 2884 0078 0114     		.short	5121
 2885 007a 0708     		.short	2055
 2886 007c 0608     		.short	2054
 2887 007e 0704     		.short	1031
 2888 0080 0508     		.short	2053
 2889 0082 0301     		.short	259
 2890 0084 0604     		.short	1030
 2891 0086 0708     		.short	2055
 2892 0088 0608     		.short	2054
 2893 008a 0504     		.short	1029
 2894 008c 0308     		.short	2051
 2895 008e 0501     		.short	261
 2896 0090 0408     		.short	2052
 2897 0092 0508     		.short	2053
 2898 0094 0604     		.short	1030
 2899 0096 0708     		.short	2055
 2900 0098 0608     		.short	2054
 2901 009a 0704     		.short	1031
 2902 009c 0504     		.short	1029
 2903 009e 060F     		.short	3846
 2904 00a0 0301     		.short	259
 2905 00a2 0204     		.short	1026
 2906 00a4 0508     		.short	2053
 2907 00a6 0604     		.short	1030
 2908 00a8 0104     		.short	1025
 2909 00aa 0608     		.short	2054
 2910 00ac 0604     		.short	1030
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 73


 2911 00ae 0608     		.short	2054
 2912 00b0 0708     		.short	2055
 2913 00b2 0114     		.short	5121
 2914 00b4 0708     		.short	2055
 2915 00b6 0608     		.short	2054
 2916 00b8 0704     		.short	1031
 2917 00ba 0508     		.short	2053
 2918 00bc 0601     		.short	262
 2919              		.section	.data.Position_Offset,"aw"
 2920              		.align	2
 2921              		.set	.LANCHOR12,. + 0
 2924              	Position_Offset:
 2925 0000 20CB5743 		.word	1129827104
 2926              		.section	.data.RPS,"aw"
 2927              		.align	2
 2930              	RPS:
 2931 0000 0000C040 		.word	1086324736
 2932              		.section	.data.U1,"aw"
 2933              		.align	2
 2934              		.set	.LANCHOR8,. + 0
 2937              	U1:
 2938 0000 00       		.byte	0
 2939 0001 00       		.byte	0
 2940 0002 01       		.byte	1
 2941 0003 00       		.space	1
 2942 0004 920A8640 		.word	1082526354
 2943 0008 00000000 		.space	8
 2943      00000000 
 2944              		.section	.data.U2,"aw"
 2945              		.align	2
 2946              		.set	.LANCHOR7,. + 0
 2949              	U2:
 2950 0000 00       		.byte	0
 2951 0001 01       		.byte	1
 2952 0002 00       		.byte	0
 2953 0003 00       		.space	1
 2954 0004 920A0640 		.word	1074137746
 2955 0008 00000000 		.space	8
 2955      00000000 
 2956              		.section	.data.U3,"aw"
 2957              		.align	2
 2958              		.set	.LANCHOR0,. + 0
 2961              	U3:
 2962 0000 00       		.byte	0
 2963 0001 01       		.byte	1
 2964 0002 01       		.byte	1
 2965 0003 00       		.space	1
 2966 0004 DB0F4940 		.word	1078530011
 2967 0008 00000000 		.space	8
 2967      00000000 
 2968              		.section	.data.U4,"aw"
 2969              		.align	2
 2970              		.set	.LANCHOR5,. + 0
 2973              	U4:
 2974 0000 01       		.byte	1
 2975 0001 00       		.byte	0
 2976 0002 00       		.byte	0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 74


 2977 0003 00       		.space	1
 2978 0004 00000000 		.word	0
 2979 0008 00000000 		.space	8
 2979      00000000 
 2980              		.section	.data.U5,"aw"
 2981              		.align	2
 2982              		.set	.LANCHOR1,. + 0
 2985              	U5:
 2986 0000 01       		.byte	1
 2987 0001 00       		.byte	0
 2988 0002 01       		.byte	1
 2989 0003 00       		.space	1
 2990 0004 368DA740 		.word	1084722486
 2991 0008 00000000 		.space	8
 2991      00000000 
 2992              		.section	.data.U6,"aw"
 2993              		.align	2
 2994              		.set	.LANCHOR6,. + 0
 2997              	U6:
 2998 0000 01       		.byte	1
 2999 0001 01       		.byte	1
 3000 0002 00       		.byte	0
 3001 0003 00       		.space	1
 3002 0004 920A863F 		.word	1065749138
 3003 0008 00000000 		.space	8
 3003      00000000 
 3004              		.section	.data.U7,"aw"
 3005              		.align	2
 3006              		.set	.LANCHOR9,. + 0
 3009              	U7:
 3010 0000 01       		.byte	1
 3011 0001 01       		.byte	1
 3012 0002 01       		.byte	1
 3013 0003 00       		.space	1
 3014 0004 00000000 		.word	0
 3015 0008 00000000 		.space	8
 3015      00000000 
 3016              		.section	.data.Uvects,"aw"
 3017              		.align	2
 3018              		.set	.LANCHOR2,. + 0
 3021              	Uvects:
 3022 0000 00000000 		.word	U1
 3023 0004 00000000 		.word	U2
 3024 0008 00000000 		.word	U3
 3025 000c 00000000 		.word	U4
 3026 0010 00000000 		.word	U5
 3027 0014 00000000 		.word	U6
 3028              		.section	.data.next_time.13033,"aw"
 3029              		.align	1
 3030              		.set	.LANCHOR17,. + 0
 3033              	next_time.13033:
 3034 0000 EE02     		.short	750
 3035              		.text
 3036              	.Letext0:
 3037              		.file 2 "c:\\arm_gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 3038              		.file 3 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 3039              		.file 4 "Inc/foc.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 75


 3040              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 3041              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 3042              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 3043              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 3044              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 3045              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 3046              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 3047              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 3048              		.file 13 "Inc/tim.h"
 3049              		.file 14 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 3050              		.file 15 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 3051              		.file 16 "c:\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 3052              		.file 17 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 3053              		.file 18 "c:\\arm_gcc\\arm-none-eabi\\include\\math.h"
 3054              		.file 19 "Inc/adc.h"
 3055              		.file 20 "c:\\arm_gcc\\arm-none-eabi\\include\\stdlib.h"
 3056              		.file 21 "mylib/uart_ext.h"
 3057              		.file 22 "Drivers/CMSIS/Include/arm_math.h"
 3058              		.file 23 "mylib/as5047.h"
 3059              		.file 24 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 3060              		.file 25 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim_ex.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 76


DEFINED SYMBOLS
                            *ABS*:00000000 foc.c
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:18     .text.SVPWM_Step:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:25     .text.SVPWM_Step:00000000 SVPWM_Step
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:78     .text.SVPWM_Step:00000058 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:83     .text.Set_Vector:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:89     .text.Set_Vector:00000000 Set_Vector
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:144    .text.Measure_R_20Khz_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:150    .text.Measure_R_20Khz_Handler:00000000 Measure_R_20Khz_Handler
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:250    .text.Measure_R_20Khz_Handler:000000b0 $d
                            *COM*:00000001 Board_Mode
                            *COM*:00000018 Measure_R_Info
                            *COM*:00000008 ADC_Values_Raw2
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:263    .text.UVects_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:269    .text.UVects_Init:00000000 UVects_Init
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:345    .text.UVects_Init:0000003c $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:351    .rodata.Measure_R_MS_Handler.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:361    .text.Measure_R_MS_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:367    .text.Measure_R_MS_Handler:00000000 Measure_R_MS_Handler
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:606    .text.Measure_R_MS_Handler:00000158 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:623    .text.Foc_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:630    .text.Foc_Init:00000000 Foc_Init
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:716    .text.Foc_Init:00000068 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:725    .text.get_area:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:732    .text.get_area:00000000 get_area
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:755    .text.get_area:00000010 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:760    .text.get_area_u:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:767    .text.get_area_u:00000000 get_area_u
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:791    .text.get_area_u:00000010 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:797    .text.get_area_u:00000016 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:909    .text.get_area_u:00000084 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:919    .text.get_t:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:926    .text.get_t:00000000 get_t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1044   .text.get_t:00000098 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1049   .text.get_ccr_duty:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1056   .text.get_ccr_duty:00000000 get_ccr_duty
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1188   .text.get_ccr_duty:000000f0 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1193   .rodata.Set_to_U4.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1197   .text.Set_to_U4:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1204   .text.Set_to_U4:00000000 Set_to_U4
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1283   .text.Set_to_U4:0000006c $d
                            *COM*:00000004 Position_Degree
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1291   .text.SVPWM_Normal_CalT1T2:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1298   .text.SVPWM_Normal_CalT1T2:00000000 SVPWM_Normal_CalT1T2
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1315   .text.SVPWM_Normal_CalT1T2:0000000a $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1321   .text.SVPWM_Normal_CalT1T2:00000010 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1445   .text.SVPWM_Normal_CalT1T2:000000c0 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1453   .text.SVPWM:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1459   .text.SVPWM:00000000 SVPWM
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1563   .text.SVPWM:00000094 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1569   .text.Park_Conv:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1576   .text.Park_Conv:00000000 Park_Conv
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1609   .text.Park_Conv:00000028 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1614   .text.HAL_ADC_ConvCpltCallback:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1621   .text.HAL_ADC_ConvCpltCallback:00000000 HAL_ADC_ConvCpltCallback
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1711   .text.HAL_ADC_ConvCpltCallback:00000074 $d
                            *COM*:00000004 Ibeta
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 77


                            *COM*:00000004 Ialpha
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1724   .text.Foc:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1731   .text.Foc:00000000 Foc
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1813   .text.Foc:00000064 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1822   .text.VF_Openloop_Control:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1829   .text.VF_Openloop_Control:00000000 VF_Openloop_Control
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1907   .text.VF_Openloop_Control:00000074 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1914   .rodata.Test_Direction.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1924   .text.Test_Direction:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:1930   .text.Test_Direction:00000000 Test_Direction
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2044   .text.Test_Direction:0000008c $d
                            *COM*:0000000c Test_Direction_Info
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2056   .text.Set_Sing_Mode:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2063   .text.Set_Sing_Mode:00000000 Set_Sing_Mode
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2086   .text.Set_Sing_Mode:00000010 $d
                            *COM*:00000014 Music_Info
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2092   .text.Music_Get_Note:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2099   .text.Music_Get_Note:00000000 Music_Get_Note
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2146   .text.Music_Get_Note:00000026 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2278   .text.Music_Get_Note:000000a0 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2284   .text.Music_Play_Note:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2291   .text.Music_Play_Note:00000000 Music_Play_Note
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2317   .text.Music_Play_Note:00000014 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2323   .text.Muisc_Play_TIM7_IRQ_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2330   .text.Muisc_Play_TIM7_IRQ_Handler:00000000 Muisc_Play_TIM7_IRQ_Handler
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2393   .text.Muisc_Play_TIM7_IRQ_Handler:00000048 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2404   .text.Theta_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2411   .text.Theta_Handler:00000000 Theta_Handler
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2439   .text.Theta_Handler:0000001e $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2445   .text.Theta_Handler:00000024 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2504   .text.Theta_Handler:0000006c $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2513   .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2520   .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2561   .text.HAL_TIM_PeriodElapsedCallback:0000001c $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2571   .text.Music_Play_Beat:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2578   .text.Music_Play_Beat:00000000 Music_Play_Beat
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2718   .text.Music_Play_Beat:000000a8 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2823   .data.Music_Song:00000000 Music_Song
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2809   .data.Music_Freqs:00000000 Music_Freqs
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2924   .data.Position_Offset:00000000 Position_Offset
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2930   .data.RPS:00000000 RPS
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3021   .data.Uvects:00000000 Uvects
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3009   .data.U7:00000000 U7
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2985   .data.U5:00000000 U5
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2937   .data.U1:00000000 U1
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2961   .data.U3:00000000 U3
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2949   .data.U2:00000000 U2
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2997   .data.U6:00000000 U6
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2973   .data.U4:00000000 U4
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2764   .bss.U0:00000000 U0
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2798   .data.Motor:00000000 Motor
                            *COM*:00000008 ADC_Values_Raw
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2753   .bss.CCR_Dutys.12945:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2757   .bss.CCR_Dutys.12945:00000000 CCR_Dutys.12945
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2760   .bss.U0:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2767   .bss.current1.12974:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2771   .bss.current1.12974:00000000 current1.12974
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s 			page 78


C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2774   .bss.current2.12975:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2778   .bss.current2.12975:00000000 current2.12975
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2784   .bss.first_time.13030:00000000 first_time.13030
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2785   .bss.first_time.13030:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2787   .bss.theta.12953:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2791   .bss.theta.12953:00000000 theta.12953
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2794   .data.Motor:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2805   .data.Music_Freqs:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2819   .data.Music_Song:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2920   .data.Position_Offset:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2927   .data.RPS:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2933   .data.U1:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2945   .data.U2:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2957   .data.U3:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2969   .data.U4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2981   .data.U5:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2993   .data.U6:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3005   .data.U7:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3017   .data.Uvects:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3029   .data.next_time.13033:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:3033   .data.next_time.13033:00000000 next_time.13033
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2161   .text.Music_Get_Note:00000035 $d
C:\Users\ncer\AppData\Local\Temp\cceAQK8f.s:2161   .text.Music_Get_Note:00000036 $t

UNDEFINED SYMBOLS
cosf
sinf
__aeabi_f2d
uprintf_polling
HAL_TIM_PWM_Start
HAL_TIMEx_PWMN_Start
HAL_TIM_Base_Start_IT
HAL_TIM_Base_Start
htim8
htim7
arm_sin_cos_f32
HAL_Delay
uprintf
Get_Position_Rad_Dgree
Init_OK
__aeabi_ui2d
__aeabi_i2d
__aeabi_dmul
__aeabi_dcmpge
