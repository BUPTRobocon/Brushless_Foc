ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"myfunc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_f2d
  18              		.section	.rodata.get_position.str1.4,"aMS",%progbits,1
  19              		.align	2
  20              	.LC0:
  21 0000 506F7369 		.ascii	"Position:%f\015\012\000"
  21      74696F6E 
  21      3A25660D 
  21      0A00
  22              		.section	.text.get_position,"ax",%progbits
  23              		.align	1
  24              		.global	get_position
  25              		.arch armv7e-m
  26              		.syntax unified
  27              		.thumb
  28              		.thumb_func
  29              		.fpu fpv4-sp-d16
  31              	get_position:
  32              	.LVL0:
  33              	.LFB136:
  34              		.file 1 "Src/myfunc.c"
   1:Src/myfunc.c  **** #include "command.h"
   2:Src/myfunc.c  **** #include "uart_ext.h"
   3:Src/myfunc.c  **** #include "cmd_fun.h"
   4:Src/myfunc.c  **** 
   5:Src/myfunc.c  **** typedef struct{
   6:Src/myfunc.c  ****   char * var_name;
   7:Src/myfunc.c  ****   void * value_ptr;
   8:Src/myfunc.c  **** }Var_Edit_Struct;
   9:Src/myfunc.c  **** 
  10:Src/myfunc.c  **** Var_Edit_Struct Var_List[10]={
  11:Src/myfunc.c  ****   //{"first",&First_Time_Check}
  12:Src/myfunc.c  ****   0
  13:Src/myfunc.c  **** };
  14:Src/myfunc.c  **** 
  15:Src/myfunc.c  **** static void test(int arg_num,char **string_prams,float * arg){
  16:Src/myfunc.c  ****   int i;
  17:Src/myfunc.c  ****   uprintf("this is testkk\r\n");
  18:Src/myfunc.c  ****   uprintf("i get %d args\r\n",arg_num);
  19:Src/myfunc.c  ****   for(i=0;i<(arg_num&0xFF);++i){
  20:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
  21:Src/myfunc.c  ****   }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 2


  22:Src/myfunc.c  ****   for(i=0;i<(arg_num>>8);++i){
  23:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
  24:Src/myfunc.c  ****   }
  25:Src/myfunc.c  **** }
  26:Src/myfunc.c  **** 
  27:Src/myfunc.c  **** void set_val(int arg_num,char ** s,float * args){
  28:Src/myfunc.c  ****   void * edit_value;
  29:Src/myfunc.c  ****   if(arg_num!=0x0201){
  30:Src/myfunc.c  ****     uprintf("error arg_num!\r\n");
  31:Src/myfunc.c  ****     return ;
  32:Src/myfunc.c  ****   }
  33:Src/myfunc.c  **** 
  34:Src/myfunc.c  ****   for(int i=0;i<sizeof(Var_List)/sizeof(Var_Edit_Struct);++i){
  35:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
  36:Src/myfunc.c  ****       edit_value=Var_List[i].value_ptr;
  37:Src/myfunc.c  ****       break;
  38:Src/myfunc.c  ****     }
  39:Src/myfunc.c  ****   }
  40:Src/myfunc.c  ****   
  41:Src/myfunc.c  ****   if(compare_string(s[1],"u8")){
  42:Src/myfunc.c  ****     *(uint8_t *)edit_value=(uint8_t)args[0];
  43:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(uint8_t *)edit_value);  
  44:Src/myfunc.c  ****   }else if(compare_string(s[1],"int")){
  45:Src/myfunc.c  ****     *(int16_t *)edit_value=(int16_t)args[0];
  46:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(int16_t *)edit_value);
  47:Src/myfunc.c  ****   }else if(compare_string(s[1],"f")){
  48:Src/myfunc.c  ****     *(float *)edit_value=args[0];
  49:Src/myfunc.c  ****     uprintf("ok set %s = %f\r\n",s[0],*(float *)edit_value);
  50:Src/myfunc.c  ****   }
  51:Src/myfunc.c  **** }
  52:Src/myfunc.c  **** 
  53:Src/myfunc.c  **** 
  54:Src/myfunc.c  **** 
  55:Src/myfunc.c  **** 
  56:Src/myfunc.c  **** /*
  57:Src/myfunc.c  **** 下面定义用户需要的函数
  58:Src/myfunc.c  **** 
  59:Src/myfunc.c  **** */
  60:Src/myfunc.c  **** #include "foc.h"
  61:Src/myfunc.c  **** void set_to_u4(int arg_num,char ** s,float * args){
  62:Src/myfunc.c  ****   uint8_t temp_t;
  63:Src/myfunc.c  ****   if(arg_num!=0x0001){
  64:Src/myfunc.c  ****     return ;
  65:Src/myfunc.c  ****   }
  66:Src/myfunc.c  ****   temp_t=(uint8_t)args[0];
  67:Src/myfunc.c  ****   Set_to_U4(temp_t);
  68:Src/myfunc.c  ****   HAL_Delay(5);
  69:Src/myfunc.c  ****   uprintf("OK set to us and keep %d ms\r\n",temp_t);
  70:Src/myfunc.c  **** }
  71:Src/myfunc.c  **** 
  72:Src/myfunc.c  **** void get_position(int arg_num,char **s,float *args){
  35              		.loc 1 72 52 view -0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 0
  38              		@ frame_needed = 0, uses_anonymous_args = 0
  39              		.loc 1 72 52 is_stmt 0 view .LVU1
  40 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 3


  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 8
  43              		.cfi_offset 3, -8
  44              		.cfi_offset 14, -4
  73:Src/myfunc.c  ****   uprintf("Position:%f\r\n",Position_Degree);
  45              		.loc 1 73 3 is_stmt 1 view .LVU2
  46 0002 054B     		ldr	r3, .L3
  47 0004 1868     		ldr	r0, [r3]	@ float
  48              	.LVL1:
  49              		.loc 1 73 3 is_stmt 0 view .LVU3
  50 0006 FFF7FEFF 		bl	__aeabi_f2d
  51              	.LVL2:
  52              		.loc 1 73 3 view .LVU4
  53 000a 0246     		mov	r2, r0
  54 000c 0B46     		mov	r3, r1
  55 000e 0348     		ldr	r0, .L3+4
  56 0010 FFF7FEFF 		bl	uprintf
  57              	.LVL3:
  74:Src/myfunc.c  ****   return ;
  58              		.loc 1 74 3 is_stmt 1 view .LVU5
  75:Src/myfunc.c  **** }
  59              		.loc 1 75 1 is_stmt 0 view .LVU6
  60 0014 08BD     		pop	{r3, pc}
  61              	.L4:
  62 0016 00BF     		.align	2
  63              	.L3:
  64 0018 00000000 		.word	Position_Degree
  65 001c 00000000 		.word	.LC0
  66              		.cfi_endproc
  67              	.LFE136:
  69              		.section	.rodata.test.str1.4,"aMS",%progbits,1
  70              		.align	2
  71              	.LC1:
  72 0000 74686973 		.ascii	"this is testkk\015\012\000"
  72      20697320 
  72      74657374 
  72      6B6B0D0A 
  72      00
  73 0011 000000   		.align	2
  74              	.LC2:
  75 0014 69206765 		.ascii	"i get %d args\015\012\000"
  75      74202564 
  75      20617267 
  75      730D0A00 
  76              		.align	2
  77              	.LC3:
  78 0024 6F6E6520 		.ascii	"one is %f\015\012\000"
  78      69732025 
  78      660D0A00 
  79              		.align	2
  80              	.LC4:
  81 0030 73747269 		.ascii	"string_prams is %s\015\012\000"
  81      6E675F70 
  81      72616D73 
  81      20697320 
  81      25730D0A 
  82              		.section	.text.test,"ax",%progbits
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 4


  83              		.align	1
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv4-sp-d16
  89              	test:
  90              	.LVL4:
  91              	.LFB133:
  15:Src/myfunc.c  ****   int i;
  92              		.loc 1 15 62 is_stmt 1 view -0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 0
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  15:Src/myfunc.c  ****   int i;
  96              		.loc 1 15 62 is_stmt 0 view .LVU8
  97 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  98              	.LCFI1:
  99              		.cfi_def_cfa_offset 24
 100              		.cfi_offset 3, -24
 101              		.cfi_offset 4, -20
 102              		.cfi_offset 5, -16
 103              		.cfi_offset 6, -12
 104              		.cfi_offset 7, -8
 105              		.cfi_offset 14, -4
 106 0002 0546     		mov	r5, r0
 107 0004 0E46     		mov	r6, r1
 108 0006 1746     		mov	r7, r2
  16:Src/myfunc.c  ****   uprintf("this is testkk\r\n");
 109              		.loc 1 16 3 is_stmt 1 view .LVU9
  17:Src/myfunc.c  ****   uprintf("i get %d args\r\n",arg_num);
 110              		.loc 1 17 3 view .LVU10
 111 0008 1148     		ldr	r0, .L12
 112              	.LVL5:
  17:Src/myfunc.c  ****   uprintf("i get %d args\r\n",arg_num);
 113              		.loc 1 17 3 is_stmt 0 view .LVU11
 114 000a FFF7FEFF 		bl	uprintf
 115              	.LVL6:
  18:Src/myfunc.c  ****   for(i=0;i<(arg_num&0xFF);++i){
 116              		.loc 1 18 3 is_stmt 1 view .LVU12
 117 000e 2946     		mov	r1, r5
 118 0010 1048     		ldr	r0, .L12+4
 119 0012 FFF7FEFF 		bl	uprintf
 120              	.LVL7:
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 121              		.loc 1 19 3 view .LVU13
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 122              		.loc 1 19 8 is_stmt 0 view .LVU14
 123 0016 0024     		movs	r4, #0
 124              	.LVL8:
 125              	.L6:
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 126              		.loc 1 19 11 is_stmt 1 discriminator 1 view .LVU15
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 127              		.loc 1 19 21 is_stmt 0 discriminator 1 view .LVU16
 128 0018 EBB2     		uxtb	r3, r5
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 129              		.loc 1 19 3 discriminator 1 view .LVU17
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 5


 130 001a A342     		cmp	r3, r4
 131 001c 0BDD     		ble	.L11
  20:Src/myfunc.c  ****   }
 132              		.loc 1 20 5 is_stmt 1 discriminator 3 view .LVU18
  20:Src/myfunc.c  ****   }
 133              		.loc 1 20 32 is_stmt 0 discriminator 3 view .LVU19
 134 001e 07EB8403 		add	r3, r7, r4, lsl #2
  20:Src/myfunc.c  ****   }
 135              		.loc 1 20 5 discriminator 3 view .LVU20
 136 0022 1868     		ldr	r0, [r3]	@ float
 137 0024 FFF7FEFF 		bl	__aeabi_f2d
 138              	.LVL9:
 139 0028 0246     		mov	r2, r0
 140 002a 0B46     		mov	r3, r1
 141 002c 0A48     		ldr	r0, .L12+8
 142 002e FFF7FEFF 		bl	uprintf
 143              	.LVL10:
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 144              		.loc 1 19 28 is_stmt 1 discriminator 3 view .LVU21
 145 0032 0134     		adds	r4, r4, #1
 146              	.LVL11:
  19:Src/myfunc.c  ****     uprintf("one is %f\r\n",arg[i]);
 147              		.loc 1 19 28 is_stmt 0 discriminator 3 view .LVU22
 148 0034 F0E7     		b	.L6
 149              	.L11:
  22:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
 150              		.loc 1 22 8 view .LVU23
 151 0036 0024     		movs	r4, #0
 152              	.LVL12:
  22:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
 153              		.loc 1 22 8 view .LVU24
 154 0038 05E0     		b	.L8
 155              	.LVL13:
 156              	.L9:
  23:Src/myfunc.c  ****   }
 157              		.loc 1 23 5 is_stmt 1 discriminator 3 view .LVU25
 158 003a 56F82410 		ldr	r1, [r6, r4, lsl #2]
 159 003e 0748     		ldr	r0, .L12+12
 160 0040 FFF7FEFF 		bl	uprintf
 161              	.LVL14:
  22:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
 162              		.loc 1 22 26 discriminator 3 view .LVU26
 163 0044 0134     		adds	r4, r4, #1
 164              	.LVL15:
 165              	.L8:
  22:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
 166              		.loc 1 22 11 discriminator 1 view .LVU27
  22:Src/myfunc.c  ****     uprintf("string_prams is %s\r\n",string_prams[i]);
 167              		.loc 1 22 3 is_stmt 0 discriminator 1 view .LVU28
 168 0046 B4EB252F 		cmp	r4, r5, asr #8
 169 004a F6DB     		blt	.L9
  25:Src/myfunc.c  **** 
 170              		.loc 1 25 1 view .LVU29
 171 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 172              	.LVL16:
 173              	.L13:
  25:Src/myfunc.c  **** 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 6


 174              		.loc 1 25 1 view .LVU30
 175 004e 00BF     		.align	2
 176              	.L12:
 177 0050 00000000 		.word	.LC1
 178 0054 14000000 		.word	.LC2
 179 0058 24000000 		.word	.LC3
 180 005c 30000000 		.word	.LC4
 181              		.cfi_endproc
 182              	.LFE133:
 184              		.section	.rodata.set_to_u4.str1.4,"aMS",%progbits,1
 185              		.align	2
 186              	.LC5:
 187 0000 4F4B2073 		.ascii	"OK set to us and keep %d ms\015\012\000"
 187      65742074 
 187      6F207573 
 187      20616E64 
 187      206B6565 
 188              		.section	.text.set_to_u4,"ax",%progbits
 189              		.align	1
 190              		.global	set_to_u4
 191              		.syntax unified
 192              		.thumb
 193              		.thumb_func
 194              		.fpu fpv4-sp-d16
 196              	set_to_u4:
 197              	.LVL17:
 198              	.LFB135:
  61:Src/myfunc.c  ****   uint8_t temp_t;
 199              		.loc 1 61 51 is_stmt 1 view -0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 8
 202              		@ frame_needed = 0, uses_anonymous_args = 0
  62:Src/myfunc.c  ****   if(arg_num!=0x0001){
 203              		.loc 1 62 3 view .LVU32
  63:Src/myfunc.c  ****     return ;
 204              		.loc 1 63 3 view .LVU33
  63:Src/myfunc.c  ****     return ;
 205              		.loc 1 63 5 is_stmt 0 view .LVU34
 206 0000 0128     		cmp	r0, #1
 207 0002 00D0     		beq	.L20
 208 0004 7047     		bx	lr
 209              	.L20:
  61:Src/myfunc.c  ****   uint8_t temp_t;
 210              		.loc 1 61 51 view .LVU35
 211 0006 10B5     		push	{r4, lr}
 212              	.LCFI2:
 213              		.cfi_def_cfa_offset 8
 214              		.cfi_offset 4, -8
 215              		.cfi_offset 14, -4
 216 0008 82B0     		sub	sp, sp, #8
 217              	.LCFI3:
 218              		.cfi_def_cfa_offset 16
  66:Src/myfunc.c  ****   Set_to_U4(temp_t);
 219              		.loc 1 66 3 is_stmt 1 view .LVU36
  66:Src/myfunc.c  ****   Set_to_U4(temp_t);
 220              		.loc 1 66 23 is_stmt 0 view .LVU37
 221 000a D2ED007A 		vldr.32	s15, [r2]
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 7


  66:Src/myfunc.c  ****   Set_to_U4(temp_t);
 222              		.loc 1 66 9 view .LVU38
 223 000e FCEEE77A 		vcvt.u32.f32	s15, s15
 224 0012 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 225 0016 9DF80440 		ldrb	r4, [sp, #4]	@ zero_extendqisi2
 226              	.LVL18:
  67:Src/myfunc.c  ****   HAL_Delay(5);
 227              		.loc 1 67 3 is_stmt 1 view .LVU39
 228 001a 2046     		mov	r0, r4
 229              	.LVL19:
  67:Src/myfunc.c  ****   HAL_Delay(5);
 230              		.loc 1 67 3 is_stmt 0 view .LVU40
 231 001c FFF7FEFF 		bl	Set_to_U4
 232              	.LVL20:
  68:Src/myfunc.c  ****   uprintf("OK set to us and keep %d ms\r\n",temp_t);
 233              		.loc 1 68 3 is_stmt 1 view .LVU41
 234 0020 0520     		movs	r0, #5
 235 0022 FFF7FEFF 		bl	HAL_Delay
 236              	.LVL21:
  69:Src/myfunc.c  **** }
 237              		.loc 1 69 3 view .LVU42
 238 0026 2146     		mov	r1, r4
 239 0028 0248     		ldr	r0, .L21
 240 002a FFF7FEFF 		bl	uprintf
 241              	.LVL22:
  70:Src/myfunc.c  **** 
 242              		.loc 1 70 1 is_stmt 0 view .LVU43
 243 002e 02B0     		add	sp, sp, #8
 244              	.LCFI4:
 245              		.cfi_def_cfa_offset 8
 246              		@ sp needed
 247 0030 10BD     		pop	{r4, pc}
 248              	.LVL23:
 249              	.L22:
  70:Src/myfunc.c  **** 
 250              		.loc 1 70 1 view .LVU44
 251 0032 00BF     		.align	2
 252              	.L21:
 253 0034 00000000 		.word	.LC5
 254              		.cfi_endproc
 255              	.LFE135:
 257              		.section	.rodata.set_val.str1.4,"aMS",%progbits,1
 258              		.align	2
 259              	.LC6:
 260 0000 6572726F 		.ascii	"error arg_num!\015\012\000"
 260      72206172 
 260      675F6E75 
 260      6D210D0A 
 260      00
 261 0011 000000   		.align	2
 262              	.LC7:
 263 0014 753800   		.ascii	"u8\000"
 264 0017 00       		.align	2
 265              	.LC8:
 266 0018 6F6B2073 		.ascii	"ok set %s = %d\015\012\000"
 266      65742025 
 266      73203D20 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 8


 266      25640D0A 
 266      00
 267 0029 000000   		.align	2
 268              	.LC9:
 269 002c 696E7400 		.ascii	"int\000"
 270              		.align	2
 271              	.LC10:
 272 0030 6600     		.ascii	"f\000"
 273 0032 0000     		.align	2
 274              	.LC11:
 275 0034 6F6B2073 		.ascii	"ok set %s = %f\015\012\000"
 275      65742025 
 275      73203D20 
 275      25660D0A 
 275      00
 276              		.section	.text.set_val,"ax",%progbits
 277              		.align	1
 278              		.global	set_val
 279              		.syntax unified
 280              		.thumb
 281              		.thumb_func
 282              		.fpu fpv4-sp-d16
 284              	set_val:
 285              	.LVL24:
 286              	.LFB134:
  27:Src/myfunc.c  ****   void * edit_value;
 287              		.loc 1 27 49 is_stmt 1 view -0
 288              		.cfi_startproc
 289              		@ args = 0, pretend = 0, frame = 8
 290              		@ frame_needed = 0, uses_anonymous_args = 0
  27:Src/myfunc.c  ****   void * edit_value;
 291              		.loc 1 27 49 is_stmt 0 view .LVU46
 292 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 293              	.LCFI5:
 294              		.cfi_def_cfa_offset 20
 295              		.cfi_offset 4, -20
 296              		.cfi_offset 5, -16
 297              		.cfi_offset 6, -12
 298              		.cfi_offset 7, -8
 299              		.cfi_offset 14, -4
 300 0002 83B0     		sub	sp, sp, #12
 301              	.LCFI6:
 302              		.cfi_def_cfa_offset 32
  28:Src/myfunc.c  ****   if(arg_num!=0x0201){
 303              		.loc 1 28 3 is_stmt 1 view .LVU47
  29:Src/myfunc.c  ****     uprintf("error arg_num!\r\n");
 304              		.loc 1 29 3 view .LVU48
  29:Src/myfunc.c  ****     uprintf("error arg_num!\r\n");
 305              		.loc 1 29 5 is_stmt 0 view .LVU49
 306 0004 40F20123 		movw	r3, #513
 307 0008 9842     		cmp	r0, r3
 308 000a 0DD1     		bne	.L33
 309 000c 0D46     		mov	r5, r1
 310 000e 1746     		mov	r7, r2
 311              	.LBB2:
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 312              		.loc 1 34 11 view .LVU50
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 9


 313 0010 0024     		movs	r4, #0
 314              	.LVL25:
 315              	.L24:
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 316              		.loc 1 34 15 is_stmt 1 discriminator 1 view .LVU51
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 317              		.loc 1 34 3 is_stmt 0 discriminator 1 view .LVU52
 318 0012 092C     		cmp	r4, #9
 319 0014 10D8     		bhi	.L27
  35:Src/myfunc.c  ****       edit_value=Var_List[i].value_ptr;
 320              		.loc 1 35 5 is_stmt 1 view .LVU53
  35:Src/myfunc.c  ****       edit_value=Var_List[i].value_ptr;
 321              		.loc 1 35 8 is_stmt 0 view .LVU54
 322 0016 2968     		ldr	r1, [r5]
 323 0018 234B     		ldr	r3, .L35
 324 001a 53F83400 		ldr	r0, [r3, r4, lsl #3]
 325 001e FFF7FEFF 		bl	compare_string
 326              	.LVL26:
  35:Src/myfunc.c  ****       edit_value=Var_List[i].value_ptr;
 327              		.loc 1 35 7 view .LVU55
 328 0022 28B9     		cbnz	r0, .L34
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 329              		.loc 1 34 58 is_stmt 1 discriminator 2 view .LVU56
 330 0024 0134     		adds	r4, r4, #1
 331              	.LVL27:
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 332              		.loc 1 34 58 is_stmt 0 discriminator 2 view .LVU57
 333 0026 F4E7     		b	.L24
 334              	.LVL28:
 335              	.L33:
  34:Src/myfunc.c  ****     if(compare_string(Var_List[i].var_name,s[0])){
 336              		.loc 1 34 58 discriminator 2 view .LVU58
 337              	.LBE2:
  30:Src/myfunc.c  ****     return ;
 338              		.loc 1 30 5 is_stmt 1 view .LVU59
 339 0028 2048     		ldr	r0, .L35+4
 340              	.LVL29:
  30:Src/myfunc.c  ****     return ;
 341              		.loc 1 30 5 is_stmt 0 view .LVU60
 342 002a FFF7FEFF 		bl	uprintf
 343              	.LVL30:
  31:Src/myfunc.c  ****   }
 344              		.loc 1 31 5 is_stmt 1 view .LVU61
 345 002e 15E0     		b	.L23
 346              	.LVL31:
 347              	.L34:
 348              	.LBB3:
  36:Src/myfunc.c  ****       break;
 349              		.loc 1 36 7 view .LVU62
  36:Src/myfunc.c  ****       break;
 350              		.loc 1 36 17 is_stmt 0 view .LVU63
 351 0030 1D4B     		ldr	r3, .L35
 352 0032 03EBC404 		add	r4, r3, r4, lsl #3
 353              	.LVL32:
  36:Src/myfunc.c  ****       break;
 354              		.loc 1 36 17 view .LVU64
 355 0036 6668     		ldr	r6, [r4, #4]
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 10


 356              	.LVL33:
  37:Src/myfunc.c  ****     }
 357              		.loc 1 37 7 is_stmt 1 view .LVU65
 358              	.L27:
  37:Src/myfunc.c  ****     }
 359              		.loc 1 37 7 is_stmt 0 view .LVU66
 360              	.LBE3:
  41:Src/myfunc.c  ****     *(uint8_t *)edit_value=(uint8_t)args[0];
 361              		.loc 1 41 3 is_stmt 1 view .LVU67
  41:Src/myfunc.c  ****     *(uint8_t *)edit_value=(uint8_t)args[0];
 362              		.loc 1 41 6 is_stmt 0 view .LVU68
 363 0038 1D49     		ldr	r1, .L35+8
 364 003a 6868     		ldr	r0, [r5, #4]
 365 003c FFF7FEFF 		bl	compare_string
 366              	.LVL34:
  41:Src/myfunc.c  ****     *(uint8_t *)edit_value=(uint8_t)args[0];
 367              		.loc 1 41 5 view .LVU69
 368 0040 70B1     		cbz	r0, .L29
  42:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(uint8_t *)edit_value);  
 369              		.loc 1 42 5 is_stmt 1 view .LVU70
  42:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(uint8_t *)edit_value);  
 370              		.loc 1 42 41 is_stmt 0 view .LVU71
 371 0042 D7ED007A 		vldr.32	s15, [r7]
  42:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(uint8_t *)edit_value);  
 372              		.loc 1 42 28 view .LVU72
 373 0046 FCEEE77A 		vcvt.u32.f32	s15, s15
 374 004a CDED017A 		vstr.32	s15, [sp, #4]	@ int
 375 004e 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
  42:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(uint8_t *)edit_value);  
 376              		.loc 1 42 27 view .LVU73
 377 0052 3270     		strb	r2, [r6]
  43:Src/myfunc.c  ****   }else if(compare_string(s[1],"int")){
 378              		.loc 1 43 5 is_stmt 1 view .LVU74
 379 0054 2968     		ldr	r1, [r5]
 380 0056 1748     		ldr	r0, .L35+12
 381 0058 FFF7FEFF 		bl	uprintf
 382              	.LVL35:
 383              	.L23:
  51:Src/myfunc.c  **** 
 384              		.loc 1 51 1 is_stmt 0 view .LVU75
 385 005c 03B0     		add	sp, sp, #12
 386              	.LCFI7:
 387              		.cfi_remember_state
 388              		.cfi_def_cfa_offset 20
 389              		@ sp needed
 390 005e F0BD     		pop	{r4, r5, r6, r7, pc}
 391              	.LVL36:
 392              	.L29:
 393              	.LCFI8:
 394              		.cfi_restore_state
  44:Src/myfunc.c  ****     *(int16_t *)edit_value=(int16_t)args[0];
 395              		.loc 1 44 9 is_stmt 1 view .LVU76
  44:Src/myfunc.c  ****     *(int16_t *)edit_value=(int16_t)args[0];
 396              		.loc 1 44 12 is_stmt 0 view .LVU77
 397 0060 1549     		ldr	r1, .L35+16
 398 0062 6868     		ldr	r0, [r5, #4]
 399 0064 FFF7FEFF 		bl	compare_string
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 11


 400              	.LVL37:
  44:Src/myfunc.c  ****     *(int16_t *)edit_value=(int16_t)args[0];
 401              		.loc 1 44 11 view .LVU78
 402 0068 60B1     		cbz	r0, .L30
  45:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(int16_t *)edit_value);
 403              		.loc 1 45 5 is_stmt 1 view .LVU79
  45:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(int16_t *)edit_value);
 404              		.loc 1 45 41 is_stmt 0 view .LVU80
 405 006a D7ED007A 		vldr.32	s15, [r7]
  45:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(int16_t *)edit_value);
 406              		.loc 1 45 28 view .LVU81
 407 006e FDEEE77A 		vcvt.s32.f32	s15, s15
 408 0072 17EE903A 		vmov	r3, s15	@ int
 409 0076 1AB2     		sxth	r2, r3
  45:Src/myfunc.c  ****     uprintf("ok set %s = %d\r\n",s[0],*(int16_t *)edit_value);
 410              		.loc 1 45 27 view .LVU82
 411 0078 3280     		strh	r2, [r6]	@ movhi
  46:Src/myfunc.c  ****   }else if(compare_string(s[1],"f")){
 412              		.loc 1 46 5 is_stmt 1 view .LVU83
 413 007a 2968     		ldr	r1, [r5]
 414 007c 0D48     		ldr	r0, .L35+12
 415 007e FFF7FEFF 		bl	uprintf
 416              	.LVL38:
 417 0082 EBE7     		b	.L23
 418              	.L30:
  47:Src/myfunc.c  ****     *(float *)edit_value=args[0];
 419              		.loc 1 47 9 view .LVU84
  47:Src/myfunc.c  ****     *(float *)edit_value=args[0];
 420              		.loc 1 47 12 is_stmt 0 view .LVU85
 421 0084 0D49     		ldr	r1, .L35+20
 422 0086 6868     		ldr	r0, [r5, #4]
 423 0088 FFF7FEFF 		bl	compare_string
 424              	.LVL39:
  47:Src/myfunc.c  ****     *(float *)edit_value=args[0];
 425              		.loc 1 47 11 view .LVU86
 426 008c 0028     		cmp	r0, #0
 427 008e E5D0     		beq	.L23
  48:Src/myfunc.c  ****     uprintf("ok set %s = %f\r\n",s[0],*(float *)edit_value);
 428              		.loc 1 48 5 is_stmt 1 view .LVU87
  48:Src/myfunc.c  ****     uprintf("ok set %s = %f\r\n",s[0],*(float *)edit_value);
 429              		.loc 1 48 30 is_stmt 0 view .LVU88
 430 0090 3868     		ldr	r0, [r7]	@ float
  48:Src/myfunc.c  ****     uprintf("ok set %s = %f\r\n",s[0],*(float *)edit_value);
 431              		.loc 1 48 25 view .LVU89
 432 0092 3060     		str	r0, [r6]	@ float
  49:Src/myfunc.c  ****   }
 433              		.loc 1 49 5 is_stmt 1 view .LVU90
 434 0094 FFF7FEFF 		bl	__aeabi_f2d
 435              	.LVL40:
 436 0098 0246     		mov	r2, r0
 437 009a 0B46     		mov	r3, r1
 438 009c 2968     		ldr	r1, [r5]
 439 009e 0848     		ldr	r0, .L35+24
 440 00a0 FFF7FEFF 		bl	uprintf
 441              	.LVL41:
 442 00a4 DAE7     		b	.L23
 443              	.L36:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 12


 444 00a6 00BF     		.align	2
 445              	.L35:
 446 00a8 00000000 		.word	.LANCHOR0
 447 00ac 00000000 		.word	.LC6
 448 00b0 14000000 		.word	.LC7
 449 00b4 18000000 		.word	.LC8
 450 00b8 2C000000 		.word	.LC9
 451 00bc 30000000 		.word	.LC10
 452 00c0 34000000 		.word	.LC11
 453              		.cfi_endproc
 454              	.LFE134:
 456              		.section	.rodata.command_init.str1.4,"aMS",%progbits,1
 457              		.align	2
 458              	.LC12:
 459 0000 74657374 		.ascii	"test\000"
 459      00
 460 0005 000000   		.align	2
 461              	.LC13:
 462 0008 7365745F 		.ascii	"set_u4\000"
 462      753400
 463 000f 00       		.align	2
 464              	.LC14:
 465 0010 6765745F 		.ascii	"get_p\000"
 465      7000
 466              		.section	.text.command_init,"ax",%progbits
 467              		.align	1
 468              		.global	command_init
 469              		.syntax unified
 470              		.thumb
 471              		.thumb_func
 472              		.fpu fpv4-sp-d16
 474              	command_init:
 475              	.LFB137:
  76:Src/myfunc.c  **** 
  77:Src/myfunc.c  **** /*
  78:Src/myfunc.c  **** 将要增加的命令与函数写在这里
  79:Src/myfunc.c  **** */
  80:Src/myfunc.c  **** void command_init(void){
 476              		.loc 1 80 24 view -0
 477              		.cfi_startproc
 478              		@ args = 0, pretend = 0, frame = 0
 479              		@ frame_needed = 0, uses_anonymous_args = 0
 480 0000 08B5     		push	{r3, lr}
 481              	.LCFI9:
 482              		.cfi_def_cfa_offset 8
 483              		.cfi_offset 3, -8
 484              		.cfi_offset 14, -4
  81:Src/myfunc.c  ****   add_cmd("test",test);  
 485              		.loc 1 81 3 view .LVU92
 486 0002 0649     		ldr	r1, .L39
 487 0004 0648     		ldr	r0, .L39+4
 488 0006 FFF7FEFF 		bl	add_cmd
 489              	.LVL42:
  82:Src/myfunc.c  ****   add_cmd("set_u4",set_to_u4);
 490              		.loc 1 82 3 view .LVU93
 491 000a 0649     		ldr	r1, .L39+8
 492 000c 0648     		ldr	r0, .L39+12
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 13


 493 000e FFF7FEFF 		bl	add_cmd
 494              	.LVL43:
  83:Src/myfunc.c  ****   add_cmd("get_p",get_position);
 495              		.loc 1 83 3 view .LVU94
 496 0012 0649     		ldr	r1, .L39+16
 497 0014 0648     		ldr	r0, .L39+20
 498 0016 FFF7FEFF 		bl	add_cmd
 499              	.LVL44:
  84:Src/myfunc.c  **** }
 500              		.loc 1 84 1 is_stmt 0 view .LVU95
 501 001a 08BD     		pop	{r3, pc}
 502              	.L40:
 503              		.align	2
 504              	.L39:
 505 001c 00000000 		.word	test
 506 0020 00000000 		.word	.LC12
 507 0024 00000000 		.word	set_to_u4
 508 0028 08000000 		.word	.LC13
 509 002c 00000000 		.word	get_position
 510 0030 10000000 		.word	.LC14
 511              		.cfi_endproc
 512              	.LFE137:
 514              		.global	Var_List
 515              		.section	.bss.Var_List,"aw",%nobits
 516              		.align	2
 517              		.set	.LANCHOR0,. + 0
 520              	Var_List:
 521 0000 00000000 		.space	80
 521      00000000 
 521      00000000 
 521      00000000 
 521      00000000 
 522              		.text
 523              	.Letext0:
 524              		.file 2 "c:\\arm_gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 525              		.file 3 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 526              		.file 4 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 527              		.file 5 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 528              		.file 6 "c:\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 529              		.file 7 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 530              		.file 8 "c:\\arm_gcc\\arm-none-eabi\\include\\stdlib.h"
 531              		.file 9 "Drivers/CMSIS/Include/core_cm4.h"
 532              		.file 10 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 533              		.file 11 "mylib/uart_ext.h"
 534              		.file 12 "Inc/foc.h"
 535              		.file 13 "mylib/command.h"
 536              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cctZudkB.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 myfunc.c
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:19     .rodata.get_position.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:23     .text.get_position:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:31     .text.get_position:00000000 get_position
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:64     .text.get_position:00000018 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:70     .rodata.test.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:83     .text.test:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:89     .text.test:00000000 test
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:177    .text.test:00000050 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:185    .rodata.set_to_u4.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:189    .text.set_to_u4:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:196    .text.set_to_u4:00000000 set_to_u4
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:253    .text.set_to_u4:00000034 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:258    .rodata.set_val.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:277    .text.set_val:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:284    .text.set_val:00000000 set_val
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:446    .text.set_val:000000a8 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:457    .rodata.command_init.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:467    .text.command_init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:474    .text.command_init:00000000 command_init
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:505    .text.command_init:0000001c $d
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:520    .bss.Var_List:00000000 Var_List
C:\Users\ncer\AppData\Local\Temp\cctZudkB.s:516    .bss.Var_List:00000000 $d

UNDEFINED SYMBOLS
__aeabi_f2d
uprintf
Position_Degree
Set_to_U4
HAL_Delay
compare_string
add_cmd
